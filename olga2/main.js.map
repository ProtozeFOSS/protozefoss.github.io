{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/canvas-chessboard/canvas-chessboard.component.ts","./src/app/canvas-chessboard/canvas-chessboard.component.html","./src/app/canvas-chessboard/types.ts","./src/app/common/kokopu-engine.ts","./src/app/common/toggle-switch/toggle-switch.component.ts","./src/app/common/toggle-switch/toggle-switch.component.html","./src/app/common/value-slider/value-slider.component.ts","./src/app/common/value-slider/value-slider.component.html","./src/app/olga-controls/olga-controls.component.ts","./src/app/olga-controls/olga-controls.component.html","./src/app/olga-header/olga-header.component.ts","./src/app/olga-header/olga-header.component.html","./src/app/olga-header/player-showcase/player-showcase.component.ts","./src/app/olga-header/player-showcase/player-showcase.component.html","./src/app/olga-score/olga-score.component.ts","./src/app/olga-score/olga-score.html","./src/app/olga-score/score-flow/flow-item/flow-item.component.ts","./src/app/olga-score/score-flow/flow-item/flow-item.component.html","./src/app/olga-score/score-flow/score-flow.component.ts","./src/app/olga-score/score-flow/score-flow.component.html","./src/app/olga-score/score-table/score-column/score-column.component.ts","./src/app/olga-score/score-table/score-column/score-column.component.html","./src/app/olga-score/score-table/score-table.component.ts","./src/app/olga-score/score-table/score-table.component.html","./src/app/olga-score/score-table/table-item/table-item.component.ts","./src/app/olga-score/score-table/table-item/table-item.component.html","./src/app/olga-status/olga-status.component.ts","./src/app/olga-status/olga-status.component.html","./src/app/services/layout.service.ts","./src/app/services/olga.service.ts","./src/app/services/themes.service.ts","./src/app/test.ts","./src/environments/environment.ts","./src/main.ts","jsdom (ignored)","jsdom/lib/jsdom/living/generated/utils (ignored)","jsdom/lib/jsdom/utils (ignored)"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { ActivatedRoute, Router, RoutesRecognized } from \"@angular/router\";\nimport {\n  Component,\n  AfterViewInit,\n  ViewChild,\n  ElementRef,\n  Output,\n  ComponentFactoryResolver,\n  EventEmitter,\n} from '@angular/core';\nimport { GamescoreUxComponent } from './olga-score/olga-score.component';\nimport { CanvasChessBoard } from './canvas-chessboard/canvas-chessboard.component';\nimport { ThemeService } from './services/themes.service';\nimport { LayoutService } from './services/layout.service';\nimport { OlgaService } from './services/olga.service';\nimport { OlgaControlsComponent } from './olga-controls/olga-controls.component';\nimport { OlgaHeaderComponent } from './olga-header/olga-header.component';\nimport { TestPGNData } from './test';\nimport { OlgaStatusComponent } from './olga-status/olga-status.component';\nconst THEMES = 'themes';\nconst LAYOUT = 'layout';\nconst OLGA = 'olga';\n\nenum JSRPC {\n  setPGN = 'setPGN',\n  onSettings = 'onSettings',\n  getSettings = 'getSettings',\n  scaleTo = 'scaleTo'\n}\n\n@Component({\n  selector: 'olga',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss'],\n})\nexport class Olga implements AfterViewInit {\n  title = 'Olga PGN Viewer 2.0';\n  resizeHandle: HTMLElement | null = null;\n  // @ts-ignore\n  @ViewChild(GamescoreUxComponent) gameScoreComponent: GamescoreUxComponent;\n  // @ts-ignore\n  @ViewChild(CanvasChessBoard) canvasBoardComponent: CanvasChessBoard;\n  // @ts-ignore\n  @ViewChild('olgaContainer') appContainer: ElementRef;\n  // @ts-ignore\n  @ViewChild(OlgaControlsComponent) controlsComponent: OlgaControlsComponent;\n  // @ts-ignore\n  @ViewChild(OlgaHeaderComponent) headerComponent: OlgaHeaderComponent | null;\n  // @ts-ignore\n  @ViewChild(OlgaStatusComponent) statusComponent: OlgaStatusComponent | null;\n  // @ts-ignore\n  @Output() gameScoreWidth: number = 389;\n  // @ts-ignore\n  @Output() oldWidth: number = 0;\n  // @ts-ignore\n  @Output() keymap: Map<string, any> = new Map<string, any>();\n  // @ts-ignore\n  @ViewChild('pgnData') pgnData: ElementRef; // To Be Deleted\n  constructor(\n    public olga: OlgaService,\n    public themes: ThemeService,\n    public layout: LayoutService,\n    private route: ActivatedRoute\n  ) {\n\n    this.route.queryParams.subscribe(params => {\n      if (params) {\n        try {\n          console.log(params);\n          const decoded = atob(params.settings);\n          const settings_obj = JSON.parse(decoded);\n          this.applyJsonSettings(settings_obj);\n        } catch (any) {\n\n        }\n      }\n    });\n    const date = new Date();\n    this.olga.UUID = 'OLGA-' + date.getTime().toString();\n    console.log('ID: ' + this.olga.UUID);\n    this.loadKeymap();\n  }\n\n\n  // tslint:disable-next-line: typedef\n  ngAfterViewInit() {\n    this.layout.boardElement = document.getElementById(this.olga.UUID + '-ccb');\n    this.layout.controlsElement = document.getElementById('olga-controls-' + this.olga.UUID);\n    this.layout.statusElement = document.getElementById('olga-status-' + this.olga.UUID);\n    this.layout.headerElement = document.getElementById('olga-header-' + this.olga.UUID);\n    this.layout.resizeElement = document.getElementById('resize-handle-' + this.olga.UUID);\n\n    this.olga.attachOlga(this);\n    this.layout.initializeLayout(this);\n    if (this.gameScoreComponent) {\n      //this.gameScoreComponent.resizeHandleEvent = this.layout.onSliderDrag.bind(this.layout);\n      //this.gameScoreComponent.resizeTouchEvent = this.layout.onSliderTouch.bind(this.layout);\n    }\n    this.themes.boardBGLight.subscribe((light) => {\n      if (this.canvasBoardComponent) {\n        this.canvasBoardComponent.setLightTile(light);\n      }\n    });\n    this.themes.boardBGDark.subscribe((dark) => {\n      if (this.canvasBoardComponent) {\n        this.canvasBoardComponent.setDarkTile(dark);\n      }\n    });\n    this.olga.loadPGN(TestPGNData + this.pgnData.nativeElement.value);\n    window.onkeydown = this.keyEvent.bind(this);\n    window.onmessage = this.onMessage.bind(this);\n    let container = this.appContainer.nativeElement;\n    container.style.width = '100%';\n    container.style.height = '100%';\n    this.olga.loadSettings();\n    this.themes.initializeColorPalette();\n    window.setTimeout(() => {\n      this.layout.resizeLayout(container.clientWidth, container.clientHeight);\n    }, 200);\n  }\n  mouseMoved(event: MouseEvent): void {\n    if (this.gameScoreComponent) {\n      //this.gameScoreComponent.resizeHandleEvent(event);\n      if (event.buttons === 0) {\n      }\n    }\n  }\n\n  public autoPlayActive(): boolean {\n    if (this.controlsComponent) {\n      return this.controlsComponent.playing;\n    }\n    return false;\n  }\n\n  public applyJsonSettings(settings: object): boolean {\n    if (settings) {\n      // @ts-ignore\n      if (settings[THEMES]) {\n        // @ts-ignore\n        this.themes.setSettings(settings[THEMES]);\n      }\n      return true;\n    }\n    return false;\n  }\n\n\n  private createParentMessage(type: string, data: any): string {\n    let message = '';\n    try {\n      message = JSON.stringify({ type, data });\n    } catch {\n      console.log('Failed creating parent message for type:' + type);\n      console.log(data);\n    }\n    return message;\n  }\n\n  public onMessage(event: any): void {\n    if (event && event.data && (typeof event.data === 'string')) {\n      let message_obj = null;\n      try {\n        message_obj = JSON.parse(event.data);\n      } catch (error) {\n        console.log('Bad JSON data - Window OLGA Message');\n        console.log(error);\n        return;\n      }\n      if (message_obj.type) {\n        switch (message_obj.type) {\n          case JSRPC.setPGN: {\n            if (message_obj.pgn) {\n              const pgn = message_obj.pgn;\n              this.olga.loadPGN(pgn);\n              //parent.postMessage('Loaded PGN succesfully.', parent.origin);\n            }\n            break;\n          }\n          case JSRPC.getSettings: {\n            let message = this.createParentMessage(JSRPC.onSettings, this.getSettings());\n            if (message.length) {\n              parent.postMessage(message, parent.origin);\n            }\n            break;\n          }\n          case JSRPC.scaleTo: {\n            if (message_obj.height && message_obj.width) {\n              this.scaleTo(message_obj.width, message_obj.height);\n            }\n            break;\n          }\n          default: {\n            console.log('Invalid OLGA Message:\\n');\n            console.log(event.data);\n            break;\n          }\n        }\n      }\n    }\n  }\n\n  public saveSettings(settings: any) {\n    let message = this.createParentMessage(JSRPC.onSettings, settings);\n    if (message.length) {\n      parent.postMessage(message, parent.origin);\n    }\n  }\n\n  public scaleTo(width: number, height: number) {\n\n  }\n\n  public applyDefaultSettings(): boolean {\n    this.themes.initializeColorPalette();\n    return true;\n  }\n\n  public getSettings(): object {\n    const themeSettings = this.themes.settings();\n    const layoutSettings = this.layout.settings();\n    const olgaSettings = this.olga.settings();\n    return { themes: themeSettings, layout: layoutSettings, olga: olgaSettings };\n  }\n\n  public getJsonSettings(): string {\n    const themeSettings = this.themes.settings();\n    const layoutSettings = this.layout.settings();\n    const olgaSettings = this.olga.settings();\n    return JSON.stringify({ themes: themeSettings, layout: layoutSettings, olga: olgaSettings });\n  }\n\n\n  public toggleAutoPlay(): void {\n    if (this.olga) {\n      this.olga.toggleAutoPlay();\n    }\n  }\n\n  protected loadKeymap(): void {\n    // initial default keymap\n    this.keymap.set('Space', () => { this.olga.toggleAutoPlay(); });\n    this.keymap.set('Home', () => { this.olga.moveToStart(); });\n    this.keymap.set('End', () => { this.olga.moveToEnd(); });\n    this.keymap.set('ArrowRight', () => { this.olga.advance(); });\n    this.keymap.set('ArrowLeft', () => { this.olga.previous(); });\n    this.keymap.set('KeyI', () => { this.olga.rotateBoardOrientation(); });\n  }\n\n  keyEvent(event: any): void {\n    console.log(event);\n    if (this.keymap.has(event.code)) {\n      console.log('Got this key: ' + event.code);\n      const action = this.keymap.get(event.code);\n      action();\n    }\n  }\n\n  touchMoved(event: TouchEvent): void {\n    if (this.gameScoreComponent) {\n      //this.resizeTouchEvent(event);\n    }\n  }\n\n  ignoreEvent(event: MouseEvent): void {\n    //console.log('Ignoring ' + event);\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  /// RESIZING FUNCTIONS\n  // resetResizeHandle(event: DragEvent | MouseEvent): void {\n  //   this.resizing = false;\n  //   if (this.resizeHandle && event.buttons === 0) {\n  //     document.body.style.cursor = 'pointer';\n  //     this.resizeHandle.nativeElement.style.cursor = 'pointer';\n  //   }\n  //   if (this.resizeHandleEvent) {\n  //     this.resizeHandleEvent(event);\n  //   }\n  // }\n\n  // setGrabCursor(event: DragEvent | MouseEvent): void {\n  //   this.resizing = true;\n  //   document.body.style.cursor = 'grab';\n  //   if (this.resizeHandle) {\n  //     this.resizeHandle.nativeElement.style.cursor = 'grab';\n  //   }\n  // }\n\n  // resetCursor(): void {\n  //   document.body.style.cursor = 'pointer';\n  //   if (this.resizeHandle) {\n  //     this.resizeHandle.nativeElement.style.cursor = 'pointer';\n  //   }\n  // }\n\n  // startTouch(event: TouchEvent): void {\n  //   const touchPoint = event.touches[0];\n  //   if (touchPoint) {\n  //     if (this.layout.resizeElement) {\n  //       this.resizing = true;\n  //     }\n  //   }\n  // }\n\n  // stopTouch(event: TouchEvent) {\n  //   this.resizing = false;\n  // }\n\n\n\n  // resizeHandleEvent(event: DragEvent | MouseEvent): void {\n  //   if (this.resizing) {\n  //     this.resizeScore();\n  //   }\n  // }\n\n  // resizeTouchEvent(event: TouchEvent): void {\n  //   if (this.resizing) {\n  //     this.resizeScore();\n  //   }\n  // }\n\n  // resizeHandleCore(event: DragEvent | MouseEvent): void {\n  //   event.preventDefault();\n  //   event.stopPropagation();\n  //   //document.body.style.cursor = 'grab';\n  //   if (this.resizeHandle) {\n  //     //this.resizeHandle.nativeElement.style.cursor = 'grab';\n  //   }\n  //   if (event.buttons > 0 && this.resizeHandleEvent) {\n  //     this.resizeHandleEvent(event);\n  //   }\n  // }\n\n}\n","<div #olgaContainer id=\"{{olga.UUID}}-olga-container\" class=\"olga-container\">\n  <canvas-chessboard (touchstart)=\"canvasBoardComponent.touchStart($event)\" #canvasBoardComponent\n    id=\"{{this.olga.UUID}}-ccb\" boardID=\"{{olga.UUID}}\" [theme]=\"themes.boardTheme()\"\n    [showLabels]=\"this.olga.showLabels.value\">\n  </canvas-chessboard>\n  <olga-score *ngIf=\"layout.state <= 2\" id=\"olga-score-{{this.olga.UUID}}\" (contextmenu)=\"ignoreEvent($event)\">\n  </olga-score>\n  <olga-controls id=\"olga-controls-{{olga.UUID}}\"></olga-controls>\n  <olga-status id=\"olga-status-{{olga.UUID}}\"></olga-status>\n  <olga-header id=\"olga-header-{{olga.UUID}}\" class=olgaheader{{layout.state}}></olga-header>\n  <!-- https://www.chessgames.com/perl/chessgame?gid=1067289 Game 1 -->\n  <!-- https://www.chessgames.com/perl/chessgame?gid=1935550 Game 2 -->\n  <!-- https://www.chessgames.com/perl/nph-chesspgn?text=1&gid=1008418  Game 3-->\n  <!-- http://chess960jungle.blogspot.com/2014/02/chess960-database-complete-games-2001.html Chess960 Games -->\n  <!-- Game 7 is the original game that I was using for testing, I lost the source -->\n  <!-- <div #resizeHandle id=\"resize-handle-{{this.olga.UUID}}\" class=\"resize-handle\" (touchstart)=\"startTouch($event)\"\n  (touchend)=\"stopTouch($event)\" (mouseup)=\"resetResizeHandle($event)\" (mousedown)=\"setGrabCursor($event)\"\n  (mouseleave)=\"resetCursor()\"></div> -->\n  <input style=\"visibility: hidden; display: none;\" #pgnData value='[Event \"GMA, Wijk aan Zee NED\"]\n[Site \"?\"]\n[Date \"2003.??.??\"]\n[Round \"1\"]\n[White \"V Anand\"]\n[Black \"T Radjabov\"]\n[Result \"1/2\"]\n[WhiteElo \"2750\"]\n[BlackElo \"2620\"]\n[ECO \"C12\"]\n[PlyCount \"55\"]\n[Annotator \"Hathaway\"]\n\n1. e4 e6\n{ Im not terribly familiar with the style of Radjabov, so I dont know if this is his usual opening. }\n2. d4 d5 3. Nc3 Nf6 (3...Bb4\n{ The Winawer Variation is probably best, though not as easy to play. }) 4. Bg5\n{ threatens e4-e5xf6 }\n (4. e5\n{ keeps pieces on the board and avoids ...dxe4 }) 4...Bb4 (4...Be7\n{ is more common and aims to trade dark-square bishops to ease Blacks cramp }) (4...dxe4\n{ aims to avoid any cramp by bringing pieces into alignment for trading, though White does get at least one very good piece (Ne4 or Bg5) and an easier time castling queen-side, to stir up king-side threats }\n 5. Nxe4 Be7  (\n{ or Rubinsteins }\n 5...Nbd7) ) 5. e5 h6 6. Bd2 (6. Bh4 g5 7. exf6 gxh4\n{ Black seems to equalize a little easier after this as he can win Pf6 in exchange for Ph4. }) 6...Bxc3 (6...Nfd7 7. Qg4\n{ and White isnt incurring any weaknesses, but is either gaining Bb4 for Nc3 or after ...Bb4-f8 Black is cramped again }\n  (7. Nb5 $5 Bxd2+ 8. Qxd2 a6 9. Na3) ) 7. bxc3 Ne4 8. Qg4\n{ White immediately takes aim at the backward Pg7 & Rh8 and usually Pf7 & Ke8. For the moment Bd2 serves to defend Pc3 and to prevent ...Qd8-g5 (offering a queen trade to end the pressure) . }\n (\n{ While }\n 8. h4\n{ is often useful in the French Defense with this pawn structure, I dont know that its been tried in this opening on this move. }) 8...g6 9. Bd3 (9. h4\n{ could take over for Bd2 in guarding g5 and preparing a later attack by f2-f4, h4-h5 or vice versa. It also would allow Rh1 to develop to build the direct frontal threats to Pf7 & Pg6. }\n 9...c5 10. Bd3 Nxd2 11. Kxd2 Qa5 12. dxc5 Qxc5 13. Ne2 Qxf2 $4 14. Raf1 Qc5 15. Bxg6 fxg6 16. Qxg6+)  (9. Qd1\n{ Fritz7; Odd! }) 9...Nxd2 10. Kxd2 c5 11. Nf3\n{ This has been considered the main line for many years, but I wonder if White can allow ...c5-c4 and not use more pawns to fight through Blacks pawns. }\n (11. dxc5\n{ is probably still wrong because of ...Qg5+ }) (11. h4\n{ still makes sense }) 11...Bd7 (11...c4 $6\n{ The problem with this is that however much it slows White, it also limits Blacks queen-side offensive possibilities. }) (\n{ Prematurely playing }\n 11...cxd4\n{ lets White straighten-out his pawns and Black has made no real progress. }\n 12. cxd4)  (11...Qa5 $5\n{ Fritz7: with the idea of ...cxd4 }) 12. dxc5 Qe7 13. Rab1 Bc6 14. Nd4 Nd7\n{ These last few moves have been quite unusual for a French Defense, but they make sense; Qe7 defends Pf7 while Bc6 defends Pb7 and Nd7 threatens Pc5 & Pe5. }\n15. Rhe1 (15. Nxc6 bxc6 16. Rb7 Qxc5 17. Qf4 g5 18. Qd4 Qa5 19. Rb2 c5 $11\n{ Fritz7 }) 15...Nxc5 16. Re3\n{ another way of getting the rook into position, in front of the king-side pawns, to threaten Blacks king-side pawns }\n16...h5 17. Qg3 O-O-O\n{ After this it would seem Blacks pieces can handle any threats White can generate. However, black might also have ideas of winning. How might he do that? Well, ...Be8, ...Kc8-b8-a8, ...Rd8-c8, ...Nc5-a4 and Pc3 is a target (slow I know) . Another idea is to keep Kd2 from ever escaping to safety by advancing ...h5-h4-h3 to break open the king-side and open the h-file for Blacks rooks. }\n (17...h4 $15\n{ Fritz7 }) (17...Nxd3 $15\n{ Fritz7 }) 18. Ke1 Qc7 (18...h4 19. Qg4 Rh5) 19. h4\n{ Anand aims to keep the king-side perfectly safe to ensure a draw. }\n (19. Qh4\n{ Fritz7 }) 19...Qa5 20. Kf1 (20. Nxc6 bxc6 21. Kf1 Kd7 20. Qf4 Ke8 $11\n{ Fritz7 }) 20...Rd7 (\n{ Premature is }\n 20...Qxa2 21. Ree1 Qa5  (21...Ba4 $11\n{ Fritz7 })  22. Ra1 Qxc3 23. Nxc6 bxc6 24. Ba6+ $18) 21. Qf4\n{ This general activity is perfect. It threatens Pf7, defends Nd4 and in some cases prepares for Qf4-b4 to attack Kc8. }\n (21. Ree1\n{ Fritz7 }) (21. Nxc6 bxc6 22. Ree1\n{ Fritz7 }) 21...Rhd8\n{ Black is probably wondering why he organized his pieces to only defend light squares. Only Qa5 and Nc5 can get to dark squares and that makes Whites task of coordinating much easier. }\n (21...Qxa2\n{ still premature }\n 22. Nxc6 bxc6 23. Qb4 Nb7 24. Ree1)  (21...Qxc3 $4 22. Nxc6 bxc6 23. Ba6+)  (21...Rc7 $14\n{ Fritz7 }) (21...Na4 $14\n{ Fritz7 }) 22. Kg1 (22. Nxc6 bxc6 23. Qb4 Qxb4 24. cxb4 d4 25. Ree1 Na4 $11\n{ Fritz7 }) 22...Nxd3 23. Rxd3 (23. cxd3 Qxc3 24. Rg3 Rc7 $14\n{ Fritz7 }) 23...Qc5 (23...Qxa2 24. Rdd1 Qc4 $11\n{ Fritz7 }) 24. Rb4 a5 $2 (24...Rc7\n{ Mark and Fritz7 agree! }) 25. Rb1 Rc7 26. Qc1 Be8 27. Nb3 (27. Qb2\n{ If White commits too quickly to the b-file then Black might actually create some play against Ph4 and on the c-file. }\n 27...Qe7  (27...a4 $11\n{ Fritz7 })  28. Nf3 Rc4\n{ possibly preparing ...b5 }) 27...Qb6 (27...Qc4 28. Nxa5 Qxh4 $14\n{ Fritz7 }) 28. Nd4\n{ Black created the weakness (Pa5) and cant quite defend it, so Anand forces a draw. }\n1/2-1/2' class=\"input-box\" #pgnBox type=\"text\" />\n</div>","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router'\nimport { Olga } from './app.component';\nimport { GamescoreUxComponent } from './olga-score/olga-score.component';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatGridListModule } from '@angular/material/grid-list';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { FlowItemComponent } from './olga-score/score-flow/flow-item/flow-item.component';\nimport { ThemeService } from './services/themes.service';\nimport { ToggleSwitchComponent } from './common/toggle-switch/toggle-switch.component';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatIconModule } from '@angular/material/icon';\nimport { OlgaService } from './services/olga.service';\nimport { LayoutService } from './services/layout.service';\nimport { CanvasChessBoard } from './canvas-chessboard/canvas-chessboard.component';\nimport { OlgaControlsComponent } from './olga-controls/olga-controls.component';\nimport { OlgaStatusComponent } from './olga-status/olga-status.component';\nimport { OlgaHeaderComponent } from './olga-header/olga-header.component';\nimport { ValueSliderComponent } from './common/value-slider/value-slider.component';\nimport { PlayerShowcaseComponent } from './olga-header/player-showcase/player-showcase.component';\nimport { ColorSketchModule } from 'ngx-color/sketch';\nimport { ScoreTableComponent } from './olga-score/score-table/score-table.component';\nimport { ScoreFlowComponent } from './olga-score/score-flow/score-flow.component';\nimport { TableItemComponent } from './olga-score/score-table/table-item/table-item.component';\nimport { ScoreColumnComponent } from './olga-score/score-table/score-column/score-column.component';\n\nconst routes: Routes = [{ path: '', redirectTo: 'olga2', pathMatch: 'full' },\n{ path: '', component: Olga, pathMatch: 'full' },\n{ path: ':settings', component: Olga, pathMatch: 'full' }];\n\n@NgModule({\n  declarations: [\n    Olga,\n    GamescoreUxComponent,\n    FlowItemComponent,\n    ToggleSwitchComponent,\n    CanvasChessBoard,\n    OlgaControlsComponent,\n    OlgaStatusComponent,\n    OlgaHeaderComponent,\n    ValueSliderComponent,\n    PlayerShowcaseComponent,\n    ScoreTableComponent,\n    ScoreFlowComponent,\n    TableItemComponent,\n    ScoreColumnComponent,\n  ],\n  imports: [\n    BrowserModule,\n    RouterModule.forRoot(routes),\n    BrowserAnimationsModule,\n    MatButtonModule,\n    MatCardModule,\n    MatDividerModule,\n    MatIconModule,\n    MatInputModule,\n    MatGridListModule,\n    MatMenuModule,\n    MatTabsModule,\n    ColorSketchModule\n  ],\n  providers: [LayoutService, ThemeService, OlgaService, Clipboard],\n  bootstrap: [Olga],\n})\nexport class AppModule { }\n","import { Component, OnInit, AfterViewInit, Input, Output, ViewChild, ElementRef } from '@angular/core';\nimport { fabric } from 'fabric';\nimport { BehaviorSubject } from 'rxjs';\nimport { ChessMove } from '../common/kokopu-engine';\nimport { ThemeService } from '../services/themes.service';\nimport { OlgaService } from '../services/olga.service';\nimport { LabelState, BoardTheme, BoardSettings, Piece, SquareNames, Color } from './types';\n\nexport type Coordinate = { x: number, y: number };\n\nenum ObjectType {\n  Tile = 111,\n  Label = 222\n}\n\n@Component({\n  selector: 'canvas-chessboard',\n  templateUrl: './canvas-chessboard.component.html',\n  styleUrls: ['./canvas-chessboard.component.scss'],\n})\nexport class CanvasChessBoard implements OnInit, AfterViewInit {\n  @Input() size = 320;\n  @Input() tileSize = Math.floor(this.size / 8);\n  @Input() interactive = true;\n  @Input() showLabels = false;\n  @Input() boardID: string = '';\n  container: HTMLElement | null = null;\n  protected promotionDialog: fabric.Group | null = null;\n  protected knightButton: fabric.Group | null = null;\n  protected bishopButton: fabric.Group | null = null;\n  protected rookButton: fabric.Group | null = null;\n  protected queenButton: fabric.Group | null = null;\n  protected pieceAnimation: { piece: fabric.Group, x: number, y: number } | null = null;\n  @Input() theme: BoardTheme = new BoardTheme();\n  settings: BoardSettings = new BoardSettings();\n  @Output() pieceMap = new Map<string, fabric.Group>();\n  @Output() pieces: { tile: number; object: fabric.Group }[] = [];\n  @Output() background: fabric.Rect | null = null;\n  @Output() tileGroup: fabric.Group | null = null;\n  @Output() tiles: { tile?: fabric.Object; piece?: Piece }[] = [];\n  @Output() labels: fabric.Object[] = [];\n  @Output() canvas: fabric.Canvas | null = null;\n\n  readonly labelState = new BehaviorSubject<LabelState>(LabelState.LeftBottom);\n  selectedPiece: {\n    tile: number;\n    object: fabric.Group;\n  } | null = null;\n  @Output() touching = false;\n  @Output() midPromotion = false;\n  @ViewChild('boardCanvas', { static: false }) boardCanvas: ElementRef | null = null;\n  constructor(\n    public olga: OlgaService,\n    public themes: ThemeService\n  ) { }\n\n\n\n  // initialization\n  ngOnInit(): void { }\n\n  ngAfterViewInit(): void {\n    fabric.Object.prototype.transparentCorners = false;\n    this.container = document.getElementById(this.boardID + '-ccb');\n    if (this.boardCanvas) {\n      this.canvas = new fabric.Canvas(this.boardCanvas.nativeElement);\n      this.canvas.selection = false;\n      const waitCount = this.loadPieces();\n      waitCount.subscribe((count) => {\n        if (count >= 12) {\n          this.generateBoard();\n          this.connectMouseInput();\n          const position = this.olga.getGame()?.getPosition();\n          if (position) {\n            this.setBoardToPosition(position);\n          }\n          waitCount.unsubscribe();\n          this.resizeBoardObjects(this.size);\n        }\n      });\n      this.canvas.hoverCursor = 'arrow';\n      this.canvas.allowTouchScrolling = true;\n      this.setInteractive(this.interactive);\n    }\n  }\n\n  private loadPieces(): BehaviorSubject<number> {\n    const count = new BehaviorSubject<number>(0);\n    this.loadPieceImage('wK', count);\n    this.loadPieceImage('wB', count);\n    this.loadPieceImage('wQ', count);\n    this.loadPieceImage('wR', count);\n    this.loadPieceImage('wP', count);\n    this.loadPieceImage('wN', count);\n    this.loadPieceImage('bK', count);\n    this.loadPieceImage('bB', count);\n    this.loadPieceImage('bQ', count);\n    this.loadPieceImage('bR', count);\n    this.loadPieceImage('bP', count);\n    this.loadPieceImage('bN', count);\n    return count;\n  }\n\n  private generateBoard(): void {\n    this.generateBoardObjects();\n    const position = this.olga.getGame()?.getPosition();\n    if (position) {\n      this.setBoardToPosition(position);\n    }\n  }\n\n  private loadPieceImage(\n    piece: string,\n    subject: BehaviorSubject<number>\n  ): void {\n    if (this.theme?.pieceSet) {\n      if (this.theme.isSpriteSheet) {\n      } else {\n        if (this.theme.fileExtension === '.svg') {\n          fabric.loadSVGFromURL(\n            this.theme.pieceSet + piece + this.theme.fileExtension,\n            (objects, options) => {\n              const obj = fabric.util.groupSVGElements(\n                objects,\n                options\n              ) as fabric.Group;\n              obj.left = -400;\n              obj.top = 0;\n              obj.moveTo(10);\n              this.pieceMap.set(piece, obj);\n              subject.next(subject.value + 1);\n            }\n          );\n        }\n      }\n    }\n  }\n\n\n  // Piece Animation\n  protected updatePiece() {\n    if (this.pieceAnimation) {\n      const piece = this.pieceAnimation.piece;\n      if (piece) {\n        const xC = piece.get('left');\n        let xN = (xC ? xC : 0);\n        if (xC && xC != this.pieceAnimation.x) {\n          let increment = this.tileSize * .2;\n          if (Math.abs(this.pieceAnimation.x - xC) < increment) {\n            increment = this.pieceAnimation.x - xC;\n          } else if (this.pieceAnimation.x < xC) {\n            increment *= -1;\n          }\n          xN = xC + increment;\n          piece.set('left', xN);\n        }\n        const yC = piece.get('top');\n        let yN = (yC ? yC : 0);\n        if (yC && yC != this.pieceAnimation.y) {\n          let increment = this.tileSize * .2;\n          if (Math.abs(this.pieceAnimation.y - yC) < increment) {\n            increment = this.pieceAnimation.y - yC;\n          } else if (this.pieceAnimation.y < yC) {\n            increment *= -1;\n          }\n          yN = yC + increment;\n          piece.set('top', yN);\n        }\n        piece.setCoords();\n        this.canvas?.requestRenderAll();\n        if (yN != this.pieceAnimation.y || xN != this.pieceAnimation.x) {\n          window.setTimeout(this.updatePiece.bind(this), 12);\n        } else {\n          this.pieceAnimation = null;\n        }\n      }\n    }\n  }\n\n  protected startMoveAnimation(piece: fabric.Group, x: number, y: number): void {\n    if (this.pieceAnimation) {\n      const lastPiece = this.pieceAnimation.piece;\n      lastPiece?.set('left', this.pieceAnimation.x);\n      lastPiece?.set('top', this.pieceAnimation.y);\n      lastPiece.setCoords();\n    }\n    this.pieceAnimation = { piece, x, y };\n    this.updatePiece();\n  }\n\n\n  protected performPromotion(move: ChessMove): void {\n    if (move.promotion) {\n      console.log('Promoting to ' + move.promotion.role);\n      console.log('@ ' + SquareNames[move.to]);\n      // remove old piece\n      this.removePiece(move.from);\n      this.addPiece(move.to, move.color, move.promotion.role);\n      this.olga.performPromotion(move);\n      this.closePromotionDialog();\n    }\n  }\n\n  protected closePromotionDialog() {\n    if (this.knightButton) {\n      this.canvas?.remove(this.knightButton);\n    }\n    if (this.bishopButton) {\n      this.canvas?.remove(this.bishopButton);\n    }\n    if (this.rookButton) {\n      this.canvas?.remove(this.rookButton);\n    }\n    if (this.queenButton) {\n      this.canvas?.remove(this.queenButton);\n    }\n    if (this.promotionDialog) {\n      this.canvas?.remove(this.promotionDialog);\n    }\n    this.knightButton = null;\n    this.bishopButton = null;\n    this.rookButton = null;\n    this.queenButton = null;\n    this.promotionDialog = null;\n  }\n\n\n\n  protected createPromotionDialog(move: ChessMove) {\n    // pull items out of chess move\n    const tileIndex = move.to;\n    if (move.role && move.color && tileIndex >= 0 && tileIndex < 64) {\n      const group = [];\n\n      if (this.settings.orientation == 'white') {\n        // translate tileIndex\n      }\n      // Create the background overlay (semi-transparent square)\n      const overlay = new fabric.Rect({\n        width: this.size,\n        height: this.size,\n        left: 0,\n        top: 0,\n      });\n      overlay.set('lockMovementX', true);\n      overlay.set('lockMovementY', true);\n      overlay.set('lockRotation', true);\n      overlay.set('lockScalingX', true);\n      overlay.set('lockScalingY', true);\n      overlay.set('lockUniScaling', true);\n      overlay.set('hasControls', false);\n      overlay.set('hasBorders', false);\n      overlay.set('selectable', false);\n      overlay.set('opacity', 0.65);\n      overlay.setCoords();\n      overlay.setColor('#0a0a0a');\n      group.push(overlay);\n\n      // Create the background square (rounded rectangle 80% width 64% height vertically and horizontally centered)\n      const height = 0.6 * this.size;\n      const width = 0.8 * this.size;\n\n      const bg = new fabric.Rect({\n        height: height,\n        width: width,\n        fill: this.themes.bgMenu,\n        left: (this.size - width) / 2,\n        top: (this.size - height) / 2,\n        rx: width * 0.02,\n        ry: width * 0.02,\n      });\n      bg.setColor(this.themes.bgMenu);\n      bg.set('lockMovementX', true);\n      bg.set('lockMovementY', true);\n      bg.set('lockRotation', true);\n      bg.set('lockScalingX', true);\n      bg.set('lockScalingY', true);\n      bg.set('lockUniScaling', true);\n      bg.set('hasControls', false);\n      bg.set('hasBorders', false);\n      bg.set('selectable', false);\n      bg.set('strokeWidth', 1);\n      bg.set('stroke', 'white');\n      bg.setCoords();\n      group.push(bg);\n      let pieceImage = null;\n      // Create the title text \"Promotion\" - white, subtle\n      const title = new fabric.Text('Promotion', {\n        fontWeight: '100',\n        fontSize: this.size * 0.07,\n        fontFamily: 'Courier New',\n      });\n      title.set('lockMovementX', true);\n      title.set('lockMovementY', true);\n      title.set('lockRotation', true);\n      title.set('lockScalingX', true);\n      title.set('lockScalingY', true);\n      title.set('lockUniScaling', true);\n      title.set('hasControls', false);\n      title.set('hasBorders', false);\n      title.set('selectable', false);\n      title.setColor('white');\n      title.set('originX', 'center');\n      title.set('originY', 'center');\n      title.set('left', this.size * 0.5);\n      title.set('top', this.size * 0.235);\n      title.setCoords();\n      group.push(title);\n      // Clone the promoted piece and tile and display them horizontally centered below title\n      let x = this.size / 2;\n      let y = this.size * 0.38 + 4;\n      const tileSize = this.size * 0.2;\n      // Tile Clone\n      const tileToClone = this.tiles[tileIndex];\n      if (tileToClone && tileToClone.tile) {\n        tileToClone.tile.clone((promotionTile: fabric.Object) => {\n          promotionTile.set('top', y);\n          promotionTile.set('left', x);\n          promotionTile.set('originX', 'center');\n          promotionTile.set('originY', 'center');\n          promotionTile.scaleToHeight(tileSize);\n          promotionTile.setCoords();\n          group.push(promotionTile);\n        });\n        pieceImage = this.pieceMap.get(move.color + move.role);\n        if (pieceImage) {\n          pieceImage.clone((pieceObject: fabric.Group) => {\n            pieceObject.set('originX', 'center');\n            pieceObject.set('originY', 'center');\n            pieceObject.set('top', y);\n            pieceObject.set('left', x);\n            pieceObject.scaleToHeight(tileSize);\n            pieceObject.setCoords();\n            group.push(pieceObject);\n          });\n        }\n      }\n      pieceImage = null;\n      // Create text \"{Color} has triggered at \" below tile and piece clone\n      // Create the title text \"Promotion\" - white, subtle\n      let color = 'White';\n      if (move.color === 'b') {\n        color = 'Black';\n      }\n      const prompt = new fabric.Text(color + ' has triggered promotion at', {\n        fontSize: this.size * 0.04,\n      });\n      prompt.set('lockMovementX', true);\n      prompt.set('lockMovementY', true);\n      prompt.set('lockRotation', true);\n      prompt.set('lockScalingX', true);\n      prompt.set('lockScalingY', true);\n      prompt.set('lockUniScaling', true);\n      prompt.set('hasControls', false);\n      prompt.set('hasBorders', false);\n      prompt.set('selectable', false);\n      prompt.setColor('white');\n      prompt.set('originX', 'center');\n      prompt.set('originY', 'center');\n      prompt.set('left', this.size * 0.5 - 24);\n      prompt.set('top', this.size * 0.53);\n      prompt.setCoords();\n      group.push(prompt);\n\n      // Create text to right of triggered text with move\n      const atText = new fabric.Text(SquareNames[tileIndex], {\n        fontSize: this.size * 0.055,\n      });\n      atText.set('lockMovementX', true);\n      atText.set('lockMovementY', true);\n      atText.set('lockRotation', true);\n      atText.set('lockScalingX', true);\n      atText.set('lockScalingY', true);\n      atText.set('lockUniScaling', true);\n      atText.set('hasControls', false);\n      atText.set('hasBorders', false);\n      atText.set('selectable', false);\n      const bgColor = tileToClone.tile?.get('fill');\n      atText.setColor(bgColor ? bgColor.toString() : 'white');\n      atText.set('originX', 'center');\n      atText.set('originY', 'center');\n      const promptWidth = prompt.get('width');\n      const promptLeft = prompt.get('left');\n\n      atText.set(\n        'left',\n        (promptLeft ? promptLeft : this.size * 0.2) +\n        (promptWidth !== undefined ? promptWidth : 20) / 2 +\n        this.size * 0.035\n      );\n      atText.set('top', this.size * 0.53);\n      atText.setCoords();\n      group.push(atText);\n      // Create 4 clones of tiles, 4 clones of pieces (Knight, Bishop, Rook, And King)\n\n      // Create the four tiles\n      y = this.size * 0.67 + 4;\n      x = this.size * 0.205;\n      const choiceSize = tileSize * 0.75;\n      if (tileToClone) {\n        let buttonGroup: fabric.Object[] = [];\n        tileToClone.tile?.clone((tile: fabric.Object) => {\n          tile.set('originX', 'left');\n          tile.set('originY', 'top');\n          tile.set('stroke', this.themes.gsTextColorHG.value);\n          tile.set('strokeWidth', 2);\n          tile.set('top', 0);\n          tile.set('left', 0);\n          tile.scaleToHeight(choiceSize);\n          tile.setCoords();\n          buttonGroup.push(tile);\n        });\n\n        // Knight button\n        pieceImage = this.pieceMap.get(move.color + 'N');\n        if (pieceImage) {\n          pieceImage.clone((obj: fabric.Group) => {\n            obj.set('originX', 'left');\n            obj.set('originY', 'top');\n            obj.set('top', 0);\n            obj.set('left', 0);\n            obj.scaleToHeight(choiceSize);\n            obj.setCoords();\n            buttonGroup.push(obj);\n          });\n        }\n        if (buttonGroup.length >= 2) {\n          this.knightButton = new fabric.Group(buttonGroup);\n          this.knightButton.set('originX', 'center');\n          this.knightButton.set('originY', 'center');\n          this.knightButton.set('top', y);\n          this.knightButton.set('left', x);\n          this.knightButton.set('selectable', true);\n          this.knightButton.set('lockMovementX', true);\n          this.knightButton.set('lockMovementY', true);\n          this.knightButton.set('lockRotation', true);\n          this.knightButton.set('lockScalingX', true);\n          this.knightButton.set('lockScalingY', true);\n          this.knightButton.set('lockUniScaling', true);\n          this.knightButton.set('hasControls', false);\n          this.knightButton.set('hasBorders', false);\n          this.knightButton.scaleToHeight(choiceSize);\n          this.knightButton.setCoords();\n          this.knightButton.on('selected', () => {\n            move.promotion = { role: 'N' };\n            this.performPromotion(move);\n          });\n        }\n        let buttonGroup2: fabric.Object[] = [];\n        // Bishop Button\n        x = this.size * 0.4;\n        tileToClone.tile?.clone((tile: fabric.Object) => {\n          tile.set('originX', 'left');\n          tile.set('originY', 'top');\n          tile.set('stroke', this.themes.gsTextColorHG.value);\n          tile.set('strokeWidth', 2);\n          tile.set('top', 0);\n          tile.set('left', 0);\n          tile.scaleToHeight(choiceSize);\n          tile.setCoords();\n          buttonGroup2.push(tile);\n        });\n        pieceImage = this.pieceMap.get(move.color + 'B');\n        if (pieceImage) {\n          pieceImage.clone((piece: fabric.Group) => {\n            piece.set('originX', 'left');\n            piece.set('originY', 'top');\n            piece.set('top', 0);\n            piece.set('left', 0);\n            piece.scaleToHeight(choiceSize);\n            piece.setCoords();\n            buttonGroup2.push(piece);\n          });\n        }\n        if (buttonGroup2.length >= 2) {\n          this.bishopButton = new fabric.Group(buttonGroup2);\n          this.bishopButton.set('originX', 'center');\n          this.bishopButton.set('originY', 'center');\n          this.bishopButton.set('top', y);\n          this.bishopButton.set('left', x);\n          this.bishopButton.set('selectable', true);\n          this.bishopButton.set('lockMovementX', true);\n          this.bishopButton.set('lockMovementY', true);\n          this.bishopButton.set('lockRotation', true);\n          this.bishopButton.set('lockScalingX', true);\n          this.bishopButton.set('lockScalingY', true);\n          this.bishopButton.set('lockUniScaling', true);\n          this.bishopButton.set('hasControls', false);\n          this.bishopButton.set('hasBorders', false);\n          this.bishopButton.scaleToHeight(choiceSize);\n          this.bishopButton.setCoords();\n          this.bishopButton.on('selected', () => {\n            move.promotion = { role: 'B' };\n            this.performPromotion(move);\n          });\n        }\n\n        // Rook Button\n        x = this.size * 0.595;\n        let buttonGroup3: fabric.Object[] = [];\n        tileToClone.tile?.clone((tile: fabric.Object) => {\n          tile.set('originX', 'left');\n          tile.set('originY', 'top');\n          tile.set('stroke', this.themes.gsTextColorHG.value);\n          tile.set('strokeWidth', 2);\n          tile.set('top', 0);\n          tile.set('left', 0);\n          tile.scaleToHeight(choiceSize);\n          tile.setCoords();\n          buttonGroup3.push(tile);\n        });\n        pieceImage = this.pieceMap.get(move.color + 'R');\n        if (pieceImage) {\n          pieceImage.clone((piece: fabric.Group) => {\n            piece.set('originX', 'left');\n            piece.set('originY', 'top');\n            piece.set('top', 0);\n            piece.set('left', 0);\n            piece.scaleToHeight(choiceSize);\n            piece.setCoords();\n            buttonGroup3.push(piece);\n          });\n        }\n        if (buttonGroup3.length >= 2) {\n          this.rookButton = new fabric.Group(buttonGroup3);\n          this.rookButton.set('originX', 'center');\n          this.rookButton.set('originY', 'center');\n          this.rookButton.set('top', y);\n          this.rookButton.set('left', x);\n          this.rookButton.set('selectable', true);\n          this.rookButton.set('lockMovementX', true);\n          this.rookButton.set('lockMovementY', true);\n          this.rookButton.set('lockRotation', true);\n          this.rookButton.set('lockScalingX', true);\n          this.rookButton.set('lockScalingY', true);\n          this.rookButton.set('lockUniScaling', true);\n          this.rookButton.set('hasControls', false);\n          this.rookButton.set('hasBorders', false);\n          this.rookButton.scaleToHeight(choiceSize);\n          this.rookButton.setCoords();\n          this.rookButton.on('selected', () => {\n            move.promotion = { role: 'R' };\n            this.performPromotion(move);\n          });\n        }\n        // Queen\n        x = this.size * 0.79;\n        let buttonGroup4: fabric.Object[] = [];\n        tileToClone.tile?.clone((tile: fabric.Object) => {\n          tile.set('originX', 'left');\n          tile.set('originY', 'top');\n          tile.set('stroke', this.themes.gsTextColorHG.value);\n          tile.set('strokeWidth', 2);\n          tile.set('top', 0);\n          tile.set('left', 0);\n          tile.scaleToHeight(choiceSize);\n          tile.setCoords();\n          buttonGroup4.push(tile);\n        });\n        pieceImage = this.pieceMap.get(move.color + 'Q');\n        if (pieceImage) {\n          pieceImage.clone((piece: fabric.Group) => {\n            piece.set('originX', 'left');\n            piece.set('originY', 'top');\n            piece.set('top', 0);\n            piece.set('left', 0);\n            piece.scaleToHeight(choiceSize);\n            piece.setCoords();\n            buttonGroup4.push(piece);\n          });\n        }\n        if (buttonGroup4.length >= 2) {\n          this.queenButton = new fabric.Group(buttonGroup4);\n          this.queenButton.set('originX', 'center');\n          this.queenButton.set('originY', 'center');\n          this.queenButton.set('top', y);\n          this.queenButton.set('left', x);\n          this.queenButton.set('selectable', true);\n          this.queenButton.set('lockMovementX', true);\n          this.queenButton.set('lockMovementY', true);\n          this.queenButton.set('lockRotation', true);\n          this.queenButton.set('lockScalingX', true);\n          this.queenButton.set('lockScalingY', true);\n          this.queenButton.set('lockUniScaling', true);\n          this.queenButton.set('hasControls', false);\n          this.queenButton.set('hasBorders', false);\n          this.queenButton.scaleToHeight(choiceSize);\n          this.queenButton.setCoords();\n          this.queenButton.on('selected', () => {\n            move.promotion = { role: 'Q' };\n            this.performPromotion(move);\n          });\n        }\n      }\n\n      this.promotionDialog = new fabric.Group(group, {\n        left: 0,\n        top: 0,\n        width: this.size,\n        height: this.size,\n      });\n\n      this.promotionDialog.set('lockMovementX', true);\n      this.promotionDialog.set('lockMovementY', true);\n      this.promotionDialog.set('lockRotation', true);\n      this.promotionDialog.set('lockScalingX', true);\n      this.promotionDialog.set('lockScalingY', true);\n      this.promotionDialog.set('lockUniScaling', true);\n      this.promotionDialog.set('hasControls', false);\n      this.promotionDialog.set('hasBorders', false);\n      this.promotionDialog.set('selectable', false);\n      this.promotionDialog.scaleToHeight(this.size);\n      this.promotionDialog.scaleToWidth(this.size);\n      this.canvas?.add(this.promotionDialog);\n      this.promotionDialog.moveTo(500);\n      if (this.knightButton) {\n        this.canvas?.add(this.knightButton);\n        this.knightButton.moveTo(510);\n      }\n      if (this.bishopButton) {\n        this.canvas?.add(this.bishopButton);\n        this.bishopButton.moveTo(510);\n      }\n      if (this.rookButton) {\n        this.canvas?.add(this.rookButton);\n        this.rookButton.moveTo(510);\n      }\n      if (this.queenButton) {\n        this.canvas?.add(this.queenButton);\n        this.queenButton.moveTo(510);\n      }\n      this.canvas?.requestRenderAll();\n    }\n  }\n\n  showPromotionDialog(move: ChessMove) {\n    if (!this.promotionDialog) {\n      const object = this.pieces[move.from].object;\n      if (object) {\n        object.set('lockMovementX', true);\n        object.set('lockMovementY', true);\n        object.set('selectable', false);\n      }\n      this.createPromotionDialog(move);\n      this.midPromotion = true;\n      return;\n    }\n  }\n\n  makeMove(move: ChessMove): void {\n    if (this.pieces[move.from]) {\n      const piece = this.pieces[move.from];\n      delete this.pieces[move.from];\n      delete this.tiles[move.from].piece;\n      if (piece.object) {\n        const row = Math.floor(move.to / 8);\n        const col = move.to % 8;\n        const tileSizeFragment = this.tileSize / 100;\n        const piecePadding = Math.ceil(tileSizeFragment * 3) + 1;\n        let xDest = 0;\n        let yDest = 0;\n        if (this.settings.orientation === 'white') {\n          xDest = (col * this.tileSize) + piecePadding;\n          yDest = ((7 - row) * this.tileSize) + piecePadding;\n        } else {\n          xDest = ((7 - col) * this.tileSize) + piecePadding;\n          yDest = (row * this.tileSize) + piecePadding;\n        }\n        this.startMoveAnimation(piece.object, xDest, yDest);\n        const to = row * 8 + col;\n        const capture = this.pieces[to];\n        if (capture) {\n          this.canvas?.remove(capture.object);\n        }\n        piece.tile = to;\n        this.pieces[to] = piece;\n        this.tiles[to].piece = { color: move.color, role: move.role };\n        if (move.castle) {\n          const rmove = new ChessMove();\n          rmove.to = move.castle.to;\n          rmove.from = move.castle.from;\n          rmove.color = move.color;\n          this.makeMove(rmove);\n        }\n      }\n    }\n    this.canvas?.requestRenderAll();\n  }\n  unMakeMove(move: ChessMove) {\n    if (this.pieces[move.to]) {\n      const piece = this.pieces[move.to];\n      delete this.pieces[move.to];\n      delete this.tiles[move.to].piece;\n      if (piece.object) {\n        const row = Math.floor(move.from / 8);\n        const col = move.from % 8;\n        const tileSizeFragment = this.tileSize / 100;\n        const piecePadding = Math.ceil(tileSizeFragment * 3) + 1;\n        let xDest = 0;\n        let yDest = 0;\n        if (this.settings.orientation === 'white') {\n          xDest = (col * this.tileSize) + piecePadding;\n          yDest = ((7 - row) * this.tileSize) + piecePadding;\n        } else {\n          xDest = ((7 - col) * this.tileSize) + piecePadding;\n          yDest = (row * this.tileSize) + piecePadding;\n        }\n        this.startMoveAnimation(piece.object, xDest, yDest);\n        const from = row * 8 + col;\n        const capture = move.capture;\n        if (capture) {\n          this.addPiece(move.to, capture.color, capture.role);\n        }\n        piece.tile = from;\n        this.pieces[from] = piece;\n        this.tiles[from].piece = { color: move.color, role: move.role };\n        piece.object.moveTo(10);\n        piece.object.setCoords();\n        this.promotionDialog?.moveTo(500);\n        if (move.castle) {\n          const rmove = new ChessMove();\n          rmove.to = move.castle.to;\n          rmove.from = move.castle.from;\n          rmove.color = move.color;\n          this.unMakeMove(rmove);\n        }\n      }\n    }\n    this.canvas?.requestRenderAll();\n  }\n\n  private resetMove(move: ChessMove): void {\n    const piece = this.pieces[move.from].object;\n    if (piece) {\n      const row = Math.floor(move.from / 8);\n      const col = move.from % 8;\n      const tileSizeFragment = this.tileSize / 100;\n      piece.scaleToHeight(Math.ceil(tileSizeFragment * 90));\n      const piecePadding = Math.ceil(tileSizeFragment * 3) + 1;\n      if (this.settings.orientation == 'white') {\n        piece.set('left', Math.floor(col * this.tileSize) + piecePadding);\n        piece.set('top', Math.floor((7 - row) * this.tileSize) + piecePadding);\n      } else {\n        piece.set('left', Math.floor((7 - col) * this.tileSize) + piecePadding);\n        piece.set('top', Math.floor(row * this.tileSize) + piecePadding);\n      }\n      piece.moveTo(10);\n      this.promotionDialog?.moveTo(500);\n      piece.setCoords();\n    }\n  }\n\n  // board API\n  public addPiece(tile: number, color: string, role: string) {\n    const col = tile % 8;\n    const row = Math.floor(tile / 8);\n    const padding = 1;\n    if (role && color) {\n      const pieceImage = this.pieceMap.get(color + role);\n      if (pieceImage) {\n        pieceImage.clone((pieceObject: fabric.Group) => {\n          pieceObject.set('lockRotation', true);\n          pieceObject.set('lockScalingX', true);\n          pieceObject.set('lockScalingY', true);\n          pieceObject.set('lockUniScaling', true);\n          pieceObject.set('hasControls', false);\n          pieceObject.set('hasBorders', false);\n          if (!this.interactive) {\n            pieceObject.set('lockMovementX', true);\n            pieceObject.set('lockMovementY', true);\n          } else {\n            pieceObject.hoverCursor = 'grab';\n            pieceObject.moveCursor = 'grabbing';\n          }\n          const tileSizeFragment = this.tileSize / 100;\n          pieceObject.scaleToHeight(Math.ceil(tileSizeFragment * 90));\n          const piecePadding = Math.ceil(tileSizeFragment * 3) + 1;\n          if (this.settings.orientation == 'white') {\n            pieceObject.set('left', Math.floor(col * this.tileSize) + piecePadding);\n            pieceObject.set('top', Math.floor((7 - row) * this.tileSize) + piecePadding);\n          } else {\n            pieceObject.set('left', Math.floor((7 - col) * this.tileSize) + piecePadding);\n            pieceObject.set('top', Math.floor(row * this.tileSize) + piecePadding);\n          }\n          pieceObject.setCoords();\n          this.pieces[tile] = { tile: tile, object: pieceObject };\n          if (!this.tiles[tile]) {\n            this.tiles[tile] = {};\n          }\n          // @ts-ignore\n          this.tiles[tile]['piece'] = { role, color } as Piece;\n          if (this.canvas) {\n            this.canvas?.add(pieceObject);\n            pieceObject.moveTo(10);\n          }\n        });\n      }\n    }\n  }\n\n  public removePiece(tile: number) {\n    const object = this.pieces[tile].object;\n    delete this.pieces[tile];\n    this.canvas?.remove(object);\n    delete this.tiles[tile].piece;\n  }\n\n\n  public isValidDrop(from: number, to: number): boolean {\n    if (this.olga.validGame()) {\n      const position = this.olga.getGame()?.getPosition();\n      const legal = position.isMoveLegal(SquareNames[from], SquareNames[to]);\n      return legal !== false;\n    }\n    return false;\n  }\n\n  private checkValidDrop(e: fabric.IEvent): void {\n    if (this.selectedPiece?.object) {\n      let x = 0;\n      let y = 0;\n      if (this.touching) {\n        const event = e.e as TouchEvent;\n        if (event.changedTouches.length) {\n          x = event.changedTouches[0].clientX;\n          y = event.changedTouches[0].clientY;\n        }\n        this.touching = false;\n      } else {\n        const event = e.e as MouseEvent;\n        x = event.x;\n        y = event.y;\n      }\n      let row = Math.ceil(y / this.tileSize) - 1;\n      let col = Math.ceil(x / this.tileSize) - 1;\n      if (this.settings.orientation == 'white') {\n        row = Math.ceil((this.size - y) / this.tileSize) - 1;\n      } else {\n        col = Math.ceil((this.size - x) / this.tileSize) - 1;\n      }\n      const tile = row * 8 + col;\n      const move = new ChessMove();\n      move.from = this.selectedPiece.tile;\n      move.to = tile;\n      const piece = this.tiles[move.from].piece;\n      if (piece) {\n        move.color = piece.color;\n        move.role = piece.role;\n      }\n      if (x < 0 || x > this.size || y > this.size || y < 0) {\n        this.resetMove(move);\n      } else {\n        if (\n          this.isValidDrop(this.selectedPiece.tile, tile) &&\n          this.olga.validGame() && this.olga.getGame()?.makeMove(move)\n        ) {\n          this.makeMove(move);\n        } else {\n          this.resetMove(move);\n        }\n      }\n      this.selectedPiece = null;\n    }\n  }\n\n  touchStart(event: TouchEvent): void {\n    if (event.touches.length) {\n      const point = event.touches[0];\n      let row = Math.ceil(point.clientY / this.tileSize) - 1;\n      let col = Math.ceil(point.clientX / this.tileSize) - 1;\n      if (this.settings.orientation == 'white') {\n        row = Math.ceil((this.size - point.clientY) / this.tileSize) - 1;\n      } else {\n        col = Math.ceil((this.size - point.clientX) / this.tileSize) - 1;\n      }\n      const tileIndex = row * 8 + col;\n      if (tileIndex >= 0 && tileIndex < 64) {\n        this.touching = true;\n        this.selectedPiece = this.pieces[tileIndex];\n        //this.highlightTile(tileIndex);\n      }\n    }\n  }\n\n  private selectPiece(e: fabric.IEvent): void {\n    let x = 0;\n    let y = 0;\n    const event = e.e as MouseEvent;\n    x = event.x;\n    y = event.y;\n    if (x === undefined || y === undefined) {\n      const event = e.e as TouchEvent;\n      if (event.touches.length) {\n        x = event.touches[0].clientX;\n        y = event.touches[0].clientY;\n      }\n    }\n    let row = Math.ceil(y / this.tileSize) - 1;\n    let col = Math.ceil(x / this.tileSize) - 1;\n    if (this.settings.orientation == 'white') {\n      row = Math.ceil((this.size - y) / this.tileSize) - 1;\n    } else {\n      col = Math.ceil((this.size - x) / this.tileSize) - 1;\n    }\n    const tileIndex = row * 8 + col;\n    if (tileIndex >= 0 && tileIndex < 64) {\n      this.selectedPiece = this.pieces[tileIndex];\n      //this.highlightTile(tileIndex);\n    } else {\n      this.canvas?.discardActiveObject();\n      this.selectedPiece = null;\n    }\n  }\n\n  private clearBoard(): void {\n    this.clearMaterial();\n    this.clearLabels();\n    this.tiles.forEach((tileData) => {\n      if (tileData && tileData.tile) {\n        this.canvas?.remove(tileData.tile);\n      }\n    });\n    this.tiles = [];\n    if (this.background) {\n      this.canvas?.remove(this.background);\n    }\n    if (this.tileGroup) {\n      this.canvas?.remove(this.tileGroup);\n    }\n  }\n\n  public clearMaterial(): void {\n    this.pieces.forEach((piece) => {\n      this.canvas?.remove(piece.object);\n    });\n    this.pieces = [];\n  }\n\n  public clearLabels(): void {\n    this.labels.forEach((value) => {\n      if (this.tileGroup) {\n        this.tileGroup.remove(value);\n      }\n    });\n    this.labels = [];\n  }\n\n  private connectMouseInput(): void {\n    if (this.canvas) {\n      this.canvas.on('object:moved', this.checkValidDrop.bind(this));\n      this.canvas.on('mouse:down', this.selectPiece.bind(this));\n    }\n  }\n  private createBoardObject(type: ObjectType, x: number, y: number, selectable = false, labelText = '', isDark?: boolean): fabric.Rect | fabric.Text | null {\n    let object: fabric.Object | null = null;\n    switch (type) {\n      case ObjectType.Label: {\n        object = new fabric.Text(labelText, {\n          fontSize: this.theme.labelFontSize, left: x, top: y, fontFamily: this.theme.labelFontFamily,\n          fontWeight: this.theme.labelFontWeight\n        }) as fabric.Object;\n\n        if (isDark !== undefined && isDark !== null) {\n          object.setColor(isDark ? this.themes.boardLabelDark.value : this.themes.boardLabelLight.value);\n        }\n        break;\n      }\n      case ObjectType.Tile: {\n        object = new fabric.Rect({\n          width: this.tileSize,\n          height: this.tileSize,\n        });\n        if (isDark !== undefined && isDark !== null) {\n          object.setColor(isDark ? this.themes.boardBGDark.value : this.themes.boardBGLight.value);\n        }\n        break;\n      }\n    }\n    if (object) {\n      object.set('left', x);\n      object.set('top', y);\n      object.set('lockRotation', true);\n      object.set('lockScalingX', true);\n      object.set('lockScalingY', true);\n      object.set('lockUniScaling', true);\n      object.set('hasControls', false);\n      object.set('hasBorders', false);\n      object.set('selectable', false);\n      object.set('lockMovementX', !selectable);\n      object.set('lockMovementY', !selectable);\n      object.set('selectable', selectable);\n      object.setCoords();\n    }\n    return object;\n  }\n\n  private generateBoardObjects(): void {\n    if (this.canvas) {\n      const tiles = [];\n      const labels = [];\n      const padding = 2;\n      let dark = false;\n      const size = this.tileSize * 8;\n      const background = new fabric.Rect({\n        // position from group center\n        left: 0,\n        top: 0,\n        width: size,\n        height: size,\n\n        stroke: 'black',\n        strokeWidth: 3,\n        fill: undefined\n      })\n      background.set('lockMovementX', true);\n      background.set('lockMovementY', true);\n      background.set('lockRotation', true);\n      background.set('lockScalingX', true);\n      background.set('lockScalingY', true);\n      background.set('lockUniScaling', true);\n      background.set('hasControls', false);\n      background.set('hasBorders', false);\n      background.set('selectable', false);\n      background.setCoords();\n      this.background = background;\n      for (let row = 7; row >= 0; row--) {\n        for (let col = 0; col < 8; col++) {\n          if (row % 2 === 0) {\n            // even row 0, 2, 4, 6\n            if (col % 2 === 0) {\n              dark = false;\n            } else {\n              dark = true;\n            }\n          } else {\n            // odd row 1, 3, 5, 7\n            if (col % 2 === 0) {\n              dark = true;\n            } else {\n              dark = false;\n            }\n          }\n          const tile = this.createBoardObject(ObjectType.Tile, col * this.tileSize + padding, row * this.tileSize + padding, true, '', dark);\n          if (tile) {\n            this.tiles.push({ tile });\n            tiles.push(tile);\n          }\n          if (this.showLabels) {\n            let labelText = '';\n            let rowText = '';\n            if (this.settings.orientation == 'white') {\n              labelText = SquareNames[((7 - row) * 8) + col][0];\n              rowText = (8 - row).toString();\n            } else {\n              labelText = SquareNames[(row * 8) + (7 - col)][0];\n              rowText = (row + 1).toString();\n            }\n            let x = 4 + padding;\n            let y = (row * this.tileSize) + 4;\n            if (col == 0) {\n              const file = this.createBoardObject(ObjectType.Label, x, y, false, rowText, !dark);\n              if (file) {\n                labels.push(file);\n                this.labels.push(file);\n              }\n            }\n            if (row == 7) {\n              const rank = this.createBoardObject(ObjectType.Label, ((this.tileSize * (col + 1)) - this.theme.labelFontSize / 2) - padding, size - this.theme.labelFontSize, false, labelText, !dark);\n              if (rank) {\n                labels.push(rank);\n                this.labels.push(rank);\n              }\n            }\n          }\n        }\n      }\n      let objects: (fabric.Rect | fabric.Text)[] = [];\n      objects = objects.concat(tiles, labels);\n      const tileGroup = new fabric.Group(objects, {\n        left: 0,\n        top: 0,\n      });\n      tileGroup.set('left', 0);\n      tileGroup.set('top', 0);\n      tileGroup.set('lockMovementX', true);\n      tileGroup.set('lockMovementY', true);\n      tileGroup.set('lockRotation', true);\n      tileGroup.set('lockScalingX', true);\n      tileGroup.set('lockScalingY', true);\n      tileGroup.set('hasControls', false);\n      tileGroup.set('hasBorders', false);\n      tileGroup.set('lock');\n      tileGroup.set('selectable', false);\n      tileGroup.set('originX', 'left');\n      tileGroup.set('originY', 'top');\n      this.canvas.add(background);\n      this.canvas.add(tileGroup);\n      this.tileGroup = tileGroup;\n      background.moveTo(-40);\n      tileGroup.moveTo(-30);\n      this.canvas.requestRenderAll();\n    }\n  }\n\n\n  private resizeBoardObjects(size: number): void {\n    if (!this.background) {\n      return;\n    }\n    this.tileSize = Math.floor(this.size / 8);\n    this.background.scaleToHeight((this.tileSize * 8) - 1);\n    this.background.scaleToWidth((this.tileSize * 8) - 1);\n    if (this.tileGroup) {\n      this.tileGroup.set('top', 0);\n      this.tileGroup.set('left', 0);\n      this.tileGroup.scaleToHeight(this.tileSize * 8);\n      this.tileGroup.scaleToWidth(this.tileSize * 8);\n      this.tileGroup.moveTo(-300);\n      this.tileGroup.setCoords();\n    }\n    this.pieces.forEach((pieceData) => {\n      const piece = pieceData.object;\n      if (piece.left !== undefined && piece.top !== undefined && this.canvas) {\n        const row = Math.floor(pieceData.tile / 8);\n        const col = pieceData.tile % 8;\n        const tileSizeFragment = this.tileSize / 100;\n        piece.scaleToHeight(Math.ceil(tileSizeFragment * 90));\n        const piecePadding = Math.ceil(tileSizeFragment * 3) + 1;\n        if (this.settings.orientation == 'white') {\n          piece.set('left', Math.floor(col * this.tileSize) + piecePadding);\n          piece.set('top', Math.floor((7 - row) * this.tileSize) + piecePadding);\n        } else {\n          piece.set('left', Math.floor((7 - col) * this.tileSize) + piecePadding);\n          piece.set('top', Math.floor(row * this.tileSize) + piecePadding);\n        }\n        piece.moveTo(10);\n        piece.setCoords();\n      }\n    });\n    if (this.promotionDialog) {\n      this.promotionDialog.scaleToHeight(this.size);\n      this.promotionDialog.scaleToWidth(this.size);\n      this.promotionDialog?.moveTo(500);\n\n      // knight\n      let y = this.size * 0.67 + 4;\n      let x = this.size * 0.205;\n      this.knightButton?.scaleToHeight(this.size * 0.15);\n      this.knightButton?.scaleToWidth(this.size * 0.15);\n      this.knightButton?.set('left', x);\n      this.knightButton?.set('top', y);\n      this.knightButton?.moveTo(510);\n      this.knightButton?.setCoords();\n      // bishop\n\n      x = this.size * 0.4;\n      this.bishopButton?.scaleToHeight(this.size * 0.15);\n      this.bishopButton?.scaleToWidth(this.size * 0.15);\n      this.bishopButton?.set('left', x);\n      this.bishopButton?.set('top', y);\n      this.bishopButton?.moveTo(510);\n      this.bishopButton?.setCoords();\n      // rook\n\n      x = this.size * 0.595;\n      this.rookButton?.scaleToHeight(this.size * 0.15);\n      this.rookButton?.scaleToWidth(this.size * 0.15);\n      this.rookButton?.set('left', x);\n      this.rookButton?.set('top', y);\n      this.rookButton?.moveTo(510);\n      this.rookButton?.setCoords();\n      // queen\n\n      x = this.size * 0.79;\n      this.queenButton?.scaleToHeight(this.size * 0.15);\n      this.queenButton?.scaleToWidth(this.size * 0.15);\n      this.queenButton?.set('left', x);\n      this.queenButton?.set('top', y);\n      this.queenButton?.moveTo(510);\n      this.queenButton?.setCoords();\n    }\n  }\n\n  public getPieceAnimation(): Coordinate {\n    let x = 0;\n    let y = 0;\n\n    return { x, y } as Coordinate;\n  }\n\n  public updatePieceAnimation(x: number, y: number): void {\n\n  }\n\n  setDarkTile(color: string): void {\n    if (this.tiles.length != 0 && this.theme) {\n      for (let index = 0; index < 64; index++) {\n        const row = Math.floor(index / 8);\n        if (row % 2 === 0) {\n          if (index % 2 === 0) {\n            const tile = this.tiles[index].tile;\n            if (tile) {\n              tile.set('fill', color);\n            }\n          }\n        } else {\n          if (index % 2 !== 0) {\n            const tile = this.tiles[index].tile;\n            if (tile) {\n              tile.set('fill', color);\n            }\n          }\n        }\n      }\n      if (this.labels.length) {\n        this.labels.forEach((label: fabric.Object) => {\n          // @ts-ignore\n          if (label && label.get('fill') === this.theme.tileDark) {\n            label.setColor(color);\n          }\n        });\n      }\n      this.theme.tileDark = color;\n      this.canvas?.requestRenderAll();\n    }\n  }\n\n  public setLightTile(color: string): void {\n    if (this.tiles.length != 0 && this.theme) {\n      for (let index = 0; index < 64; index++) {\n        const row = Math.floor(index / 8);\n        if (row % 2 !== 0) {\n          if (index % 2 === 0) {\n            const tile = this.tiles[index].tile;\n            if (tile) {\n              tile.set('fill', color);\n            }\n          }\n        } else {\n          if (index % 2 !== 0) {\n            const tile = this.tiles[index].tile;\n            if (tile) {\n              tile.set('fill', color);\n            }\n          }\n        }\n      }\n      if (this.labels.length) {\n        this.labels.forEach((label: fabric.Object) => {\n          // @ts-ignore\n          if (label && label.get('fill') === this.theme.tileLight) {\n            label.setColor(color);\n          }\n        });\n      }\n      this.theme.tileLight = color;\n      this.canvas?.requestRenderAll();\n    }\n\n  }\n\n  public setSize(size: number): void {\n    if (this.canvas) {\n      this.size = size;\n      this.tileSize = Math.floor(size / 8);\n      this.canvas.width = size;\n      this.canvas.height = size;\n      if (this.container) {\n        this.container.style.height = size + 'px';\n        this.container.style.width = size + 'px';\n      }\n      this.canvas.setDimensions({\n        width: size,\n        height: size,\n      });\n      this.resizeBoardObjects(size);\n      this.canvas.requestRenderAll();\n    }\n  }\n\n  public setInteractive(interactive: boolean): void {\n    if (interactive) {\n      if (this.canvas) {\n      }\n    } else {\n      if (this.canvas) {\n      }\n    }\n  }\n\n  public setBoardToPosition(position: any): void {\n    this.clearMaterial();\n    if (position) {\n      for (let index = 0; index < 64; ++index) {\n        const squareData = position.square(SquareNames[index]);\n        // get the first and last of the role and color\n        if (squareData.length >= 2) {\n          this.addPiece(index, squareData[0], squareData[1].toUpperCase());\n        }\n      }\n    }\n  }\n\n  public requestRedraw(): void {\n    this.clearBoard();\n    this.generateBoard();\n  }\n\n  public show(): void {\n    if (this.boardCanvas) {\n      this.boardCanvas.nativeElement.style.visibility = 'visible';\n    }\n  }\n  public hide(): void {\n    if (this.boardCanvas) {\n      this.boardCanvas.nativeElement.style.visibility = 'hidden';\n    }\n  }\n}\n","<canvas #boardCanvas [style.z-index]=\"2\" resize>\n</canvas>","export const SquareNames = [\r\n    'a1',\r\n    'b1',\r\n    'c1',\r\n    'd1',\r\n    'e1',\r\n    'f1',\r\n    'g1',\r\n    'h1',\r\n    'a2',\r\n    'b2',\r\n    'c2',\r\n    'd2',\r\n    'e2',\r\n    'f2',\r\n    'g2',\r\n    'h2',\r\n    'a3',\r\n    'b3',\r\n    'c3',\r\n    'd3',\r\n    'e3',\r\n    'f3',\r\n    'g3',\r\n    'h3',\r\n    'a4',\r\n    'b4',\r\n    'c4',\r\n    'd4',\r\n    'e4',\r\n    'f4',\r\n    'g4',\r\n    'h4',\r\n    'a5',\r\n    'b5',\r\n    'c5',\r\n    'd5',\r\n    'e5',\r\n    'f5',\r\n    'g5',\r\n    'h5',\r\n    'a6',\r\n    'b6',\r\n    'c6',\r\n    'd6',\r\n    'e6',\r\n    'f6',\r\n    'g6',\r\n    'h6',\r\n    'a7',\r\n    'b7',\r\n    'c7',\r\n    'd7',\r\n    'e7',\r\n    'f7',\r\n    'g7',\r\n    'h7',\r\n    'a8',\r\n    'b8',\r\n    'c8',\r\n    'd8',\r\n    'e8',\r\n    'f8',\r\n    'g8',\r\n    'h8',\r\n  ];\r\n  \r\n  export interface Piece {\r\n    role: string;\r\n    color: string;\r\n    promoted?: boolean;\r\n  }\r\n  \r\n  export class BoardTheme {\r\n    constructor(\r\n      public tileLight: string = '',\r\n      public tileDark: string = '',\r\n      public pieceSet: string = '',\r\n      public isSpriteSheet = false,\r\n      public fileExtension = '.svg',\r\n      public labelFontSize = 14,\r\n      public labelFontFamily = 'Cambria',\r\n      public labelFontWeight = 'bold'\r\n    ) { }\r\n  }\r\n  \r\n  export type Color = 'white' | 'black';\r\n  \r\n  export class BoardSettings {\r\n    orientation: Color = 'white';\r\n  }\r\n  \r\n  export enum LabelState {\r\n    NoLabels = 0,\r\n    LeftBottom = 1,\r\n    RightBottom = 2,\r\n    LeftTop = 4,\r\n    RightTop = 8,\r\n  }\r\n  ","\r\n//@ts-ignore\r\nimport { isMoveDescriptor, Game as KGame, Variation as KVariation, MoveDescriptor, Node as KNode, Position as KPosition, pgnRead, Database as KDatabase } from 'kokopu';\r\nimport { SquareNames } from '../canvas-chessboard/types';\r\n\r\nexport class GameScoreItem {\r\n    type = 0;\r\n    move: KNode | null = null;\r\n    constructor(\r\n        move?: KNode\r\n    ) {\r\n        this.move = move;\r\n    }\r\n    addType(type: GameScoreType): void {\r\n        this.type |= type;\r\n    }\r\n    removeType(type: GameScoreType): void {\r\n        this.type ^= type;\r\n    }\r\n    getType(previous: GameScoreItem | null = null): number {\r\n        if (this.move && this.move.variations) {\r\n            let variations = this.move.variations();\r\n            if (previous) {\r\n                if (previous.move.moveColor() == 'w') {\r\n                    this.type |= GameScoreType.HalfPly;\r\n                    if (!previous.move.comment()) {\r\n                        this.type |= GameScoreType.Group;\r\n                    }\r\n                }\r\n            }\r\n            if (variations && variations.length > 0) {\r\n                this.type |= GameScoreType.Variation;\r\n            } else if (this.move.comment()) {\r\n                this.type |= GameScoreType.Annotation;\r\n            } else {\r\n                let comment = null;\r\n                if (previous && previous.move) {\r\n                    comment = previous.move.comment();\r\n                }\r\n                if ((!previous && this.move.moveColor() == 'w') || !comment) {\r\n                    this.type |= GameScoreType.Group;\r\n                }\r\n            }\r\n        }\r\n        return this.type;\r\n    }\r\n    setSelected(select = true): void {\r\n        if (select) {\r\n            this.type = this.type | GameScoreType.Selected;\r\n        } else {\r\n            this.type = this.type ^ GameScoreType.Selected;\r\n        }\r\n    }\r\n    isBranched(): boolean {\r\n        return ((this.type & GameScoreType.Branched) == GameScoreType.Branched);\r\n    }\r\n}\r\n\r\nexport class ChessMove {\r\n    to: number = 0;\r\n    from: number = 0;\r\n    role: string = '';\r\n    color: string = '';\r\n    capture?: { role: string; color: string };\r\n    promotion?: { role: string };\r\n    castle?: { type: string, to: number, from: number };\r\n    promoteFunction?: any;\r\n    static fromNode(node: KNode, descriptor: MoveDescriptor = null): ChessMove | null {\r\n        if (!node || !node._info) {\r\n            return null;\r\n        }\r\n        const move = new ChessMove();\r\n        if (descriptor == null) {\r\n            if (isMoveDescriptor(node._info.moveDescriptor)) {\r\n                descriptor = node._info.moveDescriptor;\r\n            } else {\r\n                descriptor = node.positionBefore().notation(node._info.moveDescriptor);\r\n            }\r\n        }\r\n        if (descriptor) {\r\n            move.from = SquareNames.indexOf(descriptor.from());\r\n            move.to = SquareNames.indexOf(descriptor.to());\r\n            if (descriptor.isCapture()) {\r\n                move.capture = { role: descriptor.capturedPiece().toUpperCase(), color: descriptor.capturedColoredPiece()[0] };\r\n            }\r\n            if (descriptor.isCastling()) {\r\n                move.castle = { type: node.notation(), to: SquareNames.indexOf(descriptor.rookTo()), from: SquareNames.indexOf(descriptor.rookFrom()) };\r\n            }\r\n            if (descriptor.isPromotion()) {\r\n                move.promotion = { role: descriptor.promotion() };\r\n            }\r\n            return move;\r\n        }\r\n        return null;\r\n    }\r\n    compareMoveToNode(node: KNode): boolean {\r\n        const mDescriptor = node._info.moveDescriptor;\r\n        if (mDescriptor) {\r\n            return (this.to === SquareNames.indexOf(mDescriptor.to()) && this.from === SquareNames.indexOf(mDescriptor.from()));\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexport type GameScorePath = { active: number, paths: GameScoreItem[] };\r\nexport type Traversal = { right: number, down: number };\r\nexport class ChessGame {\r\n    protected position: KPosition | null = null;\r\n    protected scorePath: Array<Traversal> = [];\r\n    protected startNode: KNode | null = null;\r\n    protected currentNode: KNode | null = null;\r\n    protected lastNode: KNode | null = null;\r\n    protected currentIndex = 0;\r\n    protected static compareKNode(left: KNode, right: KNode): boolean {\r\n        if (left !== null &&\r\n            right !== null &&\r\n            left !== undefined &&\r\n            right !== undefined) {\r\n            const leftMove = left._info.moveDescriptor;\r\n            const rightMove = right._info.moveDescriptor;\r\n            return (\r\n                leftMove.from() === rightMove.from() && leftMove.to() === rightMove.to()\r\n            );\r\n        }\r\n        return false;\r\n    }\r\n\r\n    protected static compareVariation(\r\n        left: KVariation,\r\n        right: KVariation\r\n    ): boolean {\r\n        if (left !== null &&\r\n            right !== null &&\r\n            left !== undefined &&\r\n            right !== undefined) {\r\n            if (ChessGame.compareKNode(left.first(), right.first())) {\r\n                return (\r\n                    left.comment() === right.comment() &&\r\n                    left.initialFullMoveNumber() === right.initialFullMoveNumber()\r\n                );\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    static parsePGN(olga: any, pgn: string): ChessGame[] {\r\n        const games = [];\r\n        const state = pgnRead(pgn) as KDatabase;\r\n        if (state) {\r\n            const gameCount = state.gameCount();\r\n            for (let index = 0; index < gameCount; ++index) {\r\n                games.push(new ChessGame(olga, state.game(index)));\r\n            }\r\n        }\r\n        return games;\r\n    }\r\n    static isMoveDescriptor(move: any): boolean {\r\n        return isMoveDescriptor(move);\r\n    }\r\n    protected getLastNode(): KNode {\r\n        let node = this.currentNode;\r\n        while (node && node.next()) {\r\n            node = node.next();\r\n        }\r\n        return node;\r\n    }\r\n\r\n    protected setNode(node: KNode) {\r\n        this.position = node.position();\r\n        this.currentNode = node.next();\r\n        this.lastNode = this.getLastNode();\r\n        if (!this.currentNode) {\r\n            this.currentNode = this.lastNode;\r\n        }\r\n        this.olga.redrawBoard();\r\n        this.olga.updateStatus(this.position.turn(), node);\r\n    }\r\n\r\n    protected addNextMove(notation: string): void {\r\n        this.currentNode = this.currentNode.play(notation);\r\n        this.olga.gameScoreItemsChanged(this.generateGameScore());\r\n    }\r\n\r\n    public getMoveNotation(node: KNode): string {\r\n        if (isMoveDescriptor(node._info.moveDescriptor)) {\r\n            return node.notation();\r\n        }\r\n        const positionBefore = node.positionBefore();\r\n        if (positionBefore) {\r\n            return node._info.moveDescriptor\r\n        }\r\n        return '';\r\n    }\r\n    public onVariant(): boolean {\r\n        this.scorePath.forEach((traversal: Traversal) => {\r\n            if (traversal.down > 0) {\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        return false;\r\n    }\r\n\r\n    public performPromotion(move: ChessMove) {\r\n        if (move.promotion && move.promoteFunction) {\r\n            const moveDesc = move.promoteFunction(move.promotion.role.toLowerCase());\r\n            if (this.position.play(moveDesc)) {\r\n                const node = this.currentNode.play(moveDesc);\r\n                if (!this.lastNode || this.lastNode == this.currentNode) {\r\n                    this.lastNode = node;\r\n                }\r\n                if (!this.startNode) {\r\n                    this.startNode = node;\r\n                }\r\n                this.currentNode = node;\r\n                this.currentNode._info.moveDescriptor = moveDesc;\r\n            }\r\n        }\r\n    }\r\n\r\n    constructor(protected olga: any, public game?: KGame) {\r\n        if (game) {\r\n            this.setGame(this.game);\r\n        }\r\n    }\r\n\r\n    public getPosition(): KPosition | null {\r\n        return this.position;\r\n    }\r\n\r\n    protected generateRootScore(): GameScoreItem[] {\r\n        const items = Array<GameScoreItem>();\r\n        const variation = this.game.mainVariation();\r\n        let node = variation.first();\r\n        let previous = null;\r\n        let gItem = null;\r\n        while (node) {\r\n            gItem = new GameScoreItem(node);\r\n            gItem.getType(previous);\r\n            items.push(gItem);\r\n            previous = gItem;\r\n            node = node.next();\r\n        }\r\n        return items;\r\n    }\r\n\r\n    public generateHeaderData(): Map<string, string> {\r\n        let map = new Map<string, string>();\r\n        if (this.game) {\r\n            map.set('Event', this.game.event());\r\n            const date = this.game.date();\r\n            if (date) {\r\n                let dateString = '';\r\n                if (date.toDateString) {\r\n                    dateString = date.toDateString();\r\n                } else {\r\n                    if (date.month) {\r\n                        dateString += date.month;\r\n                    }\r\n                    if (date.year) {\r\n                        if (dateString.length > 0) {\r\n                            dateString += ' of ';\r\n                        }\r\n                        dateString += date.year;\r\n                    }\r\n                }\r\n                if (dateString.length == 0) {\r\n                    if (date.toString) {\r\n                        dateString = date.toString();\r\n                    }\r\n                }\r\n                map.set('Event Date', dateString);\r\n            }\r\n            map.set('White', this.game.playerName('w'));\r\n            map.set('Black', this.game.playerName('b'));\r\n            let elo = this.game.playerElo('w');\r\n            if (elo != '?') {\r\n                map.set('White Elo', elo);\r\n            }\r\n            elo = this.game.playerElo('b');\r\n            if (elo !== '?') {\r\n                map.set('Black Elo', elo);\r\n            }\r\n            map.set('Site', this.game.site());\r\n            map.set('Round', this.game.round());\r\n            map.set('Result', this.game.result());\r\n\r\n            let variant = this.game.variant();\r\n            if (variant === 'regular') {\r\n                variant = \"Chess\";\r\n            } else {\r\n                variant = \"Chess960\"\r\n            }\r\n            map.set('Variant', variant);\r\n        }\r\n        return map;\r\n    }\r\n\r\n    public generateGameScore(): GameScoreItem[] {\r\n        let items = Array<GameScoreItem>();\r\n        let gItem = null;\r\n        let previous = null;\r\n        const traversals = this.scorePath.length;\r\n        let current = this.startNode;\r\n        if (traversals == 0) {\r\n            items = this.generateRootScore();\r\n            return items;\r\n        }\r\n        for (let index = 0; index < traversals; ++index) {\r\n            const traversal = this.scorePath[index] as Traversal;\r\n            for (let j = 0; j < traversal.right; ++j) {\r\n                gItem = new GameScoreItem(current);\r\n                gItem.getType(previous);\r\n                items.push(gItem);\r\n                previous = gItem;\r\n                current = current.next();\r\n            }\r\n            if (traversal.down > 0) {\r\n                const variations = current.variations() as KVariation[];\r\n                if (variations.length > (traversal.down - 1)) {\r\n                    const variation = variations[traversal.down - 1];\r\n                    current = variation.first();\r\n                    console.log('Branching at ' + current.notation());\r\n                    gItem = new GameScoreItem(current);\r\n                    gItem.getType(previous);\r\n                    items.push(gItem);\r\n                    previous = gItem;\r\n                    current = current.next();\r\n                }\r\n            }\r\n        }\r\n        while (current) {\r\n            gItem = new GameScoreItem(current);\r\n            gItem.getType(previous);\r\n            items.push(gItem);\r\n            previous = gItem;\r\n            current = current.next();\r\n        }\r\n        if (items.length > 0) {\r\n            this.lastNode = items[items.length - 1].move;\r\n        }\r\n        return items;\r\n    }\r\n\r\n    setGame(game: KGame): void {\r\n        this.game = game;\r\n        let variation = this.game.mainVariation() as KVariation;\r\n        this.startNode = variation.first();\r\n        this.position = variation.initialPosition() as KPosition;\r\n        this.currentNode = null;\r\n        this.olga.redrawBoard();\r\n    }\r\n\r\n\r\n    public moveToPrevious(previousNode: KNode, current: KNode): ChessMove | null {\r\n        if (this.currentNode) {\r\n            const previousPosition = this.currentNode.positionBefore();\r\n            if (previousPosition && this.currentNode) {\r\n                const moveToBeUndone = ChessMove.fromNode(this.currentNode) as ChessMove;\r\n                this.olga.updateStatus(this.position.turn(), previousNode);\r\n                return moveToBeUndone;\r\n            }\r\n            this.position = previousPosition;\r\n            this.currentNode = previousNode;\r\n            --this.currentIndex;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public isGameOver(): boolean {\r\n        return (this.position.isLegal() && this.position.moves().length == 0);\r\n    }\r\n\r\n    public play(next: KNode): boolean {\r\n        if (this.position.play(next._info.moveDescriptor)) {\r\n            this.currentNode = next;\r\n            this.olga.updateStatus(this.position.turn(), next);\r\n            ++this.currentIndex;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    public unPlay(current: KNode, previous: KNode): boolean {\r\n        if (previous) {\r\n            this.position = previous.position();\r\n            this.currentNode = previous;\r\n            --this.currentIndex;\r\n            this.olga.updateStatus(this.position.turn(), previous);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public createVariation(move: MoveDescriptor | string): boolean {\r\n        if (this.currentNode) {\r\n            const variationsBefore = this.currentNode.variations();\r\n            const variation = this.currentNode.addVariation(false);\r\n            this.currentNode = variation.play(move);\r\n            this.position = this.currentNode.position();\r\n            this.scorePath.push({ right: this.currentIndex, down: variationsBefore.length + 1 });\r\n            this.currentIndex = 0;\r\n            this.olga.updateStatus(this.position.turn(), this.currentNode, move);\r\n            // tell it to restore gamescore\r\n            this.olga.gameScoreItemsChanged(this.generateGameScore());\r\n            this.olga.incrementGameScoreSelection();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public addMoveToEnd(move: MoveDescriptor): boolean {\r\n        if (this.currentNode && this.position.play(move)) {\r\n            const next = this.currentNode.play(move);\r\n            this.currentNode = next;\r\n            this.position = this.currentNode.position();\r\n            this.olga.updateStatus(this.position.turn(), this.currentNode);\r\n            // tell it to restore gamescore\r\n            this.olga.gameScoreItemsChanged([]);\r\n            this.olga.gameScoreItemsChanged(this.generateGameScore());\r\n            this.olga.incrementGameScoreSelection();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public makeVariantMove(index: number, node: KNode, updateBoard = false): boolean {\r\n        const variations = node.variations();\r\n        if (index >= 0 && index < variations.length) {\r\n            const variation = variations[index];\r\n            this.currentNode = variation.first();\r\n            this.position = this.currentNode.position();\r\n            this.olga.updateStatus(this.position.turn(), this.currentNode);\r\n            this.scorePath.push({ right: this.currentIndex, down: index + 1 });\r\n            this.currentIndex = 0;\r\n            if (updateBoard) {\r\n                this.olga.makeBoardMove(ChessMove.fromNode(this.currentNode));\r\n            }\r\n            this.olga.updateStatus(this.position.turn(), this.currentNode);\r\n            // tell it to restore gamescore\r\n            this.olga.gameScoreItemsChanged(this.generateGameScore());\r\n            this.olga.incrementGameScoreSelection();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public makeMoveOrVariation(nextMove: KNode, moveToBeMade: ChessMove, legalMove: MoveDescriptor | string): boolean {\r\n        let valid = false;\r\n        if (nextMove && moveToBeMade.compareMoveToNode(nextMove)) {\r\n            valid = this.position.play(legalMove);\r\n            this.olga.incrementGameScoreSelection();\r\n            this.currentNode = nextMove;\r\n            ++this.currentIndex;\r\n        } else {\r\n            // search through all the variant moves, if\r\n            if (nextMove) {\r\n                const variations = nextMove.variations();\r\n                for (let index = 1; index <= variations.length; ++index) {\r\n                    const variation = variations[index - 1];\r\n                    const variantMove = variation.first();\r\n                    if (moveToBeMade.compareMoveToNode(variantMove)) {\r\n                        return this.makeVariantMove(index - 1, nextMove);\r\n                    }\r\n                }\r\n            }\r\n            // move is new, createVariant\r\n            return this.createVariation(legalMove);\r\n\r\n        }\r\n        return valid;\r\n    }\r\n\r\n    public makeMove(move: ChessMove): boolean {\r\n        // Valid move of current variation (continue main variation)\r\n        // Move of a separate Variation that exists (move to that variation)\r\n        // at the end of variation but game isnt over ( Create New Move)\r\n        // move of separate variation that does not exist ( Create Move/Variation)  \r\n\r\n\r\n        const legal = this.position.isMoveLegal(SquareNames[move.from], SquareNames[move.to]);\r\n        let lastNode = null;\r\n        if (legal) {\r\n            if (legal.status == 'promotion') {\r\n                move.promoteFunction = legal;\r\n                this.olga.showPromotionDialog(move);\r\n                return true;\r\n            }\r\n            const legalMove = legal();\r\n            if (this.currentNode == null) {\r\n                this.currentNode = this.startNode;\r\n                return this.makeMoveOrVariation(this.currentNode, move, legalMove);\r\n            }\r\n            const nextMove = this.currentNode.next();\r\n            if (!nextMove) {\r\n                return this.addMoveToEnd(legalMove);\r\n            }\r\n            console.log(\"Next Move ->\" + nextMove.notation());\r\n            lastNode = this.currentNode;\r\n            return this.makeMoveOrVariation(nextMove, move, legalMove);\r\n\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    public resetEngine(): void {\r\n        this.position = this.game.initialPosition();\r\n        this.currentNode = null;\r\n        this.olga.updateStatus(this.position.turn());\r\n    }\r\n}\r\n\r\nexport enum GameScoreType {\r\n    HalfPly = 1,\r\n    Group = 2,\r\n    Variation = 4,\r\n    Annotation = 8,\r\n    Selected = 16,\r\n    Branched = 32\r\n}\r\n\r\n","import { AfterViewInit, Component, Input, OnInit } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n@Component({\n  selector: 'toggle-switch',\n  templateUrl: './toggle-switch.component.html',\n  styleUrls: ['./toggle-switch.component.scss']\n})\nexport class ToggleSwitchComponent implements OnInit {\n  @Input() value: BehaviorSubject<boolean> | null = null;\n  @Input() off:string = '';\n  @Input() on:string = '';\n  public toggled: boolean = false;\n  constructor() { }\n\n  ngOnInit(): void {\n    if(this.value) {\n      this.toggled = this.value.value;\n      this.value.subscribe((state)=>{this.toggled = state;});\n    }\n  }\n\n  toggle(): void {\n    if(this.value) {\n      this.value.next(!this.value.value);\n    }\n  }\n\n}\n","<div class=\"switch\" (click)=\"toggle()\">\n  <div class=\"off\">{{off}}</div>\n  <div [ngClass]=\"toggled ? 'bar-selected':'bar'\"></div>\n  <div [ngClass]=\"toggled ? 'ball-selected':'ball'\"></div>\n  <div class=\"on\">{{on}}</div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'value-slider',\n  templateUrl: './value-slider.component.html',\n  styleUrls: ['./value-slider.component.scss']\n})\nexport class ValueSliderComponent implements OnInit {\n  @Input() max:number = 100;\n  @Input() minimum:number = 0;\n  @Input() step:number = 1;\n  @Input() value: number = 50;\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<input type=\"range\" [step]=\"step\" [min]=\"minimum\" [max]=\"max\" [value]=\"value\" class=\"olga-slider\" #inputElement>\n","import { Component, OnInit, Output } from '@angular/core';\nimport { OlgaService, ScoreViewType } from '../services/olga.service';\nimport { LayoutService } from '../services/layout.service';\n\n@Component({\n  selector: 'olga-controls',\n  templateUrl: './olga-controls.component.html',\n  styleUrls: ['./olga-controls.component.scss']\n})\n\nexport class OlgaControlsComponent implements OnInit {\n\n  constructor(public olga: OlgaService, public layout: LayoutService) { }\n  public playing = false\n  public timeLeft = 0.6;\n  ScoreViewType = ScoreViewType;\n  ngOnInit(): void {\n  }\n\n  public resize(width: number, height: number) {\n\n  }\n\n  advance(event: MouseEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.olga.advance();\n  }\n\n  moveToStart(event: MouseEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.olga.moveToStart();\n  }\n\n  previous(event: MouseEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.olga.previous();\n  }\n\n  moveToEnd(event: MouseEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.olga.moveToEnd();\n  }\n\n  toggleAutoPlay(): void {\n    this.olga.toggleAutoPlay();\n  }\n  public setTimer(time: number) {\n    this.timeLeft = time / 1000;\n  }\n}\n","<div class=\"action-container\" #actContainerElement>\n        <div (click)=\"toggleAutoPlay()\" class=\"play\" #playElement>\n                <svg class=\"feather-play\">\n                        <use [ngStyle]=\"{'visibility': playing ? 'visible':'hidden'}\"\n                                xlink:href=\"assets/images/feather-sprite.svg#pause\" />\n                        <use [ngStyle]=\"{'visibility': !playing ? 'visible':'hidden'}\"\n                                xlink:href=\"assets/images/feather-sprite.svg#play\" />\n                </svg>\n                <div class=\"timer\">{{timeLeft}}</div>\n        </div>\n        <div (click)=\"olga.rotateBoardOrientation()\" class=\"view\" #rotateElement>\n                <svg class=\"feather\">\n                        <use xlink:href=\"assets/images/feather-sprite.svg#refresh-cw\" />\n                </svg>\n        </div>\n        <div (click)=\"olga.toggleScoreType()\" class=\"settings\" #settingsElement>\n                <svg class=\"feather-play\">\n                        <use [ngStyle]=\"{'visibility': (olga.scoreViewType.value === ScoreViewType.Flow) ? 'visible':'hidden'}\"\n                                xlink:href=\"assets/images/feather-sprite.svg#align-justify\" />\n                        <use [ngStyle]=\"{'visibility': (olga.scoreViewType.value === ScoreViewType.Table) ? 'visible':'hidden'}\"\n                                xlink:href=\"assets/images/feather-sprite.svg#align-left\" />\n                </svg>\n        </div>\n        <div (click)=\"layout.shrink()\" class=\"shrink\" #shrinkElement>\n                <svg class=\"feather\">\n                        <use xlink:href=\"assets/images/feather-sprite.svg#minus\" />\n                </svg>\n        </div>\n\n        <div (click)=\"layout.grow()\" class=\"grow\" #growElement>\n                <svg class=\"feather\">\n                        <use xlink:href=\"assets/images/feather-sprite.svg#plus\" />\n                </svg>\n        </div>\n\n</div>\n<div class=\"navigation-container\" #navContainerElement>\n        <div (click)=\"moveToStart($event);\" class=\"button start\"><svg class=\"feather\" #homeElement>\n                        <use xlink:href=\"assets/images/feather-sprite.svg#rewind\" />\n                </svg></div>\n        <div (click)=\"previous($event);\" class=\"button previous\"><svg class=\"feather\" #previousElement>\n                        <use xlink:href=\"assets/images/feather-sprite.svg#chevron-left\" />\n                </svg></div>\n        <div (click)=\"advance($event);\" class=\"button next\"><svg class=\"feather\" #nextElement>\n                        <use xlink:href=\"assets/images/feather-sprite.svg#chevron-right\" />\n                </svg></div>\n        <div (click)=\"moveToEnd($event);\" class=\"button end\"><svg class=\"feather\" #endElement>\n                        <use xlink:href=\"assets/images/feather-sprite.svg#fast-forward\" />\n                </svg></div>\n</div>","import { Component, ElementRef, Input, OnInit, Output, Renderer2, ViewChild } from '@angular/core';\nimport { environment } from '../../environments/environment';\nimport { GamescoreUxComponent } from '../olga-score/olga-score.component';\nimport { LayoutService } from '../services/layout.service';\nimport { STOCK_IMAGE, PlayerData, OlgaService } from '../services/olga.service';\nconst MIN_WIDTH_PS = 260; // Minimum width Player Showcase\n@Component({\n  selector: 'olga-header',\n  templateUrl: './olga-header.component.html',\n  styleUrls: ['./olga-header.component.scss']\n})\nexport class OlgaHeaderComponent implements OnInit {\n  environment = environment;\n  @Input() variant: string = 'Classical';\n  @Input() event: string = '';\n  @Input() eventDate: string = '';\n  @Input() setDate: string = '';\n  @Input() white: string = '';\n  @Input() black: string = '';\n  @Input() whiteData: PlayerData = { image: environment.imagesPath + \"player.png\" };\n  @Input() blackData: PlayerData = { image: environment.imagesPath + \"player.png\" };\n  @Input() whiteElo: string = '';\n  @Input() blackElo: string = '';\n  @Input() round = '';\n  @Input() opening = '';\n  @Input() site = '';\n  @Input() siteFlag = '';\n  @Input() currentGame: number = 0;\n  @Input() gameCount: number = 0;\n  @Output() result = '';\n  @Output() trophySource = environment.imagesPath + 'draw.png';\n  @Input() eventURL: string = \"https://en.wikipedia.org/wiki/2016_US_Chess_Championship\";\n  @Input() searchURL: string = 'https://www.chessgames.com/perl/ezsearch.pl?search=';\n\n  // HTML Element Handles\n  // HTML Element Handles\n\n  @ViewChild('containerElement') containerElement!: ElementRef;\n  @ViewChild('titleContainerElement') titleContainerElement!: ElementRef;\n  @ViewChild('prevButtonElement') prevButtonElement!: ElementRef;\n  @ViewChild('matchHeaderElement') matchHeaderElement!: ElementRef;\n  @ViewChild('nextButtonElement') nextButtonElement!: ElementRef;\n  @ViewChild('resultSectionElement') resultSectionElement!: ElementRef;\n  @ViewChild('variantElement') variantElement!: ElementRef;\n  @ViewChild(GamescoreUxComponent) scoreComponent!: GamescoreUxComponent;\n  @ViewChild('playerSectionElement') playerSectionElement!: ElementRef;\n  headerContainer: HTMLElement | null = null;\n\n  constructor(public olga: OlgaService, public layout: LayoutService, private renderer: Renderer2) {\n    olga.attachHeader(this);\n    layout.attachHeader(this);\n  }\n\n  ngOnInit(): void { }\n\n  setHeader(map: Map<string, string>): void {\n    this.eventDate = this.olga.setDate;\n    const event = map.get('Event');\n    if (event) {\n      this.event = event;\n    }\n    const eventDate = map.get('Event Date');\n    if (eventDate) {\n      this.eventDate = eventDate;\n    }\n    const white = map.get('White');\n    if (white) {\n      this.white = white;\n      const pdata = this.olga.getPlayerData(white) as PlayerData;\n      if (pdata) {\n        this.whiteData = pdata;\n        if (!pdata.image) {\n          this.whiteData.image = STOCK_IMAGE;\n        }\n      } else {\n        this.whiteData = { image: STOCK_IMAGE } as PlayerData;\n      }\n    }\n    const black = map.get('Black');\n    if (black) {\n      this.black = black;\n      const pdata = this.olga.getPlayerData(black) as PlayerData | null;\n      if (pdata) {\n        this.blackData = pdata;\n        if (!pdata.image) {\n          this.blackData.image = STOCK_IMAGE;\n        }\n      } else {\n        this.blackData = { image: STOCK_IMAGE } as PlayerData;\n      }\n    }\n    const gameData = this.olga.getGameData(this.currentGame);\n    if (gameData) {\n      if (gameData.opening)\n        this.opening = gameData.opening;\n      else this.opening = '';\n\n      if (gameData.country) {\n        this.siteFlag = environment.flagsPath + gameData.country + '.png';\n      } else {\n        this.siteFlag = '';\n      }\n    } else {\n      this.opening = '';\n      this.siteFlag = '';\n    }\n    const site = map.get('Site');\n    if (site) {\n      this.site = site;\n    } else {\n      this.site = '';\n    }\n    const whiteElo = map.get('White Elo');\n    if (whiteElo) {\n      this.whiteElo = whiteElo;\n    }\n    const blackElo = map.get('Black Elo');\n    if (blackElo) {\n      this.blackElo = blackElo;\n    }\n    const variant = map.get('Variant');\n    if (variant) {\n      this.variant = variant;\n    }\n    if (this.olga.setDate.length > 0) {\n      this.setDate = this.olga.setDate;\n    }\n    const round = map.get('Round');\n    if (round) {\n      this.round = 'Round ' + round;\n    } else {\n      this.round = '';\n    }\n    const result = map.get('Result');\n    if (result) {\n      if (result.length == 1) {\n        this.result = 'Abandoned';\n        this.trophySource = '';\n        return;\n      }\n      this.result = result + ' in ' + this.olga.getPlyCount() + ' moves';\n      if (result == '1-0') {\n        this.trophySource = environment.imagesPath + 'wwins.png';\n        return;\n      }\n      if (result == '0-1') {\n        this.trophySource = environment.imagesPath + 'bwins.png';\n        return;\n      }\n      if (result == '1/2-1/2') {\n        this.trophySource = environment.imagesPath + 'draw.png';\n        return;\n      }\n    }\n  }\n\n  public setMatchUrl(src: string): void {\n    this.eventURL = src;\n  }\n\n  public searchDate(): void {\n    if (this.eventDate.length) {\n      const d = new Date(this.eventDate);\n      const year = d.getFullYear();\n      const date = d.getDate();\n      const month = d.getMonth();\n      let output = '';\n      if (year) {\n        output = year.toString();\n        if (month || date) {\n          output += '-';\n        }\n      }\n      if (month) {\n        output += (month + 1).toString();\n        if (date) {\n          output += '-';\n        }\n      }\n      if (date) {\n        output += date.toString();\n      }\n      window.open(this.searchURL + output);\n    }\n  }\n\n  previousGame(): void {\n    if (this.currentGame > 0) {\n      --this.currentGame;\n    }\n    if (this.currentGame >= 0) {\n      this.olga.selectGame(this.currentGame)\n    }\n  }\n  nextGame(): void {\n    if (this.currentGame < this.gameCount) {\n      this.olga.selectGame(++this.currentGame)\n    }\n  }\n  resize(width: number, height: number) {\n    if (this.layout.headerElement) {\n      this.layout.headerElement.style.height = height + 'px';\n    }\n    switch (this.layout.state) {\n      case 1: // SBS Portrait\n        this.containerElement.nativeElement.style = 'height:auto;width:100%;margin-left:0px;margin-right:0px;overflow-y:hidden;';\n        if (this.layout.headerElement) {\n          this.layout.headerElement.style.width = width + 'px';\n        }\n        break;\n      case 2: {\n        this.containerElement.nativeElement.style = 'height:auto;width:100%;margin-left:0px;margin-right:0px;overflow-y:hidden;';\n        if (this.layout.headerElement) {\n          this.layout.headerElement.style.width = width + 'px';\n        }\n        break;\n      }\n      case 3: {\n        //this.variantElement.nativeElement.style = 'margin-left:4px;margin-top:-20px;margin-right:-18px;flex-grow:0;order:0;z-index:10; width:180px';\n        let scoreSize = height;\n        if (this.resultSectionElement) {\n          scoreSize -= this.resultSectionElement.nativeElement.clientHeight;\n        }\n        if (this.playerSectionElement) {\n          scoreSize -= (this.playerSectionElement.nativeElement.clientHeight);\n        }\n        if (this.matchHeaderElement) { // should be 83\n          scoreSize -= this.matchHeaderElement.nativeElement.clientHeight;\n        }\n        if (this.layout.headerElement) {\n          this.renderer.setStyle(this.layout.headerElement, 'left', '');\n        }\n        this.titleContainerElement.nativeElement.style =\n          'order:1;height: auto;line-height:42px;font-size: 110%;text-align:center;min-width: 140px;width: calc(100% - 188px);min-height:42px;'\n        'padding-bottom:4px;font-family: Candara;.match-date{height: 22px;font-size:72%;font-weight: bold;text-align: center;line-height:4px;}';\n        if (this.scoreComponent) {\n          this.scoreComponent.resize(width, Math.ceil(scoreSize + 42));\n          if (this.layout.gameScoreElement) {\n            this.renderer.setStyle(this.layout.gameScoreElement, 'overflow-y', 'hidden');\n            this.renderer.setStyle(this.layout.gameScoreElement, 'height', scoreSize + 'px');\n            this.renderer.setStyle(this.layout.gameScoreElement, 'height', 'auto');\n          }\n        } else {\n          window.setTimeout(() => {\n            if (this.scoreComponent) {\n              this.scoreComponent.resize(width, Math.ceil(scoreSize + 42));\n              if (this.layout.gameScoreElement) {\n                this.renderer.setStyle(this.layout.gameScoreElement, 'overflow-y', 'hidden');\n                this.renderer.setStyle(this.layout.gameScoreElement, 'height', scoreSize + 'px');\n                this.renderer.setStyle(this.layout.gameScoreElement, 'height', 'auto');\n              }\n            }\n          }, 20);\n        }\n        break;\n      }\n      case 4: {\n        //this.variantElement.nativeElement.style = 'margin-top:8px;flex-grow:0;order:0;margin-left:2px;z-index:10;margin-right:-16px;width:142px';\n        this.titleContainerElement.nativeElement.style = 'order:2;justify-content:center;line-height:42px;font-size:100%;text-align:center;min-width:300px;margin-right:2px;margin-left:2px;width:auto;min-height:42px;'\n        'padding-bottom:4px;font-family: Candara;.match-date{height: 18px;font-size:64%;font-weight: bold;text-align: center;line-height:4px;}';\n        let scoreSize = height;\n        if (this.resultSectionElement) {\n          scoreSize -= this.resultSectionElement.nativeElement.clientHeight;\n        }\n        if (this.playerSectionElement) {\n          scoreSize -= (this.playerSectionElement.nativeElement.clientHeight);\n        }\n        if (this.matchHeaderElement) { // should be 83\n          scoreSize -= this.matchHeaderElement.nativeElement.clientHeight;\n        }\n        // 773 - 455 = 318\n\n        if (this.scoreComponent) {\n          this.scoreComponent.resize(width, Math.ceil(scoreSize + 48));\n          if (this.layout.gameScoreElement) {\n            this.renderer.setStyle(this.layout.gameScoreElement, 'overflow-y', 'hidden');\n            this.renderer.setStyle(this.layout.gameScoreElement, 'height', scoreSize + 'px');\n            this.renderer.setStyle(this.layout.gameScoreElement, 'height', 'auto');\n          }\n        } else {\n          window.setTimeout(() => {\n            if (this.scoreComponent) {\n              this.scoreComponent.resize(width, Math.ceil(scoreSize + 48));\n              if (this.layout.gameScoreElement) {\n                this.renderer.setStyle(this.layout.gameScoreElement, 'overflow-y', 'hidden');\n                this.renderer.setStyle(this.layout.gameScoreElement, 'height', scoreSize + 'px');\n                this.renderer.setStyle(this.layout.gameScoreElement, 'height', 'auto');\n              }\n            }\n          }, 20);\n        }\n        //this.scoreComponent.resize(width, height - 344);\n        break;\n      }\n      default: break;\n    }\n  }\n}\n","<div class=\"container\" #containerElement>\n\n    <div class=\"top-header\" #titleContainerElement>\n        <img src=\"{{environment.imagesPath}}{{variant}}.svg\" class=\"variant{{layout.state}}\" #variantElement>\n        <button *ngIf=\"currentGame > 0\" (click)=\"previousGame()\" class=\"prev-game\" #prevButtonElement>\n            < </button>\n                <div class=\"match-header\" #matchHeaderElement><a href=\"{{eventURL}}\" class=\"match-title\">{{event}}</a>\n                    <div class=\"event-date\" (click)=\"searchDate()\">{{setDate}}</div>\n                </div>\n                <button [ngClass]=\"{disabled : currentGame >= gameCount-1}\" class=\"next-game\" (click)=\"nextGame()\"\n                    #nextButtonElement> >\n                </button>\n    </div>\n    <div class=\"player-section{{layout.state}}\" #playerSectionElement>\n        <player-showcase [name]=\"white\" [elo]=\"whiteElo\" [playerData]=\"whiteData\" [searchURL]=\"searchURL\"\n            class=\"player-showcase{{layout.state}}\" #whiteShowcaseElement>\n        </player-showcase>\n        <player-showcase [name]=\"black\" [color]=\"true\" [elo]=\"blackElo\" [playerData]=\"blackData\" [searchURL]=\"searchURL\"\n            class=\"player-showcase{{layout.state}}\" #blackShowcaseElement>\n        </player-showcase>\n    </div>\n    <div class=\"result-section{{layout.state}}\" #resultSectionElement>\n        <img class=\"result-trophy{{layout.state}}\" src=\"{{trophySource}}\" #resultTrophy>\n        <div class=\"result-data{{layout.state}}\">\n            <div class=\"round\">&nbsp;{{round}}</div>\n            <div class=\"site-date{{layout.state}}\">\n                <div class=\"site\"><img class=\"site-flag{{layout.state}}\" src=\"{{siteFlag}}\">{{site}}</div>\n                <div class=\"match-date\"><img class=\"calendar{{layout.state}}\"\n                        src=\"{{environment.imagesPath}}calendar.png\">{{eventDate}}\n                </div>\n            </div>\n            <div class=\"opening\">{{opening}}</div>\n            <div class=\"result\">{{result}}</div>\n        </div>\n    </div>\n    <olga-score class=\"score{{layout.state}}\" *ngIf=\"layout.state >= 3\" id=\"olga-score-{{this.olga.UUID}}\" #score>\n    </olga-score>\n    <!-- <div class=\"primary-data-box\"><div class=\"box-title\">Event</div>{{event}}</div>\n    <div class=\"secondary-data-box\"><div class=\"secondary-box-title\">Event Date</div>{{eventDate}}</div>\n\n    <div class=\"primary-data-box\"><div class=\"box-title\">Match</div>{{match}}</div>\n    <div class=\"secondary-data-box\"><div class=\"secondary-box-title\">Match Date</div>{{matchDate}}</div>\n\n    <div class=\"primary-data-box\"><div class=\"box-title\">White</div>{{white}}</div>\n    <div class=\"secondary-data-box\"><div class=\"secondary-box-title\">Elo</div>{{whiteElo}}</div>\n\n    <div class=\"primary-data-box\"><div class=\"box-title\">Black</div>{{black}}</div>\n    <div class=\"secondary-data-box\"><div class=\"secondary-box-title\">Elo</div>{{blackElo}}</div> -->\n</div>","import { Component, Input, OnInit, Output } from '@angular/core';\nimport { LayoutService } from 'src/app/services/layout.service';\nimport { environment } from '../../../environments/environment';\nimport { STOCK_IMAGE, PlayerData } from '../../services/olga.service';\n@Component({\n  selector: 'player-showcase',\n  templateUrl: './player-showcase.component.html',\n  styleUrls: ['./player-showcase.component.scss']\n})\nexport class PlayerShowcaseComponent implements OnInit {\n  @Input() name: string = '';\n  @Input() color: boolean = false;\n  @Input() elo: string = '';\n  @Input() title: string = '';\n  @Input() playerData: PlayerData = { image: STOCK_IMAGE }\n  @Input() searchURL: string = '';\n  environment = environment;\n  constructor(public layout: LayoutService) { }\n\n  ngOnInit(): void {\n\n  }\n  search(value: string): void {\n    if (this.searchURL) {\n      window.open(this.searchURL + value);\n    }\n\n  }\n\n}\n","<div class=\"showcase-box\">\r\n    <div class=\"player-frame{{layout.state}}\">\r\n        <img [src]=\"playerData.image\" class=\"player-image\">\r\n        <img src=\"{{environment.imagesPath}}picture-frame.png\" class=\"photo-frame\">\r\n    </div>\r\n    <div class=\"player-details{{layout.state}}\">\r\n        <div class=\"player-header{{layout.state}}\">\r\n            <div *ngIf=\"layout.state <= 2\" class=\"player-nameP\" (click)=\"search(name)\">{{name}}</div>\r\n            <img *ngIf=\"color\" src=\"{{environment.piecesPath}}bpawn.png\" class=\"color-image\">\r\n            <img *ngIf=\"!color\" src=\"{{environment.piecesPath}}wpawn.png\" class=\"color-image\">\r\n            {{color ? 'Black':'White'}}\r\n        </div>\r\n        <div *ngIf=\"layout.state > 2\" class=\"player-name\" (click)=\"search(name)\">{{name}}</div>\r\n        <div class=\"player-data-box\">\r\n            <div *ngIf=\"playerData.born !== undefined\" class=\"player-data\" (click)=\"search(playerData.born)\"><b>Born:\r\n                </b>{{playerData.born}}</div>\r\n            <div *ngIf=\"playerData.elo !== undefined\" class=\"player-data\"><b>FIDE Elo: </b>{{playerData.elo}}</div>\r\n            <div *ngIf=\"elo.length\" class=\"player-data\"><b>Match Elo: </b>{{elo}}</div>\r\n        </div>\r\n    </div>\r\n</div>","import {\n  Component,\n  OnInit,\n  Output,\n  AfterViewInit,\n  ViewChild,\n  ElementRef,\n} from '@angular/core';\nimport {\n  ChessMove,\n  GameScoreItem,\n  GameScoreType\n} from '../common/kokopu-engine';\nimport { OlgaService, ScoreViewType } from '../services/olga.service';\nimport { LayoutService } from '../services/layout.service';\nimport { ScoreFlowComponent } from './score-flow/score-flow.component';\nimport { BehaviorSubject } from 'rxjs';\nimport { ScoreTableComponent } from './score-table/score-table.component';\n\n@Component({\n  selector: 'olga-score',\n  templateUrl: './olga-score.html',\n  styleUrls: ['./olga-score.scss'],\n})\nexport class GamescoreUxComponent implements OnInit, AfterViewInit {\n  // View Children Handles\n  // @ts-ignore\n  @ViewChild(ScoreFlowComponent) flowScore: ScoreFlowComponent | null;\n  // @ts-ignore\n  @ViewChild(ScoreTableComponent) tableScore: ScoreTableComponent | null;\n\n  container: HTMLElement | null = null;\n  GameScoreType = GameScoreType;\n  ScoreViewType = ScoreViewType;\n  @Output() _items: GameScoreItem[] = [];\n  // @ts-ignore\n  @Output() readonly currentData = new BehaviorSubject<GameScoreItem | null>(null);\n  // @ts-ignore\n  @Output() currentIndex: number = -1;\n  // @ts-ignore\n  @Output() currentItem: GameScoreItem | null;\n  // Current item data and visual\n\n\n  constructor(public olga: OlgaService, public layout: LayoutService) {\n    this.olga.attachScore(this);\n    this.layout.attachScore(this);\n  }\n\n  ngOnInit(): void {\n    this.olga.attachScore(this);\n    this.layout.attachScore(this);\n    const gs = this.olga.getGame()?.generateGameScore();\n    if (gs) {\n      this._items = gs;\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.layout.gameScoreElement = this.container = document.getElementById('olga-score-' + this.olga.UUID);\n    if (this.flowScore) {\n      this.flowScore.items = this._items;\n    }\n    if (this.tableScore) {\n      this.tableScore.items = this._items;\n    }\n  }\n\n  public clearGameScore(): void {\n    if (this.flowScore) {\n      this.flowScore.clearGameScore();\n    }\n  }\n  public setGameScoreItems(items: GameScoreItem[] | undefined): void {\n    if (items) {\n      this._items = items;\n      this.updateSelection();\n    } else {\n      this._items = [];\n    }\n    if (this.flowScore) {\n      this.flowScore.items = this._items;\n    }\n    if (this.tableScore) {\n      this.tableScore.items = this._items;\n    }\n  }\n\n  public plyCount(): number {\n    if (this._items) {\n      return (this._items.length / 2) + 1;\n    }\n    return 0;\n  }\n\n  public updateSelection(): void {\n    window.setTimeout(() => { this.selectGameScoreItem(this.currentIndex); }, 5);\n  }\n  public clearSelection(): void {\n    this.currentIndex = -1;\n    window.setTimeout(() => { this.selectGameScoreItem(-1); }, 5);\n  }\n\n  protected navigateToItem(index: number): void {\n\n  }\n\n  resize(width: number, height: number) {\n    if (height == 0 || width == 0) {\n      return;\n    }\n    // if (this.container) {\n    //   this.container.style.width = width + 'px';\n    //   this.container.style.height = height + 'px';\n    // }\n    if (this.flowScore) {\n      this.flowScore.resize(width, height);\n    }\n    if (this.tableScore) {\n      this.tableScore.resize(width, height);\n    }\n  }\n\n\n  ignoreEvent(event: MouseEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n\n  selectGameScoreItem(index: number) {\n    if (this.flowScore) {\n      this.flowScore.selectGameScoreItem(index);\n    } else if (this.tableScore) {\n      this.tableScore.selectGameScoreItem(index);\n      window.setTimeout(this.tableScore.updateViewSize, 100);\n    }\n  }\n\n\n  // Navigation\n\n  public takeVariation(index: number) {\n    this.navigateToNode(index - 1);\n    window.setTimeout(() => {\n      if (this.currentItem) {\n        const item = this._items[++this.currentIndex];\n        const variations = item.move.variations();\n        if (variations.length > 0) {\n          // show variation \n          console.log('Taking first variation');\n          console.log(variations[0]);\n          this.olga.makeVariantMove(0, item.move);\n          this.updateSelection();\n        }\n      }\n    }, 200);\n  }\n\n  public navigateToNode(index: number) {\n    if (this.currentIndex < index) {\n      while (this.currentIndex < index) {\n        const next = this._items[++this.currentIndex] as GameScoreItem;\n        if (next) {\n          if (this.olga.play(next.move)) {\n            const nodeMove = ChessMove.fromNode(next.move);\n            if (nodeMove) {\n              this.olga.makeBoardMove(nodeMove);\n            }\n          }\n        }\n      }\n      this.currentIndex = index;\n      this.updateSelection();\n      return;\n    }\n    while (this.currentIndex > index) {\n      const node = this._items[this.currentIndex];\n      let prev = null;\n      if (this.currentIndex > 0) {\n        prev = this._items[this.currentIndex - 1];\n      }\n      if (prev && node) {\n        if (this.olga.unPlay(node.move, prev.move)) {\n          const nodeMove = ChessMove.fromNode(node.move);\n          if (nodeMove) {\n            this.olga.reverseBoardMove(nodeMove);\n          }\n        }\n      }\n      --this.currentIndex;\n    }\n    if (index === -1) {\n      this.olga.resetEngine();\n      this.olga.redrawBoard();\n    }\n    this.updateSelection();\n  }\n  public advance(): boolean {\n    if (!this.isFinalPosition()) {\n      const next = this.currentIndex + 1;\n      if (next < this._items.length && next >= 0) {\n        this.navigateToNode(next);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  public moveToStart(): void {\n    while (this.previous()) { }\n  }\n\n  public moveToEnd(): void {\n    while (this.advance()) { }\n  }\n\n  public previous(): boolean {\n    if (this.currentIndex !== -1) {\n      const prev = this.currentIndex - 1;\n      if (prev < this._items.length && prev >= -1) {\n        this.navigateToNode(prev);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  public isStartingPosition(): boolean {\n    return this.currentIndex === -1;\n  }\n\n  public isFinalPosition(): boolean {\n    return this.currentIndex >= (this._items.length - 1);\n  }\n\n  public incrementSelection(): void {\n    ++this.currentIndex;\n    this.updateSelection();\n  }\n\n}\n","<score-flow id=\"score-flow-{{olga.UUID}}\" *ngIf=\"olga.scoreViewType.value === ScoreViewType.Flow\" [items]=\"_items\">\n</score-flow>\n<score-table id=\"score-table-{{olga.UUID}}\" *ngIf=\"olga.scoreViewType.value === ScoreViewType.Table\" [items]=\"_items\">\n</score-table>","import { Component, OnInit, Input, AfterViewInit, SimpleChanges, OnChanges, Output, ViewChild, ElementRef, ComponentFactoryResolver } from '@angular/core';\nimport { GameScoreType, GameScoreItem } from '../../../common/kokopu-engine';\nimport { OlgaService } from '../../../services/olga.service';\nimport { ThemeService } from '../../../services/themes.service';\n\n@Component({\n  selector: 'flow-item',\n  templateUrl: './flow-item.component.html',\n  styleUrls: ['./flow-item.component.scss']\n})\n// @ts-ignore\nexport class FlowItemComponent implements OnInit, AfterViewInit, OnChanges {\n  @Input() data: GameScoreItem = new GameScoreItem();\n  @Output() typeName = '';\n  // visual nodes\n  @Output() ply = '';\n  @Output() score = '';\n  GameScoreType = GameScoreType;\n  @ViewChild('gsiPly') gsiPly!: ElementRef;\n\n  constructor(public olga: OlgaService, public themes: ThemeService) {\n    // use data to actually set type\n\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.data) {\n      let newData = changes.data.currentValue as GameScoreItem;\n      this.data = newData;\n      if (this.data && this.gsiPly) {\n        let showing = false;\n        if (this.isFullPly()) {\n          showing = this.olga.showingPly.value;\n        } else {\n          showing = this.olga.showingHalfPly.value;\n        }\n        if (!showing) {\n          this.gsiPly.nativeElement.remove();\n        } else {\n          this.ply = this.data.move.fullMoveNumber().toString() + '.';\n        }\n      }\n      if (this.data.move) {\n        if (this.data.move._info.moveDescriptor && typeof this.data.move._info.moveDescriptor != 'string') {\n          this.score = this.data.move.notation();\n        } else {\n          this.score = this.data.move._info.moveDescriptor;\n        }\n        this.data.getType();\n        this.updateTypeName();\n      }\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.updateTypeName();\n    if (this.gsiPly && this.data.move) {\n      let showing = false;\n      if (this.isFullPly()) {\n        showing = this.olga.showingPly.value;\n      } else {\n        showing = this.olga.showingHalfPly.value;\n      }\n      if (!showing) {\n        this.gsiPly.nativeElement.remove();\n      } else {\n        window.setTimeout(() => { this.ply = this.data.move.fullMoveNumber().toString() + '.'; },\n          10);\n      }\n    }\n  }\n\n  showPly(): boolean {\n    if (this.data) {\n      if (this.isFullPly()) {\n        return this.olga.showingPly.value;\n      }\n      return this.olga.showingHalfPly.value;\n    }\n    return false;\n  }\n  isFullPly(): boolean {\n    if (this.data) {\n      return (this.data.type & GameScoreType.HalfPly) == 0;\n    }\n    return false;\n  }\n  setSelected(select: boolean): void {\n    if (this.data) {\n      if (select) {\n        this.data.type = (this.data.type | GameScoreType.Selected);\n        this.updateTypeName();\n        return;\n      }\n      if (this.data.type >= GameScoreType.Selected) {\n        this.data.type = this.data.type ^ GameScoreType.Selected;\n      }\n      this.updateTypeName();\n    }\n  }\n\n\n  isSelected(): boolean {\n    if (this.data) {\n      return (this.data.type & GameScoreType.Selected) == GameScoreType.Selected;\n    }\n    return false;\n  }\n\n  getPly(): number {\n    if (this.data && this.data.move) {\n      return this.data.move.fullMoveNumber();\n    }\n    return -1;\n  }\n\n  isGroup(): boolean {\n    if (this.data) {\n      return (this.data.type & GameScoreType.Group) == GameScoreType.Group;\n    }\n    return false;\n  }\n\n  isAnnotation(): boolean {\n    if (this.data) {\n      return (this.data.type & GameScoreType.Annotation) == GameScoreType.Annotation;\n    }\n    return false;\n  }\n\n  clickMove(): void {\n    if (this.data.move) {\n      const variations = this.data.move.variations();\n      if (variations.length > 0) {\n        this.olga.displayVariations(this.data);\n        // show variation \n        console.log('Taking first variation');\n        console.log(variations[0]);\n      }\n    }\n  }\n\n  protected updateTypeName(): void {\n    this.typeName = '';\n    if (this.data) {\n      const value = this.data.type & GameScoreType.Selected;\n      if ((this.data.type & GameScoreType.Selected) == GameScoreType.Selected) {\n        this.typeName += ' Current';\n      }\n      if ((this.data.type & GameScoreType.Annotation) == GameScoreType.Annotation) {\n        this.typeName += ' Annotation ';\n      }\n      if ((this.data.type & GameScoreType.Group) == GameScoreType.Group) {\n        this.typeName += ' Group ';\n      }\n      if ((this.data.type & GameScoreType.HalfPly) == GameScoreType.HalfPly) {\n        this.typeName += ' HalfPly ';\n      }\n      if (this.data.move) {\n        const variations = this.data.move.variations();\n        if (variations && variations.length > 0) {\n          this.typeName += ' Variation ';\n        }\n\n        if ((this.data.type & GameScoreType.Branched) == GameScoreType.Branched) { // must have a variation to be branched\n          this.typeName += ' Branched';\n        }\n      }\n    }\n  }\n}\n","<div #domElement class=\"gsi-container {{typeName}}\">\n  <div class=\"gsi-ply {{typeName}}\" (contextmenu)=\"this.olga.openVariation(data)\" (click)=\"clickMove()\" #gsiPly>\n    {{ply}}</div>\n  <!-- <div class=\"gsi-move {{typeName}}\" *ngIf=\"!isGroup()\">..&nbsp;</div> -->\n  <div class=\"gsi-move {{typeName}}\" *ngIf=\"this.data.move\" (contextmenu)=\"this.olga.openVariation(data)\"\n    (click)=\"clickMove()\">\n    {{score}}</div>\n  <div class=\"gsi-comment {{typeName}}\" *ngIf=\"this.data.move\" (click)=\"clickMove()\">\n    {{this.data.move.comment()}}</div>\n</div>","import {\n  Component,\n  OnInit,\n  QueryList,\n  ViewChildren,\n  Input,\n  Output,\n  OnChanges,\n  SimpleChanges,\n} from '@angular/core';\nimport { OlgaService } from 'src/app/services/olga.service';\nimport { GameScoreItem, ChessGame } from '../../common/kokopu-engine';\nimport { FlowItemComponent } from './flow-item/flow-item.component';\n\n@Component({\n  selector: 'score-flow',\n  templateUrl: './score-flow.component.html',\n  styleUrls: ['./score-flow.component.scss'],\n})\n\nexport class ScoreFlowComponent implements OnInit, OnChanges {\n  @ViewChildren(FlowItemComponent) scoreItems!: QueryList<FlowItemComponent>;\n  @Output() currentItem: FlowItemComponent | null = null;\n  @Input() items: GameScoreItem[] = [];\n  @Input() @Output() result = '1-0';\n  constructor(public olga: OlgaService) { }\n\n  ngOnInit(): void {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.result = this.olga.gameResult();\n  }\n\n  selectGameScoreItem(index: number) {\n    if (this.currentItem) {\n      this.currentItem.setSelected(false);\n      this.currentItem = null;\n    }\n    if (index >= 0) {\n      const item = this.scoreItems?.toArray()[index];\n      if (item && item != this.currentItem) {\n        item.setSelected(!item.isSelected());\n        this.currentItem = item;\n      }\n    }\n  }\n\n  openItemMenu(event: MouseEvent, item: FlowItemComponent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    console.log(item);\n    if (item.data) {\n      //item.setCurrent(!item.data.current);\n    }\n    switch (item.data.type) { // open different menus\n\n    }\n  }\n\n  clearGameScore(): void {\n\n  }\n\n  resize(width: number, height: number): void {\n\n  }\n}\n","<flow-item #scoreItem *ngFor=\"let item of items; index as i;\" [data]=\"item\">\n</flow-item><b>{{result}}</b>","import { Component, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { GameScoreItem } from '../../../common/kokopu-engine';\nimport { OlgaService } from '../../../services/olga.service';\n\ninterface ScoreRow {\n  white: GameScoreItem | null;\n  black: GameScoreItem | null;\n}\n\n@Component({\n  selector: 'score-column',\n  templateUrl: './score-column.component.html',\n  styleUrls: ['./score-column.component.scss']\n})\nexport class ScoreColumnComponent implements OnInit, OnChanges {\n  @Input() items: GameScoreItem[] = [];\n  @Input() index: number = 0;\n  @Input() size: number = 3;\n  @Output() rows: ScoreRow[] = [];\n  \n  constructor(public olga: OlgaService) {\n  }\n\n  ngOnInit(): void {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.items) {\n      this.setItems();\n    }\n  }\n\n  setData(items: GameScoreItem[], index: number, size: number) {\n    this.items = items;\n    this.index = index;\n    this.size = size;\n    this.setItems();\n  }\n\n  clearSelection(): void {\n\n  }\n\n  private setItems(): void {\n    if (this.items.length && this.size) {\n      let rows = this.items.slice((this.index*2),  (this.index*2) + (this.size * 2));\n      this.rows = [];\n      let white: GameScoreItem | null = null;\n      let last = null;\n      for (let i = 0; i < rows.length; ++i) {\n        const item = rows[i];\n        if (item.move) {\n          if (item.move.moveColor() == 'w') {\n            white = item;\n          } else {\n            this.rows.push({ white, black: item });\n            white = null;\n          }\n        }\n        last = item;\n      }\n      if (white) {\n        this.rows.push({ white, black: null });\n      }\n      for (let i = this.rows.length; i < this.size; ++i ) {\n        this.rows.push({white:null, black: null});\n      }\n    }\n  }\n}\n","<div *ngIf=\"olga.showTableHeader | async\" class=\"header\">\n    <div class=\"spacer\"></div>\n    <div class=\"wheader\">WHITE</div>\n    <div class=\"bheader\">BLACK</div>\n</div>\n<table-item *ngFor=\"let row of rows;\" [whiteMove]=\"row.white\" [blackMove]=\"row.black\">\n</table-item>","import { Component, OnInit, Input, OnChanges, SimpleChanges, Output, AfterViewInit, QueryList, ViewChildren, ViewChild, ElementRef, Renderer2 } from '@angular/core';\n\nimport { GameScoreItem } from '../../common/kokopu-engine';\nimport { LayoutService } from '../../services/layout.service';\nimport { OlgaService } from '../../services/olga.service';\nimport { ThemeService } from '../../services/themes.service';\nimport { ScoreColumnComponent } from './score-column/score-column.component';\n\n@Component({\n  selector: 'score-table',\n  templateUrl: './score-table.component.html',\n  styleUrls: ['./score-table.component.scss']\n})\nexport class ScoreTableComponent implements OnInit, OnChanges, AfterViewInit {\n  @ViewChildren(ScoreColumnComponent) scoreTables!: QueryList<ScoreColumnComponent>;\n  @ViewChild('comment', { static: false }) comment!: ElementRef;\n  @ViewChild('scoreArea', { static: false }) scoreArea!: ElementRef;\n  @Input() items: GameScoreItem[] = [];\n  @Input() columns: number[] = [];\n  @Input() rowCount = 0;\n  @Input() currentItem: GameScoreItem | null = null;\n  @Output() moveComment: string = '';\n  container!: HTMLElement;\n  width = 0;\n  height = 0;\n\n  constructor(public olga: OlgaService, public theme: ThemeService, public layout: LayoutService, private renderer: Renderer2) { }\n\n  ngOnInit(): void {\n\n  }\n  ngAfterViewInit(): void {\n    window.setTimeout(() => {\n      let container = document.getElementById('score-table-' + this.olga.UUID);\n      if (container) {\n        this.container = container;\n      }\n      this.layout.gameScoreElement = document.getElementById('olga-score-' + this.olga.UUID);\n      if (this.layout.gameScoreElement) {\n        const width = this.layout.gameScoreElement.clientWidth;\n        if (!isNaN(width)) {\n          this.width = width;\n          this.height = this.layout.gameScoreElement.clientHeight;\n        }\n      }\n      this.resize();\n    }, 10);\n  }\n\n  updateViewSize(): void {\n    window.setTimeout(() => {\n      if (this.resize) {\n        this.resize();\n      }\n    }, 10);\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (this.resize) {\n      this.resize();\n    }\n  }\n\n  selectGameScoreItem(index: number): void {\n    if (this.currentItem) {\n      this.currentItem.setSelected(false);\n    }\n    //this.variations = [];\n    if (index < this.items.length && index >= 0) {\n      this.currentItem = this.items[index];\n      const targetColumn = index % this.rowCount;\n      this.currentItem.setSelected(true);\n      if (this.currentItem.move) {\n        const comment = this.currentItem.move.comment();\n        if (comment) {\n          this.moveComment = comment;\n        } else {\n          this.moveComment = '';\n        }\n        // const variants = this.currentItem.move.variations();\n        // for(let i = 0; i < variants.length; ++i) {\n        //   const variation = variants[i];\n        //   this.variations.push([variation.initialFullMoveNumber(), variation.first().notation()])\n        // }\n      }\n    } else {\n      this.currentItem = null;\n    }\n    //this.updateViewSize();\n  }\n\n  resize(width: number = this.width, height: number = this.height): void {\n    if (this.items.length == 0 || width == 0) {\n      return;\n    }\n    if (!this.container || !this.scoreArea) {\n      window.setTimeout(() => { this.resize(width, height); }, 100);\n      return;\n    }\n    let scoreSize = height - 32;\n    if (this.currentItem && this.currentItem.move) {\n      let comment = this.currentItem.move.comment();\n      if (comment && comment.length >= 0) {\n        if (!this.comment) {\n          window.setTimeout(() => { this.resize(width, height) }, 10);\n          return;\n        }\n        scoreSize = height;\n      }\n    }\n\n    let moves = Math.ceil(this.items.length / 2);\n    let existing_items = document.getElementsByClassName('gsi-container');\n    let item_height = 25;\n    if (existing_items && existing_items.length) {\n      const first = existing_items[0];\n      item_height = first.clientHeight;\n    }\n    if (height <= 0) {\n      height = ((Math.ceil(moves / 3) + (this.olga.showTableHeader.value ? 2 : 1)) * item_height);\n      if (this.container) {\n        this.renderer.setStyle(this.container, 'height', height + 'px');\n      }\n    }\n    switch (this.layout.state) {\n      //@ts-ignore\n      case 1: { }\n      //@ts-ignore\n      case 2: { }\n      case 3: {\n        this.width = width;\n        this.height = height;\n        let max_row_count = Math.floor(height / item_height) + (this.olga.showTableHeader.value ? 0 : 1);\n        let max_columns = Math.floor(width / 176);\n        if (max_row_count * max_columns >= moves) {\n          // it will fit\n          for (let i = Math.ceil(moves / max_row_count); i < max_columns; ++i) {\n            if (moves % i === 0) {\n              max_columns = i;\n              break;\n            }\n          }\n          this.rowCount = Math.ceil(moves / max_columns); // even the columns out\n          //max_columns = Math.floor(moves/this.rowCount);\n        } else { // determine whats the best column count based on width\n\n          for (let i = max_columns; i >= 2; --i) {\n            if (moves % i === 0) {\n              max_columns = i;\n              break;\n            }\n          }\n          //max_columns = Math.floor( (3 + max_columns)/2);\n          this.rowCount = Math.ceil(moves / max_columns);\n        }\n        if (this.container) {\n          this.renderer.setStyle(this.container, 'height', 'unset');\n          this.renderer.setStyle(this.container, 'overflow-y', 'scroll');\n        }\n\n        if (this.scoreArea) {\n          this.renderer.setStyle(this.scoreArea.nativeElement, 'height', scoreSize + 'px');\n          this.renderer.setStyle(this.scoreArea.nativeElement, 'overflow-y', 'unset');\n          this.renderer.setStyle(this.scoreArea.nativeElement, 'overflow-x', 'hidden');\n        }\n        this.columns = Array.from({ length: max_columns }, (_, i) => i + 1);\n        this.theme.gsTableItemWidth.next(Math.round((width - (32 * this.columns.length)) / (this.columns.length * 2)) + 'px');\n        window.setTimeout(() => {\n          if (this.scoreTables) {\n            const tables = this.scoreTables.toArray();\n            for (let i = 0; i < tables.length; ++i) {\n              tables[i].setData(this.items, i * this.rowCount, this.rowCount);\n            }\n          }\n        }, 1);\n        break;\n      }\n      case 4: {\n        if (this.container) {\n          //this.renderer.setStyle(this.container, 'width', '100%');\n          // if(this.container.clientHeight == 0) {\n          // this.renderer.setStyle(this.container, 'height', '800px');\n          //   window.setTimeout(()=>{this.resize(width, height)}, 2);\n          // }\n          this.renderer.setStyle(this.container, 'height', 'unset');\n          //this.renderer.setStyle(this.container, 'overflow-y', 'visible');\n        }\n\n        if (this.scoreArea) {\n          this.renderer.setStyle(this.scoreArea.nativeElement, 'height', (scoreSize - 10) + 'px');\n          this.renderer.setStyle(this.scoreArea.nativeElement, 'overflow-y', 'unset');\n          this.renderer.setStyle(this.scoreArea.nativeElement, 'overflow-x', 'hidden');\n        }\n        let max_row_count = Math.floor(scoreSize / item_height) + (this.olga.showTableHeader.value ? 0 : 1);\n        let max_columns = Math.floor(width / 180);\n        if (max_row_count * max_columns >= moves) {\n          // it will fit\n          for (let i = Math.ceil(moves / max_row_count); i < max_columns; ++i) {\n            if (moves % i === 0) {\n              max_columns = i;\n              break;\n            }\n          }\n          this.rowCount = Math.ceil(moves / max_columns); // even the columns out\n          //max_columns = Math.floor(moves/this.rowCount);\n        } else { // determine whats the best column count based on width\n          max_columns = Math.floor(width / 180);\n          this.rowCount = Math.ceil(moves / max_columns);\n        }\n        this.columns = Array.from({ length: max_columns }, (_, i) => i + 1);\n        this.theme.gsTableItemWidth.next(Math.round((width - (32 * this.columns.length)) / (this.columns.length * 2)) + 'px');\n        window.setTimeout(() => {\n          if (this.scoreTables) {\n            const tables = this.scoreTables.toArray();\n            for (let i = 0; i < tables.length; ++i) {\n              tables[i].setData(this.items, i * this.rowCount, this.rowCount);\n            }\n          }\n        }, 1);\n      }\n    }\n  }\n\n}\n","<div class=\"score-area\" #scoreArea>\n    <score-column *ngFor=\"let selection of columns;index as column\" [items]=\"items\">\n    </score-column>\n</div>\n<div *ngIf=\"moveComment.length > 0\" class=\"comment\" #comment>\n    {{moveComment}}\n</div>","import { AfterViewInit, Component, ElementRef, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport { GameScoreItem, GameScoreType } from 'src/app/common/kokopu-engine';\nimport { OlgaService } from 'src/app/services/olga.service';\nimport { ThemeService } from 'src/app/services/themes.service';\n\n@Component({\n  selector: 'table-item',\n  templateUrl: './table-item.component.html',\n  styleUrls: ['./table-item.component.scss']\n})\nexport class TableItemComponent implements OnInit, AfterViewInit {\n  @Input() whiteMove: GameScoreItem | null = null;\n  @Input() blackMove: GameScoreItem | null = null;\n  @Output() typeName = '';\n  @Output() ply = '';\n  @Output() whiteScore = '';\n  @Output() blackScore = '';\n  GameScoreType = GameScoreType;\n  //@ViewChild('gsiPly') gsiPly!: ElementRef;\n\n  constructor(public olga: OlgaService, public themes: ThemeService) { }\n\n  ngOnInit(): void {\n    this.ply = this.whiteMove?.move.fullMoveNumber().toString();\n    if (this.ply == '' && this.blackMove) {\n      this.ply = this.blackMove?.move.fullMoveNumber().toString();\n    }\n    if (this.whiteMove) {\n      this.whiteScore = this.whiteMove.move.notation();\n    }\n    if (this.blackMove) {\n      this.blackScore = this.blackMove.move.notation();\n    }\n  }\n\n  ngAfterViewInit(): void {\n    window.setTimeout(() => this.updateTypeName(), 10);\n    if (this.whiteMove && this.whiteMove.move) {\n      let showing = false;\n      if (this.isFullPly()) {\n        showing = this.olga.showingPly.value;\n      } else {\n        showing = this.olga.showingHalfPly.value;\n      }\n      if (!showing) {\n        //this.gsiPly.nativeElement.remove();\n      } else {\n      }\n    }\n\n  }\n  showPly(): boolean {\n    if (this.whiteMove) {\n      if (this.isFullPly()) {\n        return this.olga.showingPly.value;\n      }\n      return this.olga.showingHalfPly.value;\n    }\n    return false;\n  }\n  isFullPly(): boolean {\n    if (this.whiteMove) {\n      return (this.whiteMove.type & GameScoreType.HalfPly) == 0;\n    }\n    return false;\n  }\n  setSelected(select: boolean): void {\n    if (this.whiteMove) {\n      if (select) {\n        this.whiteMove.type = (this.whiteMove.type | GameScoreType.Selected);\n        this.updateTypeName();\n        return;\n      }\n      if (this.whiteMove.type >= GameScoreType.Selected) {\n        this.whiteMove.type = this.whiteMove.type ^ GameScoreType.Selected;\n      }\n      this.updateTypeName();\n    }\n  }\n\n\n  isSelected(): boolean {\n    if (this.whiteMove) {\n      return (this.whiteMove.type & GameScoreType.Selected) == GameScoreType.Selected;\n    }\n    return false;\n  }\n\n  getPly(): number {\n    if (this.whiteMove && this.whiteMove.move) {\n      return this.whiteMove.move.fullMoveNumber();\n    }\n    return -1;\n  }\n\n  isGroup(): boolean {\n    if (this.whiteMove) {\n      return (this.whiteMove.type & GameScoreType.Group) == GameScoreType.Group;\n    }\n    return false;\n  }\n\n  isAnnotation(): boolean {\n    if (this.whiteMove) {\n      return (this.whiteMove.type & GameScoreType.Annotation) == GameScoreType.Annotation;\n    }\n    return false;\n  }\n\n  clickMove(): void {\n    if (this.whiteMove && this.whiteMove.move) {\n      const variations = this.whiteMove.move.variations();\n      if (variations.length > 0) {\n        this.olga.displayVariations(this.whiteMove);\n        // show variation \n        console.log('Taking first variation');\n        console.log(variations[0]);\n      }\n    }\n  }\n\n  protected updateTypeName(): void {\n    this.typeName = '';\n    if (this.whiteMove) {\n      const value = this.whiteMove.type & GameScoreType.Selected;\n      if ((this.whiteMove.type & GameScoreType.Selected) == GameScoreType.Selected) {\n        this.typeName += ' Current';\n      }\n      if ((this.whiteMove.type & GameScoreType.Annotation) == GameScoreType.Annotation) {\n        this.typeName += ' Annotation ';\n      }\n      if ((this.whiteMove.type & GameScoreType.Group) == GameScoreType.Group) {\n        this.typeName += ' Group ';\n      }\n      if ((this.whiteMove.type & GameScoreType.HalfPly) == GameScoreType.HalfPly) {\n        this.typeName += ' HalfPly ';\n      }\n      if (this.whiteMove.move) {\n        const variations = this.whiteMove.move.variations();\n        if (variations && variations.length > 0) {\n          this.typeName += ' Variation ';\n        }\n\n        if ((this.whiteMove.type & GameScoreType.Branched) == GameScoreType.Branched) { // must have a variation to be branched\n          this.typeName += ' Branched';\n        }\n      }\n    }\n  }\n}\n","<div #domElement class=\"gsi-container\">\n    <div class=\"gsi-ply\" (click)=\"clickMove()\" #gsiPly>\n        {{ply}}</div>\n    <!-- <div class=\"gsi-move {{typeName}}\" *ngIf=\"!isGroup()\">..&nbsp;</div> -->\n    <div class=\"white-move {{typeName}}\">\n        {{whiteScore}}</div>\n    <div class=\"black-move {{typeName}}\">\n        {{blackScore}}</div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\n//@ts-ignore\nimport { Node as KNode } from 'kokopu';\nimport { OlgaService } from '../services/olga.service';\nimport { ChessMove } from '../common/kokopu-engine';\nimport { environment } from '../../environments/environment';\n@Component({\n  selector: 'olga-status',\n  templateUrl: './olga-status.component.html',\n  styleUrls: ['./olga-status.component.scss']\n})\nexport class OlgaStatusComponent implements OnInit {\n  readonly status = new BehaviorSubject<string>('White to move.');\n  lastNode: KNode | null = null;\n  lastMove: ChessMove | undefined = undefined;\n  environment = environment;\n  constructor(public olga: OlgaService) {\n  }\n\n  ngOnInit(): void {\n\n  }\n\n  sendForAnalysis(): void {\n    if (this.lastNode) {\n      let fen = this.olga.gameFEN();\n      var addr = 'http://www.chessgames.com/perl/nph-analysis_prereq?atype=FEN&fen=';\n      addr += fen.split(\" \").join(\"%20\");\n      addr += '&move=';\n      addr += ((this.lastNode.fullMoveNumber() - 1) * 2) - (this.lastNode.moveColor() === 'b' ? 1 : 0);\n      addr += '&session_id=';\n      addr += this.olga.UUID;\n      window.open(addr);\n    }\n  }\n\n  updateStatus(turn: string, last?: KNode, move?: ChessMove) {\n    let message = '';\n    if (last) {\n      this.lastNode = last;\n      this.lastMove = move;\n      let position = last.position();\n      if (position) {\n        if (position.isCheckmate()) {\n          message = (turn === 'b' ? 'White' : 'Black') + ' wins by checkmate. ';\n        } else {\n          if (position.isCheck()) {\n            message += 'Check. '\n          }\n          message += (turn === 'w' ? 'White' : 'Black') + ' to move. ';\n        }\n      }\n      let notation = this.olga.getMoveNotation(last);\n      message += '' + last.fullMoveNumber() + (turn === 'b' ? '.' : '..') + notation;\n    }\n    this.status.next(message);\n  }\n\n  resetStatus(): void {\n    this.status.next('White to move.');\n    this.lastNode = null;\n    this.lastMove = undefined;\n  }\n}\n","<div class=\"status-text\">{{status.value}}</div>\r\n<br /><br />\r\n<a *ngIf=\"lastNode\" (click)=\"sendForAnalysis()\" class=\"analysis-button\"><img class=\"analysis-image\"\r\n        src=\"{{environment.imagesPath}}new_window.png\">Engine</a>","import { Injectable, ElementRef } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { Olga } from '../app.component';\nimport { OlgaHeaderComponent } from '../olga-header/olga-header.component';\nimport { GamescoreUxComponent } from '../olga-score/olga-score.component';\nimport { CanvasChessBoard } from '../canvas-chessboard/canvas-chessboard.component';\nimport { OlgaControlsComponent } from '../olga-controls/olga-controls.component';\nimport { Renderer2 } from '@angular/core';\n\nexport declare type Layout = 'auto' | 'landscape' | 'portrait';\nfunction debounce(func: any, wait: number) {\n  let timeout = -1;\n\n  return function executedFunction(...args: any) {\n    const later = () => {\n      timeout = -1;\n      func(...args);\n    };\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LayoutService {\n  readonly landscapeOrientation = new BehaviorSubject<boolean>(true);\n  readonly mobileView = new BehaviorSubject<boolean>(false);\n  olga: Olga | null = null;\n  header: OlgaHeaderComponent | null = null;\n  controlsComponent: OlgaControlsComponent | null = null;\n  appContainer: ElementRef | null = null;\n  gameScore: GamescoreUxComponent | null = null;\n  board: CanvasChessBoard | null = null;\n  resizeElement: HTMLElement | null = null;\n  preferredLayout: Layout = 'auto';\n  preferredRatioLandscape = .75;\n  preferredRatioPortrait = 0.52;\n  preferredWidthPercentage = 1.0;\n  preferredHeightPercentage = 1.0\n  layoutDirection = true;\n  gameScoreElement: HTMLElement | null = null;\n  boardElement: HTMLElement | null = null;\n  controlsElement: HTMLElement | null = null;\n  statusElement: HTMLElement | null = null;\n  headerElement: HTMLElement | null = null;\n  resizeObserver: ResizeObserver = new ResizeObserver(debounce(this.resizeEvent.bind(this), 6));\n  state: number = 3;\n  constructor() { }\n\n  public settings(): object {\n    let settings = {};\n    return settings;\n  }\n\n\n\n  protected resizeEvent(entries: readonly ResizeObserverEntry[]) {\n    // @ts-ignore\n    const boundingRect = entries[0].contentRect as DOMRectReadOnly;\n    if (!this.appContainer) {\n      console.log('Invalid (Null) App Container %$@');\n    } else {\n      let height = boundingRect.height;\n      if (boundingRect.width === height) {\n        height - 2;\n      }\n      const landscape = (boundingRect.width > height);\n      this.landscapeOrientation.next(landscape);\n      switch (this.preferredLayout) {\n        case 'auto': {\n          if (landscape) {\n            this.rtl(boundingRect.width, height);\n          } else {\n            this.rtp(boundingRect.width, height);\n          }\n          break;\n        }\n        case 'landscape': {\n          this.rtl(boundingRect.width, height);\n          break;\n        }\n        case 'portrait': {\n          this.rtp(boundingRect.width, height);\n          break;\n        }\n      }\n    }\n  }\n\n\n\n\n  public attachHeader(header: OlgaHeaderComponent) {\n    this.header = header;\n  }\n\n  public attachScore(gs: GamescoreUxComponent) {\n    this.gameScore = gs;\n  }\n\n  private rtl(width: number, height: number) {\n    let boardWidth = (width * this.preferredRatioLandscape);\n    boardWidth = boardWidth > height ? height : boardWidth;\n    boardWidth = boardWidth < 192 ? 192 : boardWidth;\n    let c2width = width - (boardWidth + 4);\n    if (c2width < 300) {\n      let diff = 300 - c2width;\n      c2width = 300;\n      boardWidth -= diff;\n    }\n    let hheight = height - 153;\n    this.state = c2width > 586 ? 3 : 4;\n    this.header?.resize(c2width, hheight);\n    this.controlsComponent?.resize(c2width, 64);\n    this.board?.setSize(boardWidth);\n    if (this.boardElement && this.gameScoreElement && this.headerElement && this.statusElement && this.controlsElement) {\n      switch (this.state) {\n        case 3: { // landscape full\n          this.headerElement.style.maxHeight = hheight + 'px';\n          this.headerElement.style.height = hheight + 'px';\n          this.headerElement.style.width = c2width + 'px';\n          this.headerElement.style.right = '0px';\n          this.headerElement.style.left = '';\n          this.header?.resize(c2width, hheight);\n          if (this.layoutDirection) { // RTL\n            this.boardElement.style.left = '2px';\n            this.boardElement.style.right = '';\n          } else {\n            this.boardElement.style.right = '2px';\n            this.boardElement.style.left = '';\n          }\n          this.boardElement.style.top = '2px';\n          this.controlsElement.style.width = c2width + 'px';\n          this.controlsElement.style.top = hheight + 'px';\n          this.controlsElement.style.right = '0px';\n          this.controlsElement.style.left = '';\n          //this.gameScore?.resize(c2width, 456);\n          this.statusElement.style.bottom = '0px';\n          this.statusElement.style.height = '32px';\n          this.statusElement.style.right = '2px';\n          this.statusElement.style.left = '';\n          this.statusElement.style.top = '';\n          this.statusElement.style.width = c2width - 2 + 'px';\n          break;\n        }\n        case 4: {\n          this.headerElement.style.maxHeight = hheight + 'px';\n          this.headerElement.style.height = hheight + 'px';\n          this.headerElement.style.width = c2width + 'px';\n          this.headerElement.style.right = '0px';\n          this.headerElement.style.left = '';\n          this.header?.resize(c2width, hheight);\n          if (this.layoutDirection) { // RTL\n            this.boardElement.style.left = '2px';\n            this.boardElement.style.right = '';\n          } else {\n            this.boardElement.style.right = '2px';\n            this.boardElement.style.left = '';\n          }\n          this.boardElement.style.top = '2px';\n          this.controlsElement.style.width = c2width + 'px';\n          this.controlsElement.style.top = hheight + 'px';\n          this.controlsElement.style.right = '0px';\n          this.controlsElement.style.left = '';\n          // this.gameScoreElement.style.right = '2px';\n          // this.gameScoreElement.style.width = c2width - 24 + 'px';\n          // this.gameScoreElement.style.height = '456px';\n          // this.gameScoreElement.style.top = '340px';\n          // this.gameScoreElement.style.left = '';\n          //this.gameScore?.resize(c2width, 456);\n          this.statusElement.style.bottom = '0px';\n          this.statusElement.style.height = '32px';\n          this.statusElement.style.right = '2px';\n          this.statusElement.style.left = '';\n          this.statusElement.style.top = '';\n          this.statusElement.style.width = c2width - 2 + 'px';\n          break;\n        }\n      }\n    }\n    if (this.appContainer) {\n      this.appContainer.nativeElement.style.overflowY = 'hidden';\n    }\n  }\n\n  private rtp(width: number, height: number) {\n    if (this.boardElement && this.gameScoreElement && this.headerElement && this.statusElement && this.controlsElement) {\n      let boardHeight = (height * this.preferredRatioPortrait);\n      boardHeight = boardHeight > width ? width : boardHeight;\n      boardHeight = boardHeight < 192 ? 192 : boardHeight;\n      this.state = width <= 540 ? 1 : 2;\n      let hheight = this.state == 1 ? 310 : 240;\n      this.board?.setSize(boardHeight);\n      if (this.appContainer) {\n        this.appContainer.nativeElement.style.height = 'auto';\n        this.appContainer.nativeElement.style.width = '100%';\n        this.appContainer.nativeElement.style.overflowX = 'hidden';\n      }\n      switch (this.state) {\n        case 1: {\n          this.headerElement.style.maxHeight = hheight + 'px';\n          this.headerElement.style.height = hheight + 'px';\n          this.headerElement.style.width = width + 'px';\n          this.headerElement.style.right = '0px';\n          this.headerElement.style.left = '';\n          this.headerElement.style.overflowY = 'hidden';\n          this.headerElement.style.overflowX = 'hidden';\n          this.header?.resize(width, hheight);\n          this.boardElement.style.top = (hheight + 2) + 'px';\n          const board_margin = Math.floor((width - boardHeight) / 2);\n          this.boardElement.style.left = board_margin + 'px';\n          this.boardElement.style.right = '';\n          this.boardElement.style.bottom = '';\n          this.gameScoreElement.style.right = '2px';\n          this.gameScoreElement.style.width = width - 24 + 'px';\n          this.gameScoreElement.style.height = '456px';\n          this.gameScoreElement.style.top = '340px';\n          this.gameScoreElement.style.left = '';\n          this.gameScore?.resize(width, 456);\n          break;\n        }\n        case 2: {\n          this.headerElement.style.maxHeight = hheight + 'px';\n          this.headerElement.style.height = hheight + 'px';\n          this.headerElement.style.width = width + 'px';\n          this.headerElement.style.right = '0px';\n          this.headerElement.style.left = '';\n          this.header?.resize(width, hheight);\n          this.boardElement.style.top = (hheight + 2) + 'px';\n          const board_margin = Math.floor((width - boardHeight) / 2);\n          this.boardElement.style.left = board_margin + 'px';\n          this.boardElement.style.right = '';\n          this.boardElement.style.bottom = '';\n          this.controlsElement.style.right = '0px;'\n          this.controlsElement.style.width = width + 'px';\n          this.controlsElement.style.top = '';\n          this.controlsElement.style.bottom = '0px'; // cant be bottom\n          this.controlsElement.style.left = '0px';\n          this.controlsElement.style.height = '99px';\n          this.controlsComponent?.resize(width, 99);\n          break;\n        }\n      }\n      this.statusElement.style.bottom = '';\n      this.statusElement.style.top = (hheight + boardHeight + 4) + 'px';\n      this.statusElement.style.height = '32px';\n      this.statusElement.style.left = '2px';\n      this.statusElement.style.right = '2px';\n      this.statusElement.style.width = (width - 4) + 'px';\n      this.controlsElement.style.right = '0px;'\n      this.controlsElement.style.width = width + 'px';\n      this.controlsElement.style.top = (hheight + boardHeight + 36) + 'px';\n      this.controlsElement.style.bottom = ''; // cant be bottom\n      this.controlsElement.style.left = '0px';\n      this.controlsElement.style.height = '99px';\n      this.controlsComponent?.resize(width, 99);\n      this.gameScoreElement.style.right = '2px';\n      this.gameScoreElement.style.width = width + 'px';\n      this.gameScoreElement.style.height = 'auto';\n      this.gameScoreElement.style.top = (hheight + boardHeight + 142) + 'px';\n      this.gameScoreElement.style.left = '';\n      this.gameScore?.resize(width, 456);\n      if (this.appContainer) {\n        this.appContainer.nativeElement.style.overflowY = 'scroll';\n      }\n    }\n  }\n\n  public openSettings(): void {\n    // if (this.menuComponent) {\n    //   this.menuComponent.open();\n    // }\n    // move to sending open signal to parent page if menu does not exist\n  }\n\n  public closeSettings(): void {\n    // if (this.menuComponent) {\n    //   this.menuComponent.close();\n    // }\n  }\n\n  initializeLayout(olga: Olga): void {\n    this.olga = olga;\n    this.board = olga.canvasBoardComponent;\n    this.appContainer = olga.appContainer;\n    this.resizeObserver?.observe(this.appContainer.nativeElement);\n  }\n\n  // onSliderTouch(event: TouchEvent): void {\n  //   if (\n  //     event.touches.length > 0 &&\n  //     this.landscapeOrientation.value &&\n  //     event &&\n  //     event.touches[0].clientX > 64\n  //   ) {\n  //     if (this.olga && this.appContainer) {\n  //       let gsSize = window.innerWidth - event.touches[0].clientX;\n  //       const width = window.innerWidth\n  //         || document.documentElement.clientWidth\n  //         || document.body.clientWidth;\n\n  //       const height = window.innerHeight\n  //         || document.documentElement.clientHeight\n  //         || document.body.clientHeight;\n\n  //       switch (this.preferredLayout) {\n  //         case 'auto': {\n  //           if (width > height) {\n  //             this.resizeToLandscape(width, height, gsSize);\n  //           } else {\n  //             this.resizeToPortrait(width, height, gsSize);\n  //           }\n  //           break;\n  //         }\n  //         case 'landscape': {\n  //           this.resizeToLandscape(width, height, gsSize);\n  //           break;\n  //         }\n  //         case 'portrait': {\n  //           this.resizeToPortrait(width, height, gsSize);\n  //           break;\n  //         }\n  //       }\n  //     }\n  //   } else {\n  //     if (\n  //       !this.landscapeOrientation.value &&\n  //       event &&\n  //       event.touches[0].clientY > 64\n  //     ) {\n  //       if (this.olga && this.appContainer) {\n  //         let gsSize = window.innerHeight - event.touches[0].clientY;\n  //         const width = window.innerWidth\n  //           || document.documentElement.clientWidth\n  //           || document.body.clientWidth;\n\n  //         const height = window.innerHeight\n  //           || document.documentElement.clientHeight\n  //           || document.body.clientHeight;\n  //         switch (this.preferredLayout) {\n  //           case 'auto': {\n  //             if (width > height) {\n  //               this.resizeToLandscape(width, height, gsSize);\n  //             } else {\n  //               this.resizeToPortrait(width, height, gsSize);\n  //             }\n  //             break;\n  //           }\n  //           case 'landscape': {\n  //             this.resizeToLandscape(width, height, gsSize);\n  //             break;\n  //           }\n  //           case 'portrait': {\n  //             this.resizeToPortrait(width, height, gsSize);\n  //             break;\n  //           }\n  //         }\n  //       }\n  //     }\n  //   }\n  // }\n\n  // onSliderDrag(event: DragEvent): void {\n  //   if (this.landscapeOrientation.value && event && event.clientX > 64) {\n  //     if (this.olga && this.appContainer) {\n  //       let gsSize = window.innerWidth - event.clientX;\n  //       const width = window.innerWidth\n  //         || document.documentElement.clientWidth\n  //         || document.body.clientWidth;\n\n  //       const height = window.innerHeight\n  //         || document.documentElement.clientHeight\n  //         || document.body.clientHeight;\n\n  //       switch (this.preferredLayout) {\n  //         case 'auto': {\n  //           if (width > height) {\n  //             this.resizeToLandscape(width, height, gsSize);\n  //           } else {\n  //             this.resizeToPortrait(width, height, gsSize);\n  //           }\n  //           break;\n  //         }\n  //         case 'landscape': {\n  //           this.resizeToLandscape(width, height, gsSize);\n  //           break;\n  //         }\n  //         case 'portrait': {\n  //           this.resizeToPortrait(width, height, gsSize);\n  //           break;\n  //         }\n  //       }\n  //     }\n  //   } else {\n  //     if (!this.landscapeOrientation && event && event.clientY > 64) {\n  //       if (this.olga && this.appContainer) {\n  //         let gsSize = window.innerHeight - event.clientY;\n  //         const width = window.innerWidth\n  //           || document.documentElement.clientWidth\n  //           || document.body.clientWidth;\n\n  //         const height = window.innerHeight\n  //           || document.documentElement.clientHeight\n  //           || document.body.clientHeight;\n  //         switch (this.preferredLayout) {\n  //           case 'auto': {\n  //             if (width > height) {\n  //               this.resizeToLandscape(width, height, gsSize);\n  //             } else {\n  //               this.resizeToPortrait(width, height, gsSize);\n  //             }\n  //             break;\n  //           }\n  //           case 'landscape': {\n  //             this.resizeToLandscape(width, height, gsSize);\n  //             break;\n  //           }\n  //           case 'portrait': {\n  //             this.resizeToPortrait(width, height, gsSize);\n  //             break;\n  //           }\n  //         }\n  //       }\n  //     }\n  //   }\n  // }\n\n  resizeLayout(width: number, height: number): void {\n    if (!this.appContainer) {\n      console.log('Invalid (Null) App Container %$@');\n    } else {\n      const landscape = (width >= height);\n      this.landscapeOrientation.next(landscape);\n      switch (this.preferredLayout) {\n        case 'auto': {\n          if (landscape) {\n            this.rtl(width, height);\n          } else {\n            this.rtp(width, height);\n          }\n          break;\n        }\n        case 'landscape': {\n          this.rtl(width, height);\n          break;\n        }\n        case 'portrait': {\n          this.rtp(width, height);\n          break;\n        }\n      }\n    }\n  }\n\n\n  public shrink() {\n    if (this.appContainer) {\n      if (this.landscapeOrientation.value) {\n        if (this.preferredRatioLandscape >= .3) {\n          this.preferredRatioLandscape -= .1;\n          this.resizeLayout(this.appContainer.nativeElement.clientWidth, this.appContainer.nativeElement.clientHeight);\n        }\n      } else {\n        if (this.preferredRatioPortrait >= .3) {\n          this.preferredRatioPortrait -= .1;\n          this.resizeLayout(this.appContainer.nativeElement.clientWidth, this.appContainer.nativeElement.clientHeight);\n        }\n      }\n    }\n  }\n\n  public grow() {\n    if (this.appContainer) {\n      if (this.landscapeOrientation.value) {\n        if (this.preferredRatioLandscape <= .9) {\n          this.preferredRatioLandscape += .1;\n          this.resizeLayout(this.appContainer.nativeElement.clientWidth, this.appContainer.nativeElement.clientHeight);\n        }\n      } else {\n        if (this.preferredRatioPortrait <= .9) {\n          this.preferredRatioPortrait += .1;\n          this.resizeLayout(this.appContainer.nativeElement.clientWidth, this.appContainer.nativeElement.clientHeight);\n        }\n      }\n    }\n  }\n}\n","import { Injectable, Output, Input } from '@angular/core';\nimport { BehaviorSubject, Subscription } from 'rxjs';\nimport { GameScoreItem, ChessGame, GameScoreType, ChessMove } from '../common/kokopu-engine';\nimport { CanvasChessBoard } from '../canvas-chessboard/canvas-chessboard.component';\nimport { GamescoreUxComponent } from '../olga-score/olga-score.component';\nimport { OlgaStatusComponent } from '../olga-status/olga-status.component';\n// @ts-ignore\nimport { Node as KNode, Variation as KVariation } from 'kokopu';\nimport { OlgaControlsComponent } from '../olga-controls/olga-controls.component';\nimport { Olga } from '../app.component';\nimport { OlgaHeaderComponent } from '../olga-header/olga-header.component';\nimport { environment } from '../../environments/environment';\nexport interface PlayerData {\n  born?: string;\n  elo?: number;\n  image?: string;\n}\nexport interface GameData {\n  opening?: string;\n  country?: string;\n}\nexport enum ScoreViewType {\n  Table = 101,\n  Flow = 202\n};\n\n\nexport const STOCK_IMAGE = environment.imagesPath + 'player.png';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class OlgaService {\n  @Output() readonly showingPly = new BehaviorSubject<boolean>(true);\n  @Output() readonly showingHalfPly = new BehaviorSubject<boolean>(false);\n  @Output() readonly autoPlaySpeed = new BehaviorSubject<number>(300);\n  @Output() readonly scoreViewType = new BehaviorSubject<ScoreViewType>(ScoreViewType.Flow);\n  @Output() readonly showTableHeader = new BehaviorSubject<boolean>(true);\n  protected autoIntervalID = -1;\n  protected timeLeft = 300;\n  public UUID: string = '';\n  public setName: string = '';\n  public setDate: string = '';\n  public playerData: object = {};\n  public gameData = [];\n  readonly figurineNotation = new BehaviorSubject<boolean>(true);\n  @Output() readonly gsFontFamily = new BehaviorSubject<string>('FigurineSymbolT1');\n  @Output() readonly scoreFontSize = new BehaviorSubject<number>(32);\n  @Output() readonly figurineSize = new BehaviorSubject<number>(20);\n  @Output() readonly showLabels = new BehaviorSubject<boolean>(true);\n\n\n  private _games: ChessGame[] = [];\n  private _game: ChessGame | null = null;\n  private _result: string = '';\n  private _board: CanvasChessBoard | null = null;\n  private _score: GamescoreUxComponent | null = null;\n  private _status: OlgaStatusComponent | null = null;\n  private _controls: OlgaControlsComponent | null = null;\n  private _header: OlgaHeaderComponent | null = null;\n  private _app: Olga | null = null;\n  readonly isVariant = new BehaviorSubject<boolean>(false);\n\n\n  // Visual Settings\n  constructor() {\n    this.figurineNotation.subscribe((figurineNotation: boolean) => {\n      if (figurineNotation) {\n        this.gsFontFamily.next('FigurineSymbolT1');\n      } else {\n        this.gsFontFamily.next('Cambria');\n      }\n      document.documentElement.style.setProperty(\n        '--gsFontFamily',\n        this.gsFontFamily.value\n      );\n    });\n  }\n\n  public settings(): object {\n    let settings = {};\n    return settings;\n  }\n\n  public moveToStart(): void {\n    if (this._score) {\n      this._score.moveToStart();\n    }\n  }\n  public advance(): void {\n    if (this._score) {\n      this._score.advance();\n    }\n  }\n  public previous(): void {\n    if (this._score) {\n      this._score.previous();\n    }\n  }\n  public moveToEnd(): void {\n    if (this._score && !this._score.isFinalPosition()) {\n      this._score.moveToEnd();\n    }\n  }\n\n  public getNodeIndex(): number {\n    if (this._score) {\n      return this._score.currentIndex;\n    }\n    return -1;\n  }\n\n  public getPlyCount(): number {\n    if (this._score) {\n      return this._score.plyCount();\n    }\n    return 0;\n  }\n\n  protected autoAdvance(): void {\n    this.timeLeft -= 100;\n    if (this._controls) {\n      this._controls.setTimer(this.timeLeft);\n    }\n    if (this.timeLeft <= 0) {\n      if (this._score && !this._score.isFinalPosition()) {\n        this.advance();\n      } else {\n        this.toggleAutoPlay();\n      }\n      this.timeLeft = this.autoPlaySpeed.value;\n    }\n  }\n\n  protected createJsonSettings(): string {\n    if (this._app) {\n      return this._app.getJsonSettings();\n    }\n    return '';\n  }\n\n  protected setJsonSettings(json: string): boolean {\n    if (this._app) {\n      if (json.length > 0) {\n        const settings = JSON.parse(json);\n        return this._app.applyJsonSettings(settings);\n      }\n      return this._app.applyDefaultSettings();\n    }\n    return false;\n  }\n\n  public toggleAutoPlay(): void {\n\n    if (this._score && !this._score.isFinalPosition() && this.autoIntervalID == -1) {\n      this.autoIntervalID = window.setInterval(this.autoAdvance.bind(this), 100);\n      if (this._controls) {\n        this._controls.playing = true;\n      }\n    } else {\n      window.clearInterval(this.autoIntervalID);\n      this.autoIntervalID = -1;\n      this.timeLeft = this.autoPlaySpeed.value;\n      if (this._controls) {\n        this._controls.setTimer(this.timeLeft);\n        this._controls.playing = false;\n      }\n    }\n  }\n\n  public toggleScoreType(): void {\n    if (this.scoreViewType.value == ScoreViewType.Flow) {\n      this.scoreViewType.next(ScoreViewType.Table);\n    } else {\n      this.scoreViewType.next(ScoreViewType.Flow);\n    }\n  }\n\n  public gameCount(): number {\n    if (this._games) {\n      return this._games.length;\n    }\n    return 0;\n  }\n\n  public openEngine(): void { }\n\n  public toggleGameScoreViewType(): void {\n    if (this.scoreViewType.value === ScoreViewType.Flow) {\n      this.scoreViewType.next(ScoreViewType.Table);\n    } else {\n      this.scoreViewType.next(ScoreViewType.Flow);\n    }\n  }\n\n  public loadPGN(pgn: string) {\n    let fIndex = pgn.indexOf('[Set ');\n    if (fIndex >= 0) {\n      const endSet = pgn.indexOf(']', fIndex);\n      const setName = pgn.slice(fIndex, endSet + 1);\n      if (setName.length > 0 && setName.length < 240) {\n        this.setName = setName.slice(6, -2);\n      }\n      pgn = pgn.replace(setName, '');\n    }\n    fIndex = pgn.indexOf('[SetDate ');\n    if (fIndex >= 0) {\n      const endSet = pgn.indexOf(']', fIndex);\n      const setDate = pgn.slice(fIndex, endSet + 1);\n      if (setDate.length > 0 && setDate.length < 60) {\n        this.setDate = setDate.slice(10, -2);\n      }\n      pgn = pgn.replace(setDate, '');\n    }\n    fIndex = pgn.indexOf('[PlayerImages ');\n    let imagePath = '';\n    if (fIndex >= 0) {\n      const endSet = pgn.indexOf(']', fIndex);\n      const iPath = pgn.slice(fIndex, endSet + 1);\n      if (endSet >= 0 && endSet - fIndex <= 120) {\n        imagePath = iPath.slice(15, -2);\n      }\n      pgn = pgn.replace(iPath, '');\n    }\n    fIndex = pgn.indexOf('[PlayerData ');\n    this.playerData = {};\n    if (fIndex >= 0) {\n      const endSet = pgn.indexOf(']', fIndex);\n      const pData = pgn.slice(fIndex, endSet + 1);\n      if (endSet >= 0 && endSet - fIndex <= 1500) {\n        const data = pData.slice(13, -2);\n        if (data.length > 0) {\n          try {\n            this.playerData = JSON.parse(data) as object;\n            if (this.playerData) {\n              for (let k in this.playerData) {\n                // @ts-ignore\n                let pdata = this.playerData[k];\n                if (pdata.image) {\n                  pdata.image = imagePath + pdata.image;\n                }\n              }\n            }\n          } catch (ex) {\n            console.log('Bad parse on JSON player data');\n          }\n        }\n      }\n      pgn = pgn.replace(pData, '');\n    }\n    fIndex = pgn.indexOf('[GameData ');\n    this.gameData = [];\n    if (fIndex >= 0) {\n      let endSet = pgn.indexOf(']', fIndex);\n      endSet = pgn.indexOf(']', endSet + 1);\n      const pData = pgn.slice(fIndex, endSet + 1);\n      if (endSet >= 0 && endSet - fIndex <= 1500) {\n        const data = pData.slice(11, -2);\n        if (data.length > 0) {\n          try {\n            this.gameData = JSON.parse(data);\n          } catch (ex) {\n            console.log('Bad parse on JSON for game data');\n          }\n        }\n      }\n      pgn = pgn.replace(pData, '');\n    }\n    this._games = ChessGame.parsePGN(this, pgn);\n    if (this._games.length > 0) {\n      const game = this._games[0];\n      this._game = game;\n      window.setTimeout(() => {\n        // this._score?.setGameScoreItems(this._game?.generateGameScore());\n        // this._board?.setBoardToPosition(this._game?.getPosition());\n        // this._score?.updateSelection();\n        const headerData = this._game?.generateHeaderData();\n        if (headerData) {\n          const result = headerData.get('Result');\n          if (result) {\n            this._result = result;\n          }\n          if (this._header) {\n            this._header.setHeader(headerData);\n          }\n        }\n        this.selectGame(0);\n      }, 1);\n    }\n  }\n\n  public clearItems(): void {\n    if (this._score) {\n      this._score._items = [];\n    }\n  }\n\n  public typeToString(type: GameScoreType): string {\n    return GameScoreType[type];\n  }\n\n  public selectGame(index: number) {\n    if (index >= 0 && index <= this._games.length && this._score) {\n      this._game = this._games[index];\n      window.setTimeout(() => {\n        this._score?.clearGameScore();\n        this._score?.setGameScoreItems(this._game?.generateGameScore());\n        this._board?.setBoardToPosition(this._game?.getPosition());\n        this._score?.updateSelection();\n        const headerData = this._game?.generateHeaderData();\n        if (headerData) {\n          const result = headerData.get('Result');\n          if (result) {\n            this._result = result;\n          }\n          if (this._header) {\n            this._header.setHeader(headerData);\n            this._header.currentGame = index;\n            this._header.gameCount = this._games.length;\n          }\n        }\n      }, 1);\n    }\n  }\n\n  public attachOlga(olga: Olga) {\n    this._app = olga;\n    this._board = olga.canvasBoardComponent;\n    this._header = olga.headerComponent;\n    this._controls = olga.controlsComponent;\n    this._status = olga.statusComponent;\n  }\n  public attachScore(score: GamescoreUxComponent): void {\n    this._score = score;\n  }\n\n  public attachHeader(header: OlgaHeaderComponent) {\n    this._header = header;\n  }\n\n  public editComment(data: GameScoreItem): void {\n    console.log('Editing Comment -> ' + data.move.comment());\n  }\n\n  public openVariation(data: GameScoreItem): void {\n    const variations = data.move.variations();\n    if (this._score && variations && variations.length) {\n      console.log('Editing Variations on: ' + data.move.notation());\n      console.log(variations);\n      // if (this._menu) {\n      //   this._menu.openVariationMenu(data);\n      // }\n    }\n  }\n\n  public displayVariations(data: GameScoreItem): void {\n    console.log('Displaying Variations');\n    console.log(data.move.notation());\n    const variations = data.move.variations();\n    let previous = data;\n    variations.forEach((variation: KVariation) => {\n      console.log(variation);\n      let current = variation.first();\n      if (current) {\n        console.log('Variation chain :');\n        let chain = current.notation();\n        if (previous) {\n          chain = previous.move.notation() + '->' + chain;\n        }\n        while (current) {\n          current = current.next();\n          if (current) {\n            chain += '->' + current.notation();\n          }\n        }\n        console.log(chain);\n      }\n    });\n    console.log(variations);\n  }\n\n\n  // game score interface\n\n\n  // Board interface\n\n  public rotateBoardOrientation(): void {\n    if (this._board) {\n      if (this._board.settings.orientation == 'white') {\n        this._board.settings.orientation = 'black';\n      } else {\n        this._board.settings.orientation = 'white';\n      }\n      this._board.requestRedraw();\n    }\n  }\n  public reRenderBoard(): void {\n    if (this._board) {\n      this._board.requestRedraw();\n    }\n  }\n  public redrawBoard(): void {\n    if (this._game && this._board) {\n      const position = this._game.getPosition();\n      if (position) {\n        this._board.setBoardToPosition(position);\n      }\n    }\n  }\n\n  public updateStatus(turn: string, last?: KNode, move: any = null): void {\n    this._status?.updateStatus(turn, last, move);\n  }\n\n  public isVariantChanged(isVariant: boolean): void {\n    this.isVariant.next(isVariant);\n  }\n\n  public makeBoardMove(move: ChessMove): void {\n    this._board?.makeMove(move);\n  }\n\n  public reverseBoardMove(move: ChessMove): void {\n    this._board?.unMakeMove(move);\n  }\n\n  public showPromotionDialog(move: ChessMove): void {\n    this._board?.showPromotionDialog(move);\n  }\n\n  public incrementGameScoreSelection(): void {\n    this._score?.incrementSelection();\n  }\n\n  public gameScoreItemsChanged(items: GameScoreItem[]): void {\n    this._score?.setGameScoreItems(items);\n  }\n\n  public validGame(): boolean {\n    return this._game !== null;\n  }\n\n  public performPromotion(move: ChessMove): void {\n    this._game?.performPromotion(move);\n  }\n\n  public getGame(): ChessGame | null {\n    return this._game;\n  }\n\n  public getBoard(): CanvasChessBoard | null {\n    return this._board;\n  }\n\n  public getPlayerData(player: string): PlayerData | null {\n    // @ts-ignore\n    return this.playerData[player] as PlayerData;\n  }\n\n  public getGameData(index: number): GameData | null {\n    if (this.gameData.length > index && index >= 0) {\n      return this.gameData[index] as GameData;\n    }\n    return null;\n  }\n\n\n  // engine interface\n  public isMoveDescriptor(move: any): boolean {\n    return ChessGame.isMoveDescriptor(move);\n  }\n\n  public gameFEN(): string {\n    let fen = '';\n    if (this._game) {\n      return this._game.getPosition().fen();\n    }\n    return fen;\n  }\n\n  public gameResult(): string {\n    return this._result;\n  }\n\n  public getMoveNotation(node: KNode): string {\n    if (this._game) {\n      return this._game.getMoveNotation(node);\n    }\n    return '';\n  }\n\n  public play(next: GameScoreItem): boolean {\n    if (this._game) {\n      return this._game.play(next);\n    }\n    return false;\n  }\n  public unPlay(current: KNode, previous = null): boolean {\n    if (this._game) {\n      return this._game.unPlay(current, previous);\n    }\n    return false;\n  }\n\n  public makeEngineMove(next: ChessMove): boolean | null {\n    if (this._game) {\n      return this._game.makeMove(next);\n    }\n    return null;\n  }\n\n  public makeVariantMove(index: number, move: KNode): boolean {\n    if (this._game) {\n      return this._game.makeVariantMove(index, move);\n    }\n    return false;\n  }\n\n\n  public resetEngine(): void {\n    if (this._game) {\n      this._game.resetEngine();\n    }\n  }\n\n  public saveSettings(): void {\n    // if (this._cookies) {\n    //   if (this.cookiesAccepted.value) {\n    //     let settings = this.createJsonSettings();\n    //     this._cookies.setCookie(settings, 365);\n    //   } else {\n    //     this._cookies.setCookie('', 0);\n    //   }\n    // }\n    this._app?.saveSettings(this.createJsonSettings());\n  }\n\n  public loadSettings(): string {\n    let settings = '{}';\n    // if (this.cookiesAccepted.value) {\n    //   if (this._cookies) {\n    //     settings = this._cookies.getCookie();\n    //   }\n    //   this.setJsonSettings(settings);\n    // }\n    return settings;\n  }\n}\n","import { Injectable, Output, Input } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { BoardTheme } from '../canvas-chessboard/types';\nimport { environment } from '../../environments/environment';\n@Injectable({\n  providedIn: 'root',\n})\nexport class ThemeService {\n\n  // DEFAULTING TO DARK COLOR PALLETE\n  // Main Elements (background, sub containers, context menu)\n  @Input() @Output() readonly textColor = 'white'; // Main Text Color\n  @Input() @Output() readonly textColorAttention = 'purple'; // Attention text\n  @Input() @Output() readonly textColorRemove = 'red'; // Remove/Delete/Close\n  @Input() @Output() readonly textColorAdd = 'green'; // Add/Create/Open\n  @Input() @Output() readonly textColorActive = 'light-blue'; // Add/Create/Open\n  @Input() @Output() readonly background = '#434343'; // Main background Color\n  @Input() @Output() readonly bgContainer = '#353535'; // background of Containers\n  @Input() @Output() readonly bgMenu = '#353535'; // background of Menus\n  @Input() @Output() readonly bgItem = '#353535'; // background of containers\n\n  // Context menu\n  @Input() readonly bgContext = '#CC9966';\n  @Input() readonly textColorContext = 'white';\n  @Input() readonly borderContext = 'solid black 1px';\n  @Input() readonly overlayContextBackground = 'rgb(199,199,199)';\n  @Input() readonly overlayContextBackgroundGradient = 'linear-gradient(153deg, rgba(199,199,199,0.9051995798319328) 41%, rgba(249,249,249,0.8911939775910365) 83%)';\n\n\n  // Board Colors\n  @Input() @Output() readonly boardBGDark = new BehaviorSubject<string>('#81388f');\n  @Input() @Output() readonly boardBGLight = new BehaviorSubject<string>('#e0fffb');\n  @Input() @Output() readonly boardLabelDark = new BehaviorSubject<string>('#81388f');\n  @Input() @Output() readonly boardLabelLight = new BehaviorSubject<string>('#e0fffb');\n  @Input() @Output() readonly boardPieceSet = new BehaviorSubject<string>(environment.piecesPath + 'merida/');\n\n\n  // Menu\n  @Input() @Output() readonly meBackground = new BehaviorSubject<string>('#353535');\n  @Input() @Output() readonly meTextColor = new BehaviorSubject<string>('white');\n\n  // Game Score Variables\n  @Input() @Output() readonly gsTextColor = new BehaviorSubject<string>('black');\n  @Input() @Output() readonly gsBackground = new BehaviorSubject<string>('transparent');\n  @Input() @Output() readonly gsListBackground = new BehaviorSubject<string>('#353535');\n  @Input() @Output() readonly gsBorder = new BehaviorSubject<string>('');\n  @Input() @Output() readonly gsTextSize = new BehaviorSubject<string>('16px');\n  @Input() @Output() readonly gsTableItemWidth = new BehaviorSubject<string>('70px');\n  @Input() @Output() readonly gsTablePlyWidth = new BehaviorSubject<string>('48px');\n\n  // Game Score Highlight Colors\n  @Input() @Output() readonly gsTextColorHG = new BehaviorSubject<string>('orange');\n  @Input() @Output() readonly gsAnnotationColorHG = new BehaviorSubject<string>('lightcoral');\n  @Input() @Output() readonly gsBackgroundHG = new BehaviorSubject<string>('#353535');\n  @Input() @Output() readonly gsBorderHG = new BehaviorSubject<string>('');\n\n  // Game Score Annotation Colors\n  @Input() @Output() readonly gsTextColorAN = new BehaviorSubject<string>('#AED6F1');\n  @Input() @Output() readonly gsBackgroundAN = new BehaviorSubject<string>('#333333');\n  @Input() @Output() readonly gsBorderAN = new BehaviorSubject<string>('');\n  @Input() @Output() readonly gsTextSizeAN = new BehaviorSubject<string>('16px');\n\n  // Game Score Variation Colors\n  @Input() @Output() readonly gsTextColorVA = new BehaviorSubject<string>('white');\n  @Input() @Output() readonly gsBackgroundVA = new BehaviorSubject<string>('#353535');\n  @Input() @Output() readonly gsBorderVA = new BehaviorSubject<string>('black 1px solid');\n\n  // Game Score Ply Count\n  @Input() @Output() readonly gsTextColorPC = new BehaviorSubject<string>('white');\n  @Input() @Output() readonly gsBackgroundPC = new BehaviorSubject<string>('#353535');\n  @Input() @Output() readonly gsBorderPC = new BehaviorSubject<string>('');\n\n\n  // Control Elements (Buttons, sliders, number wheels, toggle switches)\n  readonly csBackground = new BehaviorSubject<string>('#81388f');\n  readonly csColor = new BehaviorSubject<string>('#e0fffb');\n  readonly csFill = new BehaviorSubject<string>('#00ffffff');\n  readonly csFill2 = new BehaviorSubject<string>('#00ffffff');\n  readonly csAccent = new BehaviorSubject<string>('#e25400');\n  readonly csAccent2 = new BehaviorSubject<string>('#e25400');\n\n\n\n  // Font Sizes\n  readonly gsFontSize = new BehaviorSubject<number>(14);\n  readonly gsFontSizeHG = new BehaviorSubject<number>(14);\n  readonly gsFontSizeAN = new BehaviorSubject<number>(14);\n  readonly gsFontSizeVA = new BehaviorSubject<number>(14);\n  readonly gsFontSizePC = new BehaviorSubject<number>(14);\n  readonly hdrDataFontSize = new BehaviorSubject<number>(14);\n  readonly hdrNameFontSize = new BehaviorSubject<number>(14);\n  readonly hdrTitleFontSize = new BehaviorSubject<number>(14);\n  readonly hdrVariantFontSize = new BehaviorSubject<number>(14);\n  readonly hdrMatchDataFontSize = new BehaviorSubject<number>(14);\n  readonly hdrResultFontSize = new BehaviorSubject<number>(14);\n  readonly hdrRoundFontSize = new BehaviorSubject<number>(14);\n\n  @Output() propertyMap = new Map<string, BehaviorSubject<string> | BehaviorSubject<number>>();\n  // Menu specific Colors\n\n  // Title Colors\n  constructor() {\n    // Game Score\n    this.createColorMap();\n  }\n\n  updateColor(name: string, color: string): void {\n    if (this.propertyMap.has(name)) {\n      const subject = this.propertyMap.get(name) as BehaviorSubject<string>;\n      if (subject) {\n        subject.next(color);\n      }\n      document.documentElement.style.setProperty(\n        name,\n        color\n      );\n    }\n  }\n\n  boardTheme(): BoardTheme {\n    return new BoardTheme(\n      this.boardBGLight.value,\n      this.boardBGDark.value,\n      this.boardPieceSet.value\n    );\n  }\n\n  private createColorMap(): void {\n    this.propertyMap.clear();\n    this.propertyMap.set('--gsTextColorPC', this.gsTextColorPC);\n    this.propertyMap.set('--gsTextColor', this.gsTextColor);\n    this.propertyMap.set('--gsBackgroundPC', this.gsBackgroundPC);\n    this.propertyMap.set('--gsBorderPC', this.gsBorderPC);\n    this.propertyMap.set('--gsTextColorVA', this.gsTextColorVA);\n    this.propertyMap.set('--gsBackgroundVA', this.gsBackgroundVA);\n    this.propertyMap.set('--gsBorderVA', this.gsBorderVA);\n    this.propertyMap.set('--gsTextColorAN', this.gsTextColorAN);\n    this.propertyMap.set('--gsBackgroundAN', this.gsBackgroundAN);\n    this.propertyMap.set('--gsBorderAN', this.gsBorderAN);\n    this.propertyMap.set('--gsTextColorHG', this.gsTextColorHG);\n    this.propertyMap.set('--gsBackgroundHG', this.gsBackgroundHG);\n    this.propertyMap.set('--gsBackground', this.gsBackground);\n    this.propertyMap.set('--gsListBackground', this.gsListBackground);\n    this.propertyMap.set('--gsBorderHG', this.gsBorderHG);\n    this.propertyMap.set('--gsTextColorHG', this.gsTextColorHG);\n    this.propertyMap.set('--gsBackgroundHG', this.gsBackgroundHG);\n    this.propertyMap.set('--gsAnnotationColorHG', this.gsAnnotationColorHG);\n    this.propertyMap.set('--gsTableItemWidth', this.gsTableItemWidth);\n    this.propertyMap.set('--gsTablePlyWidth', this.gsTablePlyWidth);\n    // Menu\n    this.propertyMap.set('--meBackground', this.meBackground);\n    // Board\n    this.propertyMap.set('--boardLabelDark', this.boardLabelDark);\n    this.propertyMap.set('--boardLabelLight', this.boardLabelLight);\n    this.propertyMap.set('--boardBGDark', this.boardBGDark);\n    this.propertyMap.set('--boardBGLight', this.boardBGLight);\n\n    // Controls\n    this.propertyMap.set('--csBackground', this.csBackground);\n    this.propertyMap.set('--csColor', this.csColor);\n    this.propertyMap.set('--csFill', this.csFill);\n    this.propertyMap.set('--csFill2', this.csFill2);\n    this.propertyMap.set('--csAccent', this.csAccent);\n    this.propertyMap.set('--csAccent2', this.csAccent2);\n\n\n    // Font Sizes\n    this.propertyMap.set('--gsFontSize', this.gsFontSize);\n    this.propertyMap.set('--gsFontSizeAN', this.gsFontSizeAN);\n    this.propertyMap.set('--gsFontSizeHG', this.gsFontSizeHG);\n    this.propertyMap.set('--gsFontSizeVA', this.gsFontSizeVA);\n    this.propertyMap.set('--gsFontSizePC', this.gsFontSizePC);\n    this.propertyMap.set('--hdrDataFontSize', this.hdrDataFontSize);\n    this.propertyMap.set('--hdrNameFontSize', this.hdrNameFontSize);\n    this.propertyMap.set('--hdrTitleFontSize', this.hdrTitleFontSize);\n    this.propertyMap.set('--hdrVariantFontSize', this.hdrVariantFontSize);\n    this.propertyMap.set('--hdrMatchDataFontSize', this.hdrMatchDataFontSize);\n    this.propertyMap.set('--hdrResultFontSize', this.hdrResultFontSize);\n    this.propertyMap.set('--hdrRoundFontSize', this.hdrRoundFontSize);\n\n    this.propertyMap.forEach((value, key) => {\n      if (typeof value.value == \"string\") {\n        (value as BehaviorSubject<string>).subscribe((newVal) => {\n          document.documentElement.style.setProperty(key, newVal);\n        });\n      } else {\n        (value as BehaviorSubject<number>).subscribe((newVal) => {\n          document.documentElement.style.setProperty(key, newVal + \"px\");\n        });\n      }\n    });\n  }\n  public settings(): object {\n    let settings = {};\n    this.propertyMap.forEach((behavior, key) => {\n      // @ts-ignore\n      settings[key] = behavior.value;\n    });\n    return settings;\n  }\n\n  public setSettings(settings: object): void {\n    for (let key in settings) {\n      if (this.propertyMap.has(key)) {\n        const subject = this.propertyMap.get(key);\n        if (subject) {\n          // @ts-ignore\n          subject.next(settings[key]);\n        }\n      }\n    }\n    this.initializeColorPalette();\n  }\n\n  setDarkColorPalette(): void {\n    // Add hardcoded chessgames dark color pallete\n  }\n\n  setLightColorPalette(): void {\n    // Add hardcoded chessgames dark color pallete\n  }\n\n  initializeColorPalette(): void {\n    this.propertyMap.forEach((value, key) => {\n      if (typeof value.value == \"string\") {\n        document.documentElement.style.setProperty(key, value.value);\n      } else {\n        document.documentElement.style.setProperty(key, value.value + \"px\");\n      }\n    });\n  }\n}\n","import { environment } from \"../environments/environment\";\r\n\r\nexport const TestPGNData = '[Set \"Testing Olga 2\"]' +\r\n    '[SetDate \"October 8th - December 31st, 1990\"]' +\r\n    '[PlayerImages \"' + environment.playersPath +'\"]' +\r\n    '[PlayerData \"{\"Garry Kasparov\":{\"born\":\"April 13th 1963\",\"image\":\"Garry-Kasparov.png\", \"elo\":2812}, \"Anatoly Karpov\":{\"image\":\"Anatoly-Karpov.png\", \"elo\":2617, \"born\":\"May 23th 1951\"}, \\\r\n    \"Egemen Gulden\":{\"born\":\"2000\", \"image\":\"Egemen-Gulden.png\", \"elo\":2118}, \"Andrei Macovei\":{\"born\":\"2000\", \"image\":\"Andrei-Macovei.png\", \"elo\":2453}, \\\r\n    \"Robert James Fischer\":{\"born\":\"March 9th 1943\", \"image\":\"Bobby-Fischer-BW.png\", \"elo\":2780}, \"Hans Berliner\":{\"born\":\"Jan 27th 1929\", \"image\":\"Hans-Berliner.png\"}, \\\r\n    \"V Anand\":{\"born\":\"December 11th 1969\", \"image\":\"V-Anand.png\", \"elo\":2753}, \"T Radjabov\":{\"born\":\"March 12th 1987\",\"image\":\"T-Radjabov.png\",\"elo\":2753}}\"]' +\r\n    '[GameData \"[{\"opening\":\"Spanish Game: Closed Variations. Keres Defense (C92)\", \"country\":\"us\"},{\"opening\":\"Formation: King\\'s Indian Attack (A07)\", \"country\":\"tr\"},{\"opening\":\"Queen\\'s Gambit Declined: Exchange Variation (D35)\", \"country\":\"us\"}]\"]' +\r\n    '[Event \"Kasparov - Karpov World Championship Match\"]\\n' +\r\n    '[Site \"New York, NY USA\"]\\n' +\r\n    '[Date \"1990.10.24\"]\\n' +\r\n    '[EventDate \"?\"]\\n' +\r\n    '[Round \"6\"]\\n' +\r\n    '[Result \"1/2-1/2\"]\\n' +\r\n    '[White \"Garry Kasparov\"]\\n' +\r\n    '[Black \"Anatoly Karpov\"]\\n' +\r\n    '[ECO \"C92\"]\\n' +\r\n    '[WhiteElo \"?\"]\\n' +\r\n    '[BlackElo \"?\"]\\n' +\r\n    '[PlyCount \"83\"]\\n' +\r\n    '\\n' +\r\n    '1.e4 e5 2.Nf3 Nc6 3.Bb5 a6 4.Ba4 Nf6 5.O-O Be7 6.Re1 b5 7.Bb3 ' +\r\n    'd6 8.c3 O-O 9.h3 Nd7 10.d4 Bf6 11.a4 Bb7 12.axb5 axb5 13.Rxa8 ' +\r\n    'Qxa8 14.d5 Na5 15.Bc2 Nc4 16.b3 Ncb6 17.Na3 Ba6 18.Nh2 c6 ' +\r\n    '19.dxc6 Qxc6 20.Bd2 Be7 21.Ng4 Ra8 22.Ne3 Nf6 23.Nf5 Bf8 ' +\r\n    '24.Bg5 Nbd7 25.c4 bxc4 26.bxc4 Bxc4 27.Nxc4 Qxc4 28.Bb3 Qc3 ' +\r\n    '29.Kh2 h6 30.Bxf6 Nxf6 31.Re3 Qc7 32.Rf3 Kh7 33.Ne3 Qe7 34.Nd5 ' +\r\n    'Nxd5 35.Bxd5 Ra7 36.Qb3 f6 37.Qb8 g6 38.Rc3 h5 39.g4 Kh6 ' +\r\n    '40.gxh5 Kxh5 41.Rc8 Bg7 42.Re8 1/2-1/2\\n' +\r\n    '\\n' +\r\n    '[Event \"World Junior Championship\"]\\n' +\r\n    '[Site \"Gebze TUR\"]\\n' +\r\n    '[Date \"2018.09.05\"]\\n' +\r\n    '[EventDate \"2018.09.05\"]\\n' +\r\n    '[Round \"1.65\"]\\n' +\r\n    '[Result \"1-0\"]\\n' +\r\n    '[White \"Egemen Gulden\"]\\n' +\r\n    '[Black \"Andrei Macovei\"]\\n' +\r\n    '[ECO \"B25\"]\\n' +\r\n    '[WhiteElo \"2068\"]\\n' +\r\n    '[BlackElo \"2385\"]\\n' +\r\n    '[PlyCount \"62\"]\\n' +\r\n    '\\n' +\r\n    '1. e4 g6 2. Nc3 Bg7 3. g3 c5 4. Bg2 Nc6 5. d3 d6 6. Nh3 e6 7. O-O Nge7 8. Be3\\n' +\r\n    'O-O 9. Qd2 Nd4 10. Nd1 b6 11. c3 Ndc6 12. Bh6 e5 13. Bxg7 Kxg7 14. Ne3 f6 15. f4\\n' +\r\n    'Rb8 16. Rf2 Bxh3 17. Bxh3 exf4 18. Rxf4 d5 19. Raf1 dxe4 20. Rxe4 f5 21. Rh4 Ng8\\n' +\r\n    '22. Nxf5+ gxf5 23. Bxf5 Rxf5 24. Rxf5 Rb7 25. Rg4+ Kh8 26. Qf4 Rb8 27. Rf7 Qxd3\\n' +\r\n    '28. Qg5 Qd1+ 29. Kg2 Qe2+ 30. Kh3 Qe5 31. Rxh7+ 1-0\\n' +\r\n    '\\n' +\r\n    '[Event \"Western Open\"]\\n' +\r\n    '[Site \"Bay City, MI USA\"]\\n' +\r\n    '[Date \"1963.07.07\"]\\n' +\r\n    '[EventDate \"?\"]\\n' +\r\n    '[Round \"8\"]\\n' +\r\n    '[Result \"0-1\"]\\n' +\r\n    '[White \"Hans Berliner\"]\\n' +\r\n    '[Black \"Robert James Fischer\"]\\n' +\r\n    '[ECO \"D35\"]\\n' +\r\n    '[WhiteElo \"?\"]\\n' +\r\n    '[BlackElo \"?\"]\\n' +\r\n    '[PlyCount \"106\"]\\n' +\r\n    '\\n' +\r\n    '1. d4 Nf6 2. c4 e6 3. Nc3 d5 4. cxd5 Nxd5 5. e4 Nxc3 6. bxc3\\n' +\r\n    'c5 7. Nf3 cxd4 8. cxd4 Bb4+ 9. Bd2 Bxd2+ 10. Qxd2 O-O 11. Bd3\\n' +\r\n    'b6 12. O-O Bb7 13. Rfd1 Nc6 14. Qb2 Qf6 15. Rac1 Rfd8 16. Bb5\\n' +\r\n    'Rac8 17. Ne5 Nxe5 18. dxe5 Qf4 19. Rxc8 Rxc8 20. Qd4 g5 21. f3\\n' +\r\n    'g4 22. Be2 gxf3 23. gxf3 Kh8 24. Kh1 Ba6 25. Qf2 Bxe2 26. Qxe2\\n' +\r\n    'Qxe5 27. Rg1 f5 28. Qd3 fxe4 29. fxe4 Rf8 30. Qc2 Qf6 31. Rg2\\n' +\r\n    'Qd4 32. h3 Qa1+ 33. Rg1 Qe5 34. Qe2 b5 35. Qc2 b4 36. Qd3 a5\\n' +\r\n    '37. Qc2 Qf6 38. Qc4 Qf3+ 39. Kh2 Rd8 40. Qc2 Qc3 41. Qxc3+\\n' +\r\n    'bxc3 42. Rc1 Rd3 43. Rb1 Kg7 44. Rb5 a4 45. Rc5 a3 46. Kg2 Re3\\n' +\r\n    '47. Rc4 Kf6 48. h4 Ke5 49. Kf2 Rh3 50. Kg2 Rd3 51. h5 Kf4\\n' +\r\n    '52. h6 Ke3 53. Rc7 Kd2 0-1\\n' +\r\n    '\\n' +\r\n    '[Event \"FO-2009-0-00001\"]\\n' +\r\n    '[Site \"Lechenicher SchachServer\"]\\n' +\r\n    '[Date \"2009.06.13\"]\\n' +\r\n    '[Round \"?\"]\\n' +\r\n    '[White \"Walker, Jeffrey\"]\\n' +\r\n    '[Black \"Szabo, Eleonora\"]\\n' +\r\n    '[Result \"1-0\"]\\n' +\r\n    '[WhiteElo \"2000\"]\\n' +\r\n    '[BlackElo \"2200\"]\\n' +\r\n    '[Variant \"chess960\"]\\n' +\r\n    '[SetUp \"1\"]\\n' +\r\n    '[FEN \"qrbbknrn/pppppppp/8/8/8/8/PPPPPPPP/QRBBKNRN w GBgb - 0 1\"]\\n' +\r\n    '[PlyCount \"39\"]\\n' +\r\n    '[EventDate \"2009.06.11\"]\\n' +\r\n    '\\n' +\r\n    '{STARTING POSITION: 773} 1. Ne3 e5 2. b4 Nhg6 3. Ng3 Ne6 4. c4 O-O 5. O-O b5 6.\\n' +\r\n    'cxb5 Rxb5 7. a4 Rb8 8. f3 d5 9. Nef5 c5 10. bxc5 Rxb1 11. Qxb1 Ba6 12. Ba3 Qc6\\n' +\r\n    '13. Qb2 Bc7 14. Nh5 Rb8 15. Qc3 d4 16. Qc1 Ba5 17. g3 Bb4 18. Bxb4 Rxb4 19. d3\\n' +\r\n    'Bb7 20. a5 1-0\\n' +\r\n    '\\n' +\r\n    '[Event \"FO-2009-0-00001\"]\\n' +\r\n    '[Site \"Lechenicher SchachServer\"]\\n' +\r\n    '[Date \"2009.06.13\"]\\n' +\r\n    '[Round \"?\"]\\n' +\r\n    '[White \"Szabo, Eleonora\"]\\n' +\r\n    '[Black \"Walker, Jeffrey\"]\\n' +\r\n    '[Result \"0-1\"]\\n' +\r\n    '[WhiteElo \"2200\"]\\n' +\r\n    '[BlackElo \"2000\"]\\n' +\r\n    '[Variant \"chess960\"]\\n' +\r\n    '[SetUp \"1\"]\\n' +\r\n    '[FEN \"qrbbknrn/pppppppp/8/8/8/8/PPPPPPPP/QRBBKNRN w GBgb - 0 1\"]\\n' +\r\n    '[PlyCount \"32\"]\\n' +\r\n    '[EventDate \"2009.06.11\"]\\n' +\r\n    '\\n' +\r\n    '{STARTING POSITION: 773} 1. Nhg3 Ne6 2. e4 Ng6 3. Ne3 b5 4. d3 O-O 5. b3 f6 6.\\n' +\r\n    'O-O c5 7. Bh5 Nef4 8. Bxg6 hxg6 9. a4 b4 10. Nc4 Ne6 11. Ne3 Bc7 12. Bb2 Nf4\\n' +\r\n    '13. Rbe1 Qc6 14. Ne2 Nxe2+ 15. Rxe2 g5 16. Nd5 Bd6 0-1\\n' +\r\n    '\\n' +\r\n    '[Event \"FO-2009-0-00010\"]\\n' +\r\n    '[Site \"Lechenicher SchachServer\"]\\n' +\r\n    '[Date \"2009.06.18\"]\\n' +\r\n    '[Round \"?\"]\\n' +\r\n    '[White \"Tanti, Joseph\"]\\n' +\r\n    '[Black \"Dibley, Shane\"]\\n' +\r\n    '[Result \"0-1\"]\\n' +\r\n    '[WhiteElo \"2000\"]\\n' +\r\n    '[BlackElo \"2200\"]\\n' +\r\n    '[Variant \"chess960\"]\\n' +\r\n    '[SetUp \"1\"]\\n' +\r\n    '[FEN \"nbqnrkbr/pppppppp/8/8/8/8/PPPPPPPP/NBQNRKBR w HEhe - 0 1\"]\\n' +\r\n    '[PlyCount \"86\"]\\n' +\r\n    '[EventDate \"2009.06.13\"]\\n' +\r\n    '\\n' +\r\n    '{STARTING POSITION:} 1. d4 c5 2. d5 c4 3. e4 e6 4. Qd2 exd5 5. Qxd5 Nb6 6. Qd2\\n' +\r\n    'h5 7. f3 h4 8. Qb4+ d6 9. Bxb6 axb6 10. Ne3 Nc6 11. Qxc4 f5 12. Nd5 Rh5 13. O-O\\n' +\r\n    'f4 14. Qd3 h3 15. Nxf4 hxg2 16. Nxh5 Ne5 17. Qd4 gxf1=Q+ 18. Rxf1 Qh3 19. Ng3\\n' +\r\n    'Bc4 20. Rf2 d5 21. c3 Nc6 22. Qe3 Bxg3 23. hxg3 O-O-O 24. f4 dxe4 25. Bc2 Bd3\\n' +\r\n    '26. Rg2 Ne5 27. fxe5 Rh8 28. Bxd3 Qh1+ 29. Kf2 Rf8+ 30. Qf4 Rxf4+ 31. gxf4 Qh4+\\n' +\r\n    '32. Kg1 exd3 33. Nb3 Qxf4 34. Nd2 Qxe5 35. Nf1 g5 36. Rd2 Qd5 37. a3 g4 38. Ne3\\n' +\r\n    'Qf3 39. Nf1 g3 40. Rg2 b5 41. Nd2 Qe3+ 42. Kf1 Kc7 43. b3 Qe5 0-1\\n'\r\n'\\n';","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false,\n  imagesPath: 'assets/images/',\n  playersPath: 'assets/images/players/',\n  piecesPath: 'assets/images/pieces/',\n  iconsPath: 'assets/images/icons/',\n  flagsPath: 'assets/images/flags/'\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"sourceRoot":"webpack:///"}